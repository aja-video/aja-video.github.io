<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AJA NTV2 SDK: SDI Ancillary Data</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../ajastyles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../AJALogoMini.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AJA NTV2 SDK
   &#160;<span id="projectnumber">18.0.0.2505</span>
   </div>
   <div id="projectbrief">NTV2 SDK 18.0.0.2505</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d7/dcb/ancillarydata.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SDI Ancillary Data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Traditionally, AJA’s NTV2 SDI devices processed active video and ancillary data using separate data paths in the hardware. This is still very much the case, although the introduction of Anc inserter/extractor firmware has created further options.</p>
<p><b>CONTENTS:</b></p><ul>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancdatatypes">Common Ancillary Data Types</a><ul>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancembeddedaudio">Embedded Audio</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anctimecode">Timecode</a><ul>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anctimecodeinput">Embedded SDI Timecode Input</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anctimecodeoutput">Embedded SDI Timecode Output</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancanalogltcinput">Analog LTC Input</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancanalogltcoutput">Analog LTC Output</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anctimecodedisplay">Timecode Display</a></li>
</ul>
</li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancvpid">VPID</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anccaptions">Closed-Captions</a></li>
</ul>
</li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anccapture">SDI Anc Packet Capture</a><ul>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anccapture-filter">Ancillary Packet Filtering</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#anccapture-dataspace">Ancillary Data Space Limitations</a></li>
</ul>
</li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancplayout">SDI Anc Packet Playout</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancbufferformats">Anc Buffer Data Formats</a><ul>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a></li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#ancrtpformat">RTP Anc Buffer Data Format</a></li>
</ul>
</li>
<li><a class="el" href="../../d7/dcb/ancillarydata.html#vancframegeometries">VANC Frame Geometries</a></li>
</ul>
<h1><a class="anchor" id="ancdatatypes"></a>
Common Ancillary Data Types</h1>
<p>The common Ancillary Data Types are audio, timecode, VPID, and Closed Captions.</p>
<h2><a class="anchor" id="ancembeddedaudio"></a>
Embedded Audio</h2>
<p>Embedded audio in HANC is normally handled by the Audio System(s) in firmware — see <a class="el" href="../../d1/dc5/ntv2devops.html#audop-section">Audio System Operation</a> for more information.</p>
<p>Devices that have <b>Anc Extractor</b> firmware are able to capture the “raw” audio packets from HANC …&#160;then decode them per SMPTE/AES specifications. See <a class="el" href="../../d7/dcb/ancillarydata.html#anccapture">SDI Anc Packet Capture</a> (below) for information on how to do this.</p>
<hr  size="50px" />
<h2><a class="anchor" id="anctimecode"></a>
Timecode</h2>
<p>The timecode aspects of NTV2’s SDK and firmware has its origins in the early 2000s — when NTV2 devices were SD-only, and the SMPTE 12M spec was still evolving. FPGA space was very tight in those days, including the number of registers available … which is one reason why the same registers were used for RP-188 capture and playout.</p>
<ul>
<li>Two 32-bit registers are required to store a timecode value:<ul>
<li>one for the low-order 32 bits;</li>
<li>another for the high-order 32 bits</li>
</ul>
</li>
<li>An extra register is used to hold the extra “Distributed Binary Bits” (DBB) information per SMPTE 12M and RP-188.</li>
<li>In the SDK, these three register values are represented by the <a class="el" href="../../d9/dba/class_n_t_v2___r_p188.html" title="This struct replaces the old RP188_STRUCT.">NTV2_RP188</a> data type, and the older <a class="el" href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html">RP188_STRUCT</a> data type.</li>
</ul>
<p>On older devices (i.e. those that <em>don’t</em> support “stacked audio” — see <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#ae561712c383551002a87e2b13a4d4296">NTV2DeviceCanDoStackedAudio</a>) and those <em>without</em> bidirectional SDI connectors (see <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#add0bea97e5bae91256afa64381ff57de">NTV2DeviceHasBiDirectionalSDI</a>), one general-purpose register triplet is used to store an SDI input’s timecode <b><em>and also</em></b> provide a place to specify a timecode for SDI output. In other words, one register triplet is used for reading a timecode from, say, SDI In 1 <em>and</em> for writing a timecode to, say, SDI Out 1. The Hi/Lo-order general-purpose timecode registers are “write-only” for SDI output; and “read-only” for SDI input. In other words, reading those registers yields the received input timecode, while writing those registers sets the output (playout) timecode.</p>
<dl class="section note"><dt>Note</dt><dd>This inability to read back what’s been written into the register is very different behavior from nearly all other NTV2 registers. For devices that follow this old model, it’s impossible to fetch the output timecode value that was written for playout. So beware that when <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a858950cb362a1e64ce66844f86e8d31f" title="Writes the raw RP188 data into the DBB/Low/Hi registers for the given SDI output. These values are la...">CNTV2Card::SetRP188Data</a> is called on these older devices, it’s not possible to find out what was “set”, since <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc" title="Reads the raw RP188 data from the DBB/Low/Hi registers for the given SDI input. On newer devices with...">CNTV2Card::GetRP188Data</a> is always reading the SDI input’s timecode.</dd></dl>
<p>On newer devices that have bi-directional SDI connectors (i.e. both <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#ae561712c383551002a87e2b13a4d4296">NTV2DeviceCanDoStackedAudio</a> and <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#add0bea97e5bae91256afa64381ff57de">NTV2DeviceHasBiDirectionalSDI</a> return <code>true</code>), <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc" title="Reads the raw RP188 data from the DBB/Low/Hi registers for the given SDI input. On newer devices with...">CNTV2Card::GetRP188Data</a> will return the corresponding SDI output’s timecode if the SDI spigot is configured for output (see <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a5c96925ccda0a4b57c5bf352d648c1fe" title="Sets the specified bidirectional SDI connector to act as an input or an output.">CNTV2Card::SetSDITransmitEnable</a>).</p>
<p>For End-to-End (E-E) mode, i.e. when an SDI input is connected directly to an SDI output, to pass through timecode obtained from an SDI input…</p><ul>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ac86afd2c387dc921e7bfdb0d49f5f64a" title="Configures the SDI output&#39;s embedder to embed SMPTE 12M timecode obtained from an SDI input,...">CNTV2Card::EnableRP188Bypass</a> to have the SDI output’s timecode embedder <em>not</em> use the RP188 registers, but instead use timecode obtained from an SDI input.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a8ae468d85e903463544c1552fcff6d96" title="For the given SDI output that&#39;s in RP188 bypass mode (E-E), specifies the SDI input to be used as a t...">CNTV2Card::SetRP188BypassSource</a> to specify which SDI input to use.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ac2ae325e9a0d2f4c74e00e438400f2e7" title="Sets the RP188 DBB filter for the given SDI input.">CNTV2Card::SetRP188SourceFilter</a> to specify which input timecode to use — e.g. 0 for LTC, 1 for VITC1, etc.</li>
</ul>
<h3><a class="anchor" id="anctimecodeinput"></a>
Embedded SDI Timecode Input</h3>
<p>Any RP-188 data in the SDI input video with DBB-1 data matching the input’s current RP-188 source select filter (see <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ac2ae325e9a0d2f4c74e00e438400f2e7" title="Sets the RP188 DBB filter for the given SDI input.">CNTV2Card::SetRP188SourceFilter</a>) will be placed into the input’s RP-188 registers.</p>
<p>There are two ways to receive input timecode:</p><ul>
<li>When using <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculatecapture">AutoCirculate Capture</a>, do the following:<ul>
<li>Pass <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ab257890d32e7a59d2bf10177c18a0abf" title="Use this to AutoCirculate with RP188.">AUTOCIRCULATE_WITH_RP188</a> to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a>;</li>
<li>While processing frames, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>;</li>
<li>Call <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ace3464b8a0471687507fa3e56294f350" title="Intended for capture, answers with the timecodes captured in my acTransferStatus member&#39;s acFrameStam...">AUTOCIRCULATE_TRANSFER::GetInputTimeCodes</a>, and look for the RP-188 timecode(s) of interest…<ul>
<li>in the <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a2de3fb8715d9a5aa0b00ba1696c28cea" title="A mapping of NTV2TCIndex enum values to NTV2_RP188 structures.">NTV2TimeCodes</a> map, or…</li>
<li>in the <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a0dc5ff3a2d98a5b33fbc9ea988b0a80e" title="An ordered sequence of zero or more NTV2_RP188 structures. An NTV2TCIndex enum value can be used as a...">NTV2TimeCodeList</a> vector.</li>
</ul>
</li>
</ul>
</li>
<li>Without <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a>, use either of these two methods:<ul>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc" title="Reads the raw RP188 data from the DBB/Low/Hi registers for the given SDI input. On newer devices with...">CNTV2Card::GetRP188Data</a> (shortly after the input VBI) for the SDI Input of interest, using the DBB filter to choose the timecode of interest (LTC, VITC1, VITC2 … see <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ac2ae325e9a0d2f4c74e00e438400f2e7" title="Sets the RP188 DBB filter for the given SDI input.">CNTV2Card::SetRP188SourceFilter</a> ).<ul>
<li>There are extra bits in <a class="el" href="../../d9/dba/class_n_t_v2___r_p188.html#ac7eead38d254112fd585e171b6dd6d0d">NTV2_RP188::fDBB</a> that indicate what was received:<ul>
<li><code><a class="el" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT(16)</a></code>: If set, indicates RP-188 is being received.</li>
<li><code><a class="el" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT(17)</a></code>: Valid when RP-188 filtering is in-play (see <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ac2ae325e9a0d2f4c74e00e438400f2e7" title="Sets the RP188 DBB filter for the given SDI input.">CNTV2Card::SetRP188SourceFilter</a>): If set, indicates the requested (filtered) RP-188 has been received.</li>
<li><code><a class="el" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT(18)</a></code>: If set, indicates ATC/LTC was received.</li>
<li><code><a class="el" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT(19)</a></code>: If set, indicates VITC was received.</li>
</ul>
</li>
</ul>
</li>
<li>Or use the <b>Anc Extractor</b> firmware described in <a class="el" href="../../d7/dcb/ancillarydata.html#anccapture">SDI Anc Packet Capture</a> (below) to capture the “raw” HANC timecode packet data …&#160;then decode it per the SMPTE specifications.</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><b>Regarding High Frame Rates (&gt;30fps):</b> When reading timecode for any input faster than 30fps, you’ll see a duplicate frame count in two successive frames — but in the latter frame, the field bit will be set, and the DBB will indicate a value of 0x02 (VITC2). This is the SMPTE ST-12M-preferred way of sending &gt;30fps timecode. The 12M specification says there are systems that won’t conform to this transmission convention, so receivers that want to support them will need to be flexible.</dd></dl>
<dl class="section user"><dt>Example: Capturing Embedded SDI Timecode Without AutoCirculate</dt><dd></dd></dl>
<p><b>SetUpRP188</b></p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>  gChToRP188DBBRegNum[] = {  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa5c1a2f6984cea2340cf32de98d721e81">kRegRP188InOut1DBB</a>,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa3c3d2170b7dc08beb6a84f29d5cfcf72">kRegRP188InOut2DBB</a>,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa2e83fa1b3e7b30cd9893843e2623465d">kRegRP188InOut3DBB</a>,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefaf441c9108958ceabf9c3b4856f3a692e">kRegRP188InOut4DBB</a>,</div>
<div class="line">                                                <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa07e6e4f750835051f69cca0526bd4167">kRegRP188InOut5DBB</a>,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa23e12bd97cdb2db6afd758521e7b4bf1">kRegRP188InOut6DBB</a>,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefaea6b6ba8ed6c92966050c8a843a77769">kRegRP188InOut7DBB</a>,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefaafe8c65c4e33397ab90012c86ce8a2f0">kRegRP188InOut8DBB</a>,  0};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> SetUpRP188 (<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a> &amp; inCard)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aaa90748f5a92082fa4f79c89698d9463">NTV2DeviceID</a>  deviceID        (inCard.<a class="code" href="../../d0/dbc/class_c_n_t_v2_driver_interface.html#a7e4ebdaf05f325d13582eac32084ee5a">GetDeviceID</a>());</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">bool</span>          isKonaLHi       (deviceID == <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aaa90748f5a92082fa4f79c89698d9463a74c6015ed8aef5741ab17feb43f565cc">DEVICE_ID_KONALHI</a>);</div>
<div class="line">    <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>              userDefinedDBB  (0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce">NTV2Channel</a> ch(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>);  ch &lt; <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce">NTV2Channel</a>(::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#a1c7b90df5e62610074a95589224057af">NTV2DeviceGetNumVideoOutputs</a>(deviceID));  ch = <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce">NTV2Channel</a>(ch + 1))</div>
<div class="line">    {</div>
<div class="line">        inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#aaba4ed33e51a3fc0769bc6dcca4f421a">SetRP188Mode</a> (ch, <a class="code" href="../../d6/d0c/ntv2enums_8h.html#ac6f9ee67bd7eda647024de39e44843c1a402aee60afaf52714e3a4010f6497d1c">NTV2_RP188_OUTPUT</a>);</div>
<div class="line">        inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (<a class="code" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daa5246a0dbc917d2169c3f87665c7f3453">kVRegUserDefinedDBB</a>, userDefinedDBB);</div>
<div class="line">        <span class="keywordflow">if</span> (!userDefinedDBB == 0)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a> inputFilter (0x00);</div>
<div class="line">            <span class="keywordflow">if</span> (::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#a60122423551bfc4f9a6272cbc91d8cd7">NTV2DeviceCanDoVITC2</a>(deviceID))</div>
<div class="line">                inputFilter = 0x02;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isKonaLHi)</div>
<div class="line">                inputFilter = 0x01;</div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40">WriteRegister</a> (gChToRP188DBBRegNum[ch],  inputFilter,  <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>(<a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#ac2cd24508e310b59ed5ab3d0b0bfd999a26ea01dceabd44eb530ed22f9edf0cd8">kRegMaskRP188SourceSelect</a>),  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a1ad23526580ea92c8985d86211d6e7faa4f6a912aa766051997160dab24c32664">kRegShiftRP188Source</a>);</div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40">WriteRegister</a> (gChToRP188DBBRegNum[ch],  isKonaLHi ? 0x00 : 0xFF,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#ac2cd24508e310b59ed5ab3d0b0bfd999ac304d7173d1d6a25c642db4409abcdb7">kRegMaskRP188DBB</a>,  <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a1ad23526580ea92c8985d86211d6e7faa7feb876a7b469fc8c7f849d2951fd061">kRegShiftRP188DBB</a>);</div>
<div class="line">        }</div>
<div class="line">    }  <span class="comment">//  for each SDI connector</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#a2ab42865b9e04750b25ae8e129c86cb7">NTV2DeviceCanDoWidget</a>(m_DeviceID, <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a000096cdf1eb36b50c8e55c406f24befac0652c7f833a7338699456bffaf23b1d">NTV2_WgtSDIMonOut1</a>))</div>
<div class="line">    {</div>
<div class="line">        inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#aaba4ed33e51a3fc0769bc6dcca4f421a">SetRP188Mode</a> (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dcea8befde0a976532079f2a1e809eb4fa46">NTV2_CHANNEL5</a>, <a class="code" href="../../d6/d0c/ntv2enums_8h.html#ac6f9ee67bd7eda647024de39e44843c1a402aee60afaf52714e3a4010f6497d1c">NTV2_RP188_OUTPUT</a>);</div>
<div class="line">        inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (<a class="code" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daa5246a0dbc917d2169c3f87665c7f3453">kVRegUserDefinedDBB</a>, userDefinedDBB);</div>
<div class="line">        <span class="keywordflow">if</span> (!userDefinedDBB)</div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40">WriteRegister</a> (gChToRP188DBBRegNum[<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dcea8befde0a976532079f2a1e809eb4fa46">NTV2_CHANNEL5</a>], 0xFF, <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#ac2cd24508e310b59ed5ab3d0b0bfd999ac304d7173d1d6a25c642db4409abcdb7">kRegMaskRP188DBB</a>, <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a1ad23526580ea92c8985d86211d6e7faa7feb876a7b469fc8c7f849d2951fd061">kRegShiftRP188DBB</a>);</div>
<div class="line">    }</div>
<div class="line">}  <span class="comment">//  SetUpRP188</span></div>
</div><!-- fragment --><p><b>GetReceivedTCForChannel</b></p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> GetReceivedTCForChannel (<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a> &amp; inCard, <span class="keyword">const</span> <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce">NTV2Channel</a> inChannel, <a class="code" href="../../d9/dba/class_n_t_v2___r_p188.html">NTV2_RP188</a> &amp; outReceivedLTC, <a class="code" href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html">RP188_STRUCT</a> &amp; outReceivedVITC1, <a class="code" href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html">RP188_STRUCT</a> &amp; outReceivedVITC2)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>  receivedAnyRP188  (0);</div>
<div class="line">    <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>  receivedLTC       (0);</div>
<div class="line">    <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>  receivedVITC1     (0);</div>
<div class="line">    <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>  receivedVITC2     (0);</div>
<div class="line">    <a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>  inputFilter       (0x02);</div>
<div class="line">    <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a8f85ca8efb8928620e1fbb6282a5e686">NTV2VideoFormat</a>    channelFormat (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfaa8aef211eda693c83f1ea31a076842d6">NTV2_FORMAT_UNKNOWN</a>);</div>
<div class="line">    inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#aa2fd595db82ca28dcedcdb77c3ac99ab">GetVideoFormat</a> (channelFormat, inChannel);</div>
<div class="line">    outReceivedLTC.<a class="code" href="../../d9/dba/class_n_t_v2___r_p188.html#a94c46c58079d40bae85dac9b7ddb9cd5">Set</a>();  outReceivedVITC1.Set();  outReceivedVITC2.Set();  <span class="comment">// Make invalid</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">//  Any TC available?</span></div>
<div class="line">    inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel], receivedAnyRP188, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(16), 16);</div>
<div class="line">    <span class="keywordflow">if</span> (!receivedAnyRP188)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//  Read the input filter, can be overridden by software any time (AutoCirculate initializes once)</span></div>
<div class="line">    inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel], inputFilter, (<a class="code" href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a>)<a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#ac2cd24508e310b59ed5ab3d0b0bfd999a26ea01dceabd44eb530ed22f9edf0cd8">kRegMaskRP188SourceSelect</a>, <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a1ad23526580ea92c8985d86211d6e7faa4f6a912aa766051997160dab24c32664">kRegShiftRP188Source</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//  If the filter is not FF, only fill in the selected (if received)...</span></div>
<div class="line">    <span class="keywordflow">switch</span> (inputFilter)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> 0x0000:    <span class="comment">//  User requested LTC only</span></div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a>(gChToRP188DBBRegNum[inChannel], &amp;receivedLTC, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(17), 17);</div>
<div class="line">            <span class="keywordflow">if</span> (receivedLTC)</div>
<div class="line">                inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedLTC);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> 0x0001:    <span class="comment">//  User requested VITC only</span></div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel], receivedLTC, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(18), 18);</div>
<div class="line">            <span class="keywordflow">if</span> (!receivedLTC  &amp;&amp;  inChannel == <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>)</div>
<div class="line">                inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (<a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa09d681b293f9617e39355aff2439f347">kRegFS1ReferenceSelect</a>, receivedLTC, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(9), 9);  <span class="comment">// Reg 95</span></div>
<div class="line">            <span class="keywordflow">if</span> (receivedLTC)</div>
<div class="line">            {</div>
<div class="line">                inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedLTC);</div>
<div class="line">                outReceivedLTC.DBB |= <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(18);    <span class="comment">//  Set &quot;LTC received&quot; bit</span></div>
<div class="line">            }</div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel], receivedVITC1, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(17), 17);</div>
<div class="line">            <span class="keywordflow">if</span> (receivedVITC1)</div>
<div class="line">            {</div>
<div class="line">                outReceivedVITC1.<a class="code" href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html#ad3fa2d972d93cfa6af22add78d9dde35">DBB</a> = inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel]);</div>
<div class="line">                outReceivedVITC1.<a class="code" href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html#ade7f71ab1a679a6b1d68d97ff281ad76">Low</a> = inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChannelToRP188Bits031RegisterNum[inChannel]);</div>
<div class="line">                outReceivedVITC1.<a class="code" href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html#ad3ac9a4fe535b4a0e5c0a820fa253591">High</a> = inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChannelToRP188Bits3263RegisterNum[inChannel]);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:    <span class="comment">//  User requested whatever&#39;s there</span></div>
<div class="line">            <span class="comment">//  Check for LTC...</span></div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel], receivedLTC, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(18), 18);</div>
<div class="line">            <span class="keywordflow">if</span> (!receivedLTC  &amp;&amp;  inChannel == <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>)</div>
<div class="line">                inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (<a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa09d681b293f9617e39355aff2439f347">kRegFS1ReferenceSelect</a>, receivedLTC, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(9), 9);  <span class="comment">// Reg 95</span></div>
<div class="line">            <span class="keywordflow">if</span> (receivedLTC)</div>
<div class="line">            {</div>
<div class="line">                inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedLTC);</div>
<div class="line">                outReceivedLTC.DBB |= <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(18);    <span class="comment">//  Set &quot;LTC received&quot; bit</span></div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">//  Check for VITC1/VITC2...</span></div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel], receivedVITC1, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(19), 19);</div>
<div class="line">            inCard.<a class="code" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">ReadRegister</a> (gChToRP188DBBRegNum[inChannel], receivedVITC2, <a class="code" href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a>(17), 17);</div>
<div class="line">            <span class="keywordflow">if</span> (receivedVITC1  &amp;&amp;  receivedVITC2)</div>
<div class="line">            {</div>
<div class="line">                inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedVITC1);</div>
<div class="line">                inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedVITC2);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (receivedVITC1)</div>
<div class="line">                    inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedVITC1);</div>
<div class="line">                <span class="keywordflow">if</span> (receivedVITC2)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a398465e390c93ee105f7ff1db1328c6c">NTV2_VIDEO_FORMAT_HAS_PROGRESSIVE_PICTURE</a>(channelFormat))</div>
<div class="line">                        inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedVITC1);</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                        inCard.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">GetRP188Data</a> (inChannel, outReceivedVITC2);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">    }  <span class="comment">//  switch on inputFilter</span></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}  <span class="comment">//  GetReceivedTCForChannel</span></div>
</div><!-- fragment --><h3><a class="anchor" id="anctimecodeoutput"></a>
Embedded SDI Timecode Output</h3>
<p>When RP-188 output is enabled for an SDI output (by calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aaba4ed33e51a3fc0769bc6dcca4f421a" title="Sets the current RP188 mode – NTV2_RP188_INPUT or NTV2_RP188_OUTPUT – for the given channel.">CNTV2Card::SetRP188Mode</a> and passing it <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ac6f9ee67bd7eda647024de39e44843c1a402aee60afaf52714e3a4010f6497d1c">NTV2_RP188_OUTPUT</a>), whatever RP-188 data was written into the RP-188 registers is inserted into the HANC of the SDI output video after the next output VBI on the appropriate line (even when “tall” or “taller” <a class="el" href="../../d7/dcb/ancillarydata.html#vancframegeometries">VANC Frame Geometries</a> are in use):</p><ul>
<li>SD NTSC 720×486 — lines 10 &amp; 273</li>
<li>SD PAL 720×576 — lines 7 &amp; 320</li>
<li>HD 1280×720 &amp; 1920×1080 &amp; up — line 10</li>
</ul>
<p>There are two ways to transmit timecode:</p><ul>
<li>When using <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculateplayout">AutoCirculate Playout</a>, generally, AutoCirculate automatically configures the RP-188 registers, and writes the appropriate registers at the proper time using the provided timecode value(s).<ul>
<li>Pass <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ab257890d32e7a59d2bf10177c18a0abf" title="Use this to AutoCirculate with RP188.">AUTOCIRCULATE_WITH_RP188</a> to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a>.</li>
<li>Before calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>, call one of …<ul>
<li><a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#a70fa67d6db801cb8cd118d5ff1b78257" title="Intended for playout, sets one element of my acOutputTimeCodes member.">AUTOCIRCULATE_TRANSFER::SetOutputTimeCode</a>, …or…</li>
<li><a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#acdf96c6bb96f0b87570354bdd298951c" title="Intended for playout, replaces the contents of my acOutputTimeCodes member.">AUTOCIRCULATE_TRANSFER::SetOutputTimeCodes</a>.</li>
<li>If more than one SDI output is connected to the FrameStore/Channel being AutoCirculated…<ul>
<li>call <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#a70fa67d6db801cb8cd118d5ff1b78257" title="Intended for playout, sets one element of my acOutputTimeCodes member.">AUTOCIRCULATE_TRANSFER::SetOutputTimeCode</a> multiple times, for each desired SDI output’s timecode value, or…</li>
<li>call <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#acdf96c6bb96f0b87570354bdd298951c" title="Intended for playout, replaces the contents of my acOutputTimeCodes member.">AUTOCIRCULATE_TRANSFER::SetOutputTimeCodes</a> once, passing it an <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a2de3fb8715d9a5aa0b00ba1696c28cea" title="A mapping of NTV2TCIndex enum values to NTV2_RP188 structures.">NTV2TimeCodes</a> map that contains the timecodes to be written for each desired SDI output.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>When not using <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a>, for a given SDI output connector, do the following:<ul>
<li>During setup…<ul>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aaba4ed33e51a3fc0769bc6dcca4f421a" title="Sets the current RP188 mode – NTV2_RP188_INPUT or NTV2_RP188_OUTPUT – for the given channel.">CNTV2Card::SetRP188Mode</a> and pass it <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ac6f9ee67bd7eda647024de39e44843c1a402aee60afaf52714e3a4010f6497d1c">NTV2_RP188_OUTPUT</a>;</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ab0452537d818c7dffe3621d8bc696d1e" title="Configures the SDI output&#39;s embedder to embed SMPTE 12M timecode specified in calls to CNTV2Card::Set...">CNTV2Card::DisableRP188Bypass</a> to force the SDI output embedder to utilize the RP-188 registers.</li>
</ul>
</li>
<li>For each outgoing frame, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a858950cb362a1e64ce66844f86e8d31f" title="Writes the raw RP188 data into the DBB/Low/Hi registers for the given SDI output. These values are la...">CNTV2Card::SetRP188Data</a> to specify the RP-188 timecode to embed in the next outgoing frame (for a given SDI output connector).</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Starting in SDK 15.0, when doing <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculateplayout">AutoCirculate Playout</a> with both <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ab257890d32e7a59d2bf10177c18a0abf" title="Use this to AutoCirculate with RP188.">AUTOCIRCULATE_WITH_RP188</a> and <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a17762d5a20d6047800541682dfe2cb9b" title="Use this to AutoCirculate with ancillary data.">AUTOCIRCULATE_WITH_ANC</a> on an IP device (see <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#a9e63b4838d38ea10483c713e2d89aacb">NTV2DeviceCanDoIP</a>) that supports SMPTE 2110 (see <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#ac5a36c2bb57790f9ad000c05934dabb1">NTV2DeviceCanDo2110</a>), <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> will automatically add all channel-relevant timecodes found in the <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#aea03ef407a0f3328fa2bb25282bc9a50" title="Intended for playout, this is an ordered sequence of NTV2_RP188 values to send to the device....">AUTOCIRCULATE_TRANSFER::acOutputTimeCodes</a> buffer into the relevant RTP packets in the <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#a8ac7e3786f4ea4f646611be1020b985e" title="The host ancillary data buffer. This field is owned by the client application, and thus is responsibl...">AUTOCIRCULATE_TRANSFER::acANCBuffer</a> and/or <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#a20a037b1a2883bcbdaf96f436adecef7" title="The host &quot;Field 2&quot; ancillary data buffer. This field is owned by the client application,...">AUTOCIRCULATE_TRANSFER::acANCField2Buffer</a> (see <a class="el" href="../../d7/dcb/ancillarydata.html#ancrtpformat">RTP Anc Buffer Data Format</a>), augmenting what was already placed there. If this is not desired, and you’d prefer to use your own timecode packets, then call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> without specifying <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ab257890d32e7a59d2bf10177c18a0abf" title="Use this to AutoCirculate with RP188.">AUTOCIRCULATE_WITH_RP188</a>, then add the timecode <a class="el" href="../../dd/de8/class_a_j_a_ancillary_data.html" title="I am the principal class that stores a single SMPTE-291 SDI ancillary data packet OR the digitized co...">AJAAncillaryData</a> packet(s) to the <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a> before calling <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#a8e21da356bd363fc98e22ce3ab293512" title="Explicitly encodes my AJAAncillaryData packets into the given buffers in RTP Anc Buffer Data Format ....">AJAAncillaryList::GetIPTransmitData</a> (prior to calling <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad7480e96337587fd0035a42f6d43b17d" title="Sets my ancillary data buffers for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.">AUTOCIRCULATE_TRANSFER::SetAncBuffers</a> and <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>).</dd></dl>
<h3><a class="anchor" id="ancanalogltcinput"></a>
Analog LTC Input</h3>
<p>On AJA devices having one or more analog LTC inputs —&#160;or devices that can receive LTC from the Reference Input — there’s a pair of registers for each LTC input that store the received timecode:&#160; one for the high-order 32 bits, the other for the low-order 32 bits. Historically, the LTC input circuitry has relied on the prevailing input’s frame rate to know when to fetch and decode the incoming analog timecode signal and latch the detected timecode values.</p>
<dl class="section note"><dt>Note</dt><dd>On newer multi-format-capable devices (see <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#aef5852308d0853201208edf44bad20ea">NTV2DeviceCanDoMultiFormat</a>), the incoming LTC frame rate must match a designated SDI input’s frame rate (see <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a14c0fcc0acf15b9f4a17b7af8a7f5f67" title="Sets the (SDI) input channel that is to provide the clock reference to be used by the given analog LT...">CNTV2Card::SetAnalogLTCInClockChannel</a>).</dd></dl>
<p>There are two ways to input analog LTC:</p><ul>
<li>Using <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculatecapture">AutoCirculate Capture</a> :<ul>
<li>AutoCirculate automatically reads the LTC registers at the proper time, and provides the captured timecode with each captured frame.</li>
<li>Pass <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a9844fc7ed12b837b5f3a4f39f0e3025e" title="Use this to AutoCirculate with analog LTC.">AUTOCIRCULATE_WITH_LTC</a> to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a>.</li>
<li>After each successful call to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>, look for the captured LTC returned from <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ace3464b8a0471687507fa3e56294f350" title="Intended for capture, answers with the timecodes captured in my acTransferStatus member&#39;s acFrameStam...">AUTOCIRCULATE_TRANSFER::GetInputTimeCodes</a> …<ul>
<li>in the <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a2de3fb8715d9a5aa0b00ba1696c28cea" title="A mapping of NTV2TCIndex enum values to NTV2_RP188 structures.">NTV2TimeCodes</a> map — use <a class="el" href="../../d6/d0c/ntv2enums_8h.html#acf70cd3d0e59052892b4fceacf147851ae6df61300a26871abd801350b9d83129" title="Analog LTC 1.">NTV2_TCINDEX_LTC1</a> or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#acf70cd3d0e59052892b4fceacf147851ae5e7334e69a0648f026948b755b70ae3" title="Analog LTC 2.">NTV2_TCINDEX_LTC2</a> as the key;</li>
<li>in the <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a0dc5ff3a2d98a5b33fbc9ea988b0a80e" title="An ordered sequence of zero or more NTV2_RP188 structures. An NTV2TCIndex enum value can be used as a...">NTV2TimeCodeList</a> vector — use <a class="el" href="../../d6/d0c/ntv2enums_8h.html#acf70cd3d0e59052892b4fceacf147851ae6df61300a26871abd801350b9d83129" title="Analog LTC 1.">NTV2_TCINDEX_LTC1</a> or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#acf70cd3d0e59052892b4fceacf147851ae5e7334e69a0648f026948b755b70ae3" title="Analog LTC 2.">NTV2_TCINDEX_LTC2</a> as the index.</li>
</ul>
</li>
</ul>
</li>
<li>Without <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> : <div class="fragment"><div class="line"><a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a> device;</div>
<div class="line"><span class="comment">// . . . </span></div>
<div class="line"><a class="code" href="../../db/de2/ajatypes_8h.html#acb8d6e569b9ec9f532e1bf203b02aa96">NTV2_ASSERT</a>(device.IsOpen()  &amp;&amp;  <span class="stringliteral">&quot;Device must be open&quot;</span>);</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aaa90748f5a92082fa4f79c89698d9463">NTV2DeviceID</a> deviceID (device.<a class="code" href="../../d0/dbc/class_c_n_t_v2_driver_interface.html#a7e4ebdaf05f325d13582eac32084ee5a">GetDeviceID</a>());</div>
<div class="line"><span class="keywordtype">bool</span>               canReadAnalogLTC (<span class="keyword">false</span>);</div>
<div class="line"><span class="keywordtype">bool</span>               isMultiFormatMode (<span class="keyword">false</span>);</div>
<div class="line"><a class="code" href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a>              whichLTCInput(0);</div>
<div class="line"><a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce">NTV2Channel</a>        whichSDIInputHasInputClock(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Check device capability...</span></div>
<div class="line"><span class="keywordflow">if</span> (::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#a2531be66d3eb0f62b1fa362b35182cac">NTV2DeviceGetNumLTCInputs</a>(deviceID)</div>
<div class="line">    || (::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#a43b972ed23192429f87c40bf7cee2b19">NTV2DeviceGetNumReferenceVideoInputs</a>(deviceID) &amp;&amp; ::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#ad4ca87b50cb52c351c69ce2a95c8b804">NTV2DeviceCanDoLTCInOnRefPort</a>(deviceID)))</div>
<div class="line">        canReadAnalogLTC = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#ad4ca87b50cb52c351c69ce2a95c8b804">NTV2DeviceCanDoLTCInOnRefPort</a>(deviceID))</div>
<div class="line">    device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a4dca4f7dbf9496f65e6e4154117aac2d">SetLTCInputEnable</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="keywordflow">if</span> (::<a class="code" href="../../d9/dfb/ntv2devicefeatures_8hh.html#aef5852308d0853201208edf44bad20ea">NTV2DeviceCanDoMultiFormat</a>(deviceID))</div>
<div class="line">    <span class="keywordflow">if</span> (device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a3a725a1899c9b85e93d03176e281c349">GetMultiFormatMode</a>(isMultiFormatMode))</div>
<div class="line">        <span class="keywordflow">if</span> (isMultiFormatMode)</div>
<div class="line">            device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a14c0fcc0acf15b9f4a17b7af8a7f5f67">SetAnalogLTCInClockChannel</a>(whichLTCInput, whichSDIInputHasInputClock);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Process frames...</span></div>
<div class="line"><span class="keywordflow">while</span> (::WaitForInputFieldID(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#ae31d61e5f8328c58eb86af00d16e235daa8ad180541cbe234428f84b9f918cccc">NTV2_FIELD0</a>, whichSDIInputHasInputClock))</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../d9/dba/class_n_t_v2___r_p188.html">NTV2_RP188</a>  analogLTC;</div>
<div class="line">    <span class="keywordtype">bool</span>        analogLTCPresent (<span class="keyword">false</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (canReadAnalogLTC)</div>
<div class="line">        device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#ac1cb0716a6edab2c96f71271a487118f">GetLTCInputPresent</a>(analogLTCPresent);  <span class="comment">// Anything there?</span></div>
<div class="line">    <span class="keywordflow">if</span> (analogLTCPresent)</div>
<div class="line">        device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a22343759cb28b6df7b8dbbe368ba3644">ReadAnalogLTCInput</a>(whichLTCInput, analogLTC);</div>
<div class="line">    <span class="keywordflow">if</span> (analogLTC.<a class="code" href="../../d9/dba/class_n_t_v2___r_p188.html#a875accf1e5b0c9b817256738eb454f8a">IsValid</a>())</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Do something with the timecode data...</span></div>
<div class="line">        std::cout &lt;&lt; analogLTC &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">}  <span class="comment">// for each frame</span></div>
</div><!-- fragment --></li>
</ul>
<h3><a class="anchor" id="ancanalogltcoutput"></a>
Analog LTC Output</h3>
<p>On AJA devices having one or more analog LTC outputs —&#160;there’s a pair of registers for each LTC output for placing the timecode to be transmitted:&#160; one for the high-order 32 bits, the other for the low-order 32 bits.</p>
<p>LTC output can be driven “end-to-end” by its corresponding LTC input.</p>
<dl class="section note"><dt>Note</dt><dd>On newer multi-format-capable devices (see <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#aef5852308d0853201208edf44bad20ea">NTV2DeviceCanDoMultiFormat</a>), the outgoing LTC frame rate must match a designated SDI output’s frame rate (see <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a75f1fd34fad7d1e9bc2c259d494fadfe" title="Sets the (SDI) output channel that is to provide the clock reference to be used by the given analog L...">CNTV2Card::SetAnalogLTCOutClockChannel</a>).</dd></dl>
<p>There are two ways to output analog LTC:</p><ul>
<li>Using <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculateplayout">AutoCirculate Playout</a> :<ul>
<li>AutoCirculate automatically sets the LTC output register(s) at the proper time.</li>
<li>Pass <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a9844fc7ed12b837b5f3a4f39f0e3025e" title="Use this to AutoCirculate with analog LTC.">AUTOCIRCULATE_WITH_LTC</a> to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a>.</li>
<li>Before calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>, call one of …<ul>
<li><a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#a70fa67d6db801cb8cd118d5ff1b78257" title="Intended for playout, sets one element of my acOutputTimeCodes member.">AUTOCIRCULATE_TRANSFER::SetOutputTimeCode</a> …&#160;or …</li>
<li><a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#acdf96c6bb96f0b87570354bdd298951c" title="Intended for playout, replaces the contents of my acOutputTimeCodes member.">AUTOCIRCULATE_TRANSFER::SetOutputTimeCodes</a> …</li>
<li>…using <a class="el" href="../../d6/d0c/ntv2enums_8h.html#acf70cd3d0e59052892b4fceacf147851ae6df61300a26871abd801350b9d83129" title="Analog LTC 1.">NTV2_TCINDEX_LTC1</a> or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#acf70cd3d0e59052892b4fceacf147851ae5e7334e69a0648f026948b755b70ae3" title="Analog LTC 2.">NTV2_TCINDEX_LTC2</a> as the index (or key), as required.</li>
</ul>
</li>
</ul>
</li>
<li>Otherwise, without <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> :<ul>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#af9169bc50ca2eda2f669a94e6ba7a570" title="Writes the given timecode to the specified analog LTC output register.">CNTV2Card::WriteAnalogLTCOutput</a>. After the next output VBI, the given timecode will be sent out the specified LTC output connector.</li>
</ul>
</li>
<li>Call <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#ad744bcd8136c31703a6edcc7930d5d40">NTV2DeviceGetNumLTCOutputs</a> to discover the number of LTC outputs.</li>
</ul>
<hr  size="50px" />
<h3><a class="anchor" id="anctimecodedisplay"></a>
Timecode Display</h3>
<p>In SDK 17.5, AJA committed to resolving the High Frame-Rate (HFR) timecode display problem. SMPTE ST 12-1 (formerly SMPTE 12M) timecode only allows enough bits to code for up to 30 frames per second (with the standard officially supporting 24, 25, 30 drop-frame, and 30 non-drop). SMPTE ST 12-3 provides a way to encode rates above 30 fps by reusing DBB, field and color frame bits. However, neither standard addresses how timecode is actually presented to a human being, particularly for high frame rates, which has led to multiple <em>de facto</em> “standards” from multiple vendors. What follows below is a description of what is henceforth the AJA standard, which is based on HFR presentation in various video tape machines (the binary representation of this is what eventually became SMPTE ST 12-3) as well as software like the Autodesk Suite that requires users to know (and enter) exact frame values.</p>
<p>The <a class="el" href="../../d1/d32/class_a_j_a_time_code.html" title="Utility class for timecodes.">AJATimeCode</a> class supports 2 types of display conventions. Each is independent of the other, and may be matched as needed.</p><ul>
<li><b>Frame-Count</b> convention</li>
<li><b>Delimiter</b> convention</li>
</ul>
<p><b>Frame-Count</b> convention applies only to the frame field of a timecode. There are 2 types:</p><ul>
<li><b>LFR</b> (Standard or Default)<ul>
<li>Frame values in the frame field are restricted by convention to be less than 30. This supports timecode used in legacy video standards and common in legacy VTRs and hardware.<ul>
<li>Frame number is unaltered when frame rate is less than or equal to 30 fps.</li>
<li>Frame number is divided by 2 when frame rate is greater than 30 fps. Fractional frame values are truncated.</li>
<li>Frame number is divided by 4 when frame rate is greater than 60 fps. Fractional frame values are truncated.</li>
</ul>
</li>
<li>Example: Given a 60 fps non-drop frame rate, the frame roll for frames 0, 1, 2, 3, 4, ... 59, 60 are:<ul>
<li><a class="el" href="../../d6/d23/timecode_8h.html#ab146a6a3623deac0c116322e8e432db2aaf58e9db2cce50ea8c1bffd5be2bc130" title="Legacy notation (e.g. 01:02:03;29 .. 01:02:03:58)">AJA_TIMECODE_LEGACY</a> (LFR):<br  />
 <code>00:00:00:00</code><br  />
 <code>00:00:00:00</code><br  />
 <code>00:00:00:01</code><br  />
 <code>00:00:00:01</code><br  />
 <code>00:00:00:02</code><br  />
 <code>…</code><br  />
 <code>00:00:00:29</code><br  />
 <code>00:00:01:00</code></li>
<li><a class="el" href="../../d6/d23/timecode_8h.html#ab146a6a3623deac0c116322e8e432db2a4a61de6556e4aab300186f4626abbc57" title="AJA standard notation (e.g. 01;02;03.29 .. 01;02;03;29 .. 01:02:03#58)">AJA_TIMECODE_STANDARD</a> (LFR):<br  />
 <code>00:00:00:00</code><br  />
 <code>00:00:00.00</code><br  />
 <code>00:00:00:01</code><br  />
 <code>00:00:00.01</code><br  />
 <code>00:00:00:02</code><br  />
 <code>…</code><br  />
 <code>00:00:00.29</code><br  />
 <code>00:00:01:00</code></li>
</ul>
</li>
</ul>
</li>
<li><b>HFR</b><ul>
<li>This uses the unaltered frame number in the frame field for both low and high frame rates.</li>
<li>Example: Given a 60 fps non-drop frame rate, the frame roll for frames 0, 1, 2, 3, 4, … 59, 60 are:<ul>
<li><a class="el" href="../../d6/d23/timecode_8h.html#ab146a6a3623deac0c116322e8e432db2aaf58e9db2cce50ea8c1bffd5be2bc130" title="Legacy notation (e.g. 01:02:03;29 .. 01:02:03:58)">AJA_TIMECODE_LEGACY</a> (HFR):<br  />
 <code>00:00:00:00</code><br  />
 <code>00:00:00:01</code><br  />
 <code>00:00:00:02</code><br  />
 <code>00:00:00:03</code><br  />
 <code>00:00:00:04</code><br  />
 <code>…</code><br  />
 <code>00:00:00:59</code><br  />
 <code>00:00:01:00</code></li>
<li><a class="el" href="../../d6/d23/timecode_8h.html#ab146a6a3623deac0c116322e8e432db2a4a61de6556e4aab300186f4626abbc57" title="AJA standard notation (e.g. 01;02;03.29 .. 01;02;03;29 .. 01:02:03#58)">AJA_TIMECODE_STANDARD</a> (HFR):<br  />
 <code>00:00:00#00</code><br  />
 <code>00:00:00#01</code><br  />
 <code>00:00:00#02</code><br  />
 <code>00:00:00#03</code><br  />
 <code>00:00:00#04</code><br  />
 <code>…</code><br  />
 <code>00:00:00#59</code><br  />
 <code>00:00:01#00</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><b>Delimiter</b> convention applies to the delimiter character-sets which separate fields in the timecode presentation. There are 2 types:</p><ul>
<li><a class="el" href="../../d6/d23/timecode_8h.html#ab146a6a3623deac0c116322e8e432db2aaf58e9db2cce50ea8c1bffd5be2bc130" title="Legacy notation (e.g. 01:02:03;29 .. 01:02:03:58)">AJA_TIMECODE_LEGACY</a><ul>
<li>This is the default timecode <b>Delimiter</b> convention and is widely used in legacy applications. It is not preferred because its presentation is ambiguous when converting between frame values and timecode for high frame rate video.</li>
<li>Non-Drop-frame video uses a colon (<code>":"</code>) as a delimiter between all fields (<em>hours/minutes/seconds/frames</em>).<br  />
 Example: <code>"01:02:03:04"</code></li>
<li>Drop-frame video also uses a colon (<code>":"</code>) as a delimiter between fields <em>hours/minutes/seconds</em>, except between fields <em>seconds/frames</em>, which uses a semi-colon (<code>";"</code>).<br  />
 Example: <code>"01:02:03;04"</code></li>
<li>This <b>Delimiter</b> convention is the same for both LFR and HFR <b>Frame-Count</b> conventions, which can lead to misinterpretation.</li>
</ul>
</li>
<li><a class="el" href="../../d6/d23/timecode_8h.html#ab146a6a3623deac0c116322e8e432db2a4a61de6556e4aab300186f4626abbc57" title="AJA standard notation (e.g. 01;02;03.29 .. 01;02;03;29 .. 01:02:03#58)">AJA_TIMECODE_STANDARD</a><ul>
<li><b>AJA Standard</b> presentation convention is updated and recommended for current and ongoing adoption.<ul>
<li>Timecode presentation is unambiguous when converting between frame values and timecode strings for high frame rate video.</li>
<li>Does not break existing low frame rate (LFR) timecode use cases.</li>
<li>LFR and HFR <b>Frame-Count</b> presentations are distinct and unambiguous.</li>
</ul>
</li>
<li>In both LFR and HFR presentations, the delimiter between <em>hours/minute/second</em> delimiters are the same:<ul>
<li>Colon (<code>":"</code>) for non-drop-frame timecode;</li>
<li>Semicolon (<code>";"</code>) for drop-frame timecode.</li>
</ul>
</li>
<li>LFR <b>Frame-Count</b><ul>
<li><b><em>seconds/frame</em> delimiter:</b><ul>
<li>identical to the other delimiters if the field flag is 0 (or unknown).</li>
<li>a period (<code>"."</code>) if the field flag is 1</li>
</ul>
</li>
<li>Roll Sequence Examples:<ul>
<li>Drop Frame:<br  />
 <code>01;02;03;00</code><br  />
 <code>01;02;03.00</code><br  />
 <code>01;02;03;01</code></li>
<li>Non-Drop Frame:<br  />
 <code>01:02:03:00</code><br  />
 <code>01:02:03.00</code><br  />
 <code>01:02:03:01</code></li>
</ul>
</li>
</ul>
</li>
<li>HFR <b>Frame-Count</b><ul>
<li><em>seconds/frame</em> delimiter is always a pound sign (<code>"#"</code>)</li>
<li>Roll Sequence Examples:<ul>
<li>Drop Frame:<br  />
 <code>01;02;03#58</code><br  />
 <code>01;02;03#59</code><br  />
 <code>01;02;04#00</code></li>
<li>Non-Drop Frame:<br  />
 <code>01:02:03#58</code><br  />
 <code>01:02:03#59</code><br  />
 <code>01:02:04#00</code></li>
</ul>
</li>
<li>For frame rates greater than 60, three padded zeros (<code>"000"</code>) is used for the frame count instead of two (<code>"00"</code>).<ul>
<li>Roll Sequence Examples for 120 fps drop frame:<br  />
 <code>01;02;03#099</code><br  />
 <code>01;02;03#100</code><br  />
 <code>01;02;04#101</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>• Code that looks for a colon (<code>":"</code>) or semicolon (<code>";"</code>) in the <em>seconds/frame</em> delimiter position to detect drop/non-drop will need to change, since it doesn’t work with <a class="el" href="../../d6/d23/timecode_8h.html#ab146a6a3623deac0c116322e8e432db2a4a61de6556e4aab300186f4626abbc57" title="AJA standard notation (e.g. 01;02;03.29 .. 01;02;03;29 .. 01:02:03#58)">AJA_TIMECODE_STANDARD</a>. AJA recommends using the <a class="el" href="../../d1/d32/class_a_j_a_time_code.html#abd81c9e075cecbfb19300dad4ac7d630">AJATimeCode::QueryIsDropFrame</a> method, since it supports all <b>Delimiter</b> conventions presented here. </dd>
<dd>
• For HFR, follow SMPTE ST 12-3 interpretation of the binary data; otherwise follow SMPTE ST 12-1 for LFR.</dd></dl>
<h2><a class="anchor" id="ancvpid"></a>
VPID</h2>
<p>VPID is the acronym used for <b>V</b>ideo <b>P</b>ayload <b>ID</b>entification, a four-byte ancillary data packet transmitted in the HANC region of the SDI video signal, per SMPTE standard ST352. Its packet DID is <code>0x41</code> and SDID is <code>0x01</code>.</p>
<p><b>Input / Record</b></p>
<p>On AJA devices with one or more SDI inputs (3G or faster), when a signal is present, the firmware automatically looks for and detects VPID (Video Payload IDentifier) packets on link A (and link B, if present), and stores the extracted VPID data value(s) into separate register(s), one per link.</p>
<p>There are two methods to read input VPID:</p><ul>
<li>All devices:<ul>
<li>To detect if a VPID packet was present on an SDI input’s “A” link, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#af326553ea566fe8af9054a15a2910de0">CNTV2Card::GetVPIDValidA</a>.</li>
<li>To detect if a VPID packet was present on an SDI input’s “B” link, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a0504f7098e238e25728fe166942bb26e">CNTV2Card::GetVPIDValidB</a>.</li>
<li>To get the extracted VPID payload data values, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aff902d8da48bf57b17862acbf470a1db">CNTV2Card::ReadSDIInVPID</a>.</li>
</ul>
</li>
<li>Devices that have <b>Anc Extractor</b> firmware described in <a class="el" href="../../d7/dcb/ancillarydata.html#anccapture">SDI Anc Packet Capture</a> (below) can capture the “raw” HANC VPID packet data …&#160;then decode it per SMPTE specifications.</li>
</ul>
<p>Once the 4-byte VPID value has been read, it can be decoded, per SMPTE specifications. The <a class="el" href="../../d6/d36/class_c_n_t_v2_v_p_i_d.html" title="A convenience class that simplifies encoding or decoding the 4-byte VPID payload that can be read or ...">CNTV2VPID</a> class can be used as a convenience to query all the various metadata that describes the input signal.</p>
<p><b>Output / Playback</b></p>
<p>On AJA devices with one or more SDI outputs (3G or faster), there are two VPID output payload registers for each SDI output (one for Link A, another for Link B). When the driver is running in <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ad0b318380537ba7609efe35b3dce27ea" title="Describes the task mode state. See also: Sharing AJA Devices With Other Applications.">NTV2EveryFrameTaskMode</a> <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ad0b318380537ba7609efe35b3dce27eaab88c9c725762e874d5848c45bc85118d" title="1: Standard/Retail: device configured by AJA ControlPanel, service/daemon, and driver.">NTV2_STANDARD_TASKS</a> (retail) or <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ad0b318380537ba7609efe35b3dce27eaa297897e1aceeb9f27b3cb7de8a0b588e" title="2: OEM (recommended): device configured by client application(s) with some driver involvement.">NTV2_OEM_TASKS</a>, it will automatically write the proper VPID payload value(s) into these registers when the output video standard is set. The SDI output’s Anc embedder, upon seeing a valid VPID payload in the respective payload register, will automatically insert a VPID packet in the outgoing SDI data stream.</p><ul>
<li>The most common augmentation to the output VPID is for <b>HDR signaling</b>, which can be done when setting the output FrameStore’s pixel format using <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a93397b3f49ad2dea97a8555cf15fbeaa" title="Sets the frame buffer format for the given FrameStore on the AJA device.">CNTV2Card::SetFrameBufferFormat</a> — by setting the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a9c5a795ac33800fb6560b7f9d87b4919">NTV2HDRXferChars</a>, <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a409e4a2983e283fa1c7338811f23ba9b">NTV2HDRColorimetry</a> and/or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ada3d9a4eb5e3ee4024ba297827570579">NTV2HDRLuminance</a> parameters. (Normally, those parameters default to <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a468221ee1403a1ca23d6990df9161b7ba820cdfdfe102fc2e2258131e8be0f631">NTV2_VPID_TC_SDR_TV</a>, <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ad2ba03f62db349923f530191677c6436a6f630f077101e1826dfb4f01ae727697">NTV2_VPID_Color_Rec709</a> and <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ab929cba52b9df12b8b55dcfa164dc14ba32b0c10a9bf1bc1b32b6d175ed929b69">NTV2_VPID_Luminance_YCbCr</a>, respectively.)</li>
<li>To read the output VPID payload value(s) that are currently being transmitted, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a03e9fd51538e94c4607613f4553463d5">CNTV2Card::GetSDIOutVPID</a>.</li>
<li>Note that calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aafc2677f4c52860dc67dfaa64c0060f1">CNTV2Card::SetSDIOutVPID</a> to override the default output VPID payload value(s) to be transmitted normally won’t work, because the calling application will be “fighting” with the driver as to which VPID value will actually be transmitted. In the rare case when it’s necessary to override the default output VPID payload values, …<ul>
<li>Write a non-zero value to the <a class="el" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daafaced581128d9c500870d2c3304f6cd4">kVRegDisableAutoVPID</a> virtual register (using <a class="el" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40" title="Updates or replaces all or part of the 32-bit contents of a specific register (real or virtual) on th...">CNTV2Card::WriteRegister</a>) once when your program starts.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aafc2677f4c52860dc67dfaa64c0060f1">CNTV2Card::SetSDIOutVPID</a> to set the outgoing VPID payload value as needed.<ul>
<li>Use the <a class="el" href="../../d6/d36/class_c_n_t_v2_v_p_i_d.html" title="A convenience class that simplifies encoding or decoding the 4-byte VPID payload that can be read or ...">CNTV2VPID</a> class to help set the 4-byte payload in a higher-level way.</li>
</ul>
</li>
<li><b>IMPORTANT: </b> Don’t forget to reset <a class="el" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daafaced581128d9c500870d2c3304f6cd4">kVRegDisableAutoVPID</a> to zero when your program exits.</li>
</ul>
</li>
</ul>
<hr  size="50px" />
<h2><a class="anchor" id="anccaptions"></a>
Closed-Captions</h2>
<p>Closed-captions are an important category of ancillary data. The popular captioning standards (by transport):</p>
<ul>
<li><b>Analog (SD) “Line 21”:</b><ul>
<li>US NTSC 525i: EIA-608</li>
<li>PAL 625i: Teletext OP-42</li>
</ul>
</li>
<li><b>SDI:</b> Encoded into one or more ancillary data packets, per SMPTE ST-291. There are several captioning standards that encapsulate their data into SMPTE 291 packets:<ul>
<li>U.S. NTSC CEA-608</li>
<li>U.S. NTSC CEA-708</li>
<li>Teletext OP-47</li>
<li>ARIB STD-B37</li>
<li>etc.</li>
</ul>
</li>
<li><b>TCP/IP:</b><ul>
<li>SMPTE ST 2022: Same as SDI (above) with SDI data frame encapsulated into network packet(s).</li>
<li>SMPTE ST 2110: Same as SDI (above) with SMPTE ST-291 packets encoded into separate RTP stream (separate from video and audio RTP streams).</li>
</ul>
</li>
<li><b>HDMI:</b> Only supports Open Captions (burned-in); Closed Captions not supported.</li>
</ul>
<hr  size="50px" />
<h1><a class="anchor" id="anccapture"></a>
SDI Anc Packet Capture</h1>
<p>There are two ways to capture any/all Ancillary data packets:</p><ul>
<li><b>Use Anc Extractor firmware:</b> <em>(Preferred)</em><ul>
<li>Available on most devices — check <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#ad2b63b9f62be2e9793243832e62dabdd">NTV2DeviceCanDoCustomAnc</a>.</li>
<li>Ancillary data is automatically extracted and placed into a separate area of the device frame buffer.</li>
<li>With <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> :<ul>
<li>SDK &amp; driver version 12.3 or later required.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> with the <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a17762d5a20d6047800541682dfe2cb9b" title="Use this to AutoCirculate with ancillary data.">AUTOCIRCULATE_WITH_ANC</a> option.</li>
<li>Call <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad7480e96337587fd0035a42f6d43b17d" title="Sets my ancillary data buffers for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.">AUTOCIRCULATE_TRANSFER::SetAncBuffers</a> to specify the destination host Anc buffer(s).</li>
<li>After <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> returns, parse the contents of the host Anc buffer(s).<ul>
<li><a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#aeb0590309d1c5d552b83ed20f3bc1a64">AUTOCIRCULATE_TRANSFER::GetCapturedAncByteCount</a> reports the number of bytes recorded/written into the device frame’s anc buffer region.</li>
<li>Manually parse the anc data that was recorded and transferred — see <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> (below).</li>
<li>Or use the <a class="el" href="../../index.html#ajaanc">Ancillary Data Classes</a> — call <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#a7a2f425d823df9f88934bacf2130213b" title="Returns all ancillary data packets found in the given F1 and F2 ancillary data buffers.">AJAAncillaryList::SetFromDeviceAncBuffers</a> to retrieve the <a class="el" href="../../dd/de8/class_a_j_a_ancillary_data.html" title="I am the principal class that stores a single SMPTE-291 SDI ancillary data packet OR the digitized co...">AJAAncillaryData</a> packets.</li>
<li><b>NOTE:</b> For SMPTE-2110 IP devices, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> will have automatically converted the received host ancillary data from <a class="el" href="../../d7/dcb/ancillarydata.html#ancrtpformat">RTP Anc Buffer Data Format</a> into <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> (SDK version 15.2 or later required).</li>
</ul>
</li>
</ul>
</li>
<li>Without <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> :<ul>
<li>SDK 15.0 or later required.</li>
<li>See <a class="el" href="../../d9/d07/demoapps.html#ntv2llburn">NTV2LLBurn Demo</a> for example of how to use <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a97e28e638865fb8260cd81a251fc331b" title="Initializes the given SDI input&#39;s Anc extractor for custom Anc packet detection and de-embedding....">CNTV2Card::AncExtractInit</a>, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a6f06e2df436021961ff48d810e081ad8" title="Enables or disables the given SDI input&#39;s Anc extractor. (Call NTV2DeviceCanDoCustomAnc to determine ...">CNTV2Card::AncExtractSetEnable</a>, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a90dbff7035745672b02e01388c81fb62" title="Configures the given SDI input&#39;s Anc extractor to receive the next frame&#39;s F1 Anc data....">CNTV2Card::AncExtractSetWriteParams</a>, etc.</li>
<li>After <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a2f2fc32a8fac7f8b10a7f82534f185ae" title="Transfers the contents of the ancillary data buffer(s) from a given frame on the AJA device to the ho...">CNTV2Card::DMAReadAnc</a> returns, parse the contents of the host Anc buffer(s).<ul>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a2a542594d9f6eab0ac9f94b69f7a2e06" title="Answers with the number of bytes of field 1 ANC extracted. (Call NTV2DeviceCanDoCustomAnc to determin...">CNTV2Card::AncExtractGetField1Size</a> and <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a3341ed6fb570946ef83c65f117c099a2" title="Answers with the number of bytes of field 2 ANC extracted. (Call NTV2DeviceCanDoCustomAnc to determin...">CNTV2Card::AncExtractGetField2Size</a> report the number of bytes recorded/written into the device frame’s anc buffer region for Field1 and Field2, respectively.</li>
<li>Manually parse the anc data that was recorded and transferred — see <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> (below).</li>
<li>Or use the <a class="el" href="../../index.html#ajaanc">Ancillary Data Classes</a> — call <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#a7a2f425d823df9f88934bacf2130213b" title="Returns all ancillary data packets found in the given F1 and F2 ancillary data buffers.">AJAAncillaryList::SetFromDeviceAncBuffers</a> to retrieve the <a class="el" href="../../dd/de8/class_a_j_a_ancillary_data.html" title="I am the principal class that stores a single SMPTE-291 SDI ancillary data packet OR the digitized co...">AJAAncillaryData</a> packets.</li>
<li><b>NOTE:</b> For SMPTE-2110 IP devices, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a2f2fc32a8fac7f8b10a7f82534f185ae" title="Transfers the contents of the ancillary data buffer(s) from a given frame on the AJA device to the ho...">CNTV2Card::DMAReadAnc</a> will have automatically converted the received host ancillary data from <a class="el" href="../../d7/dcb/ancillarydata.html#ancrtpformat">RTP Anc Buffer Data Format</a> into <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> (SDK version 15.2 or later required).</li>
</ul>
</li>
</ul>
</li>
<li>Each Anc Extractor is capable of filtering certain types of ancillary data packets:<ul>
<li>Upon driver startup, all Anc Extractors are configured to exclude SMPTE 299 HANC Audio and Audio Control packets. These packets will not appear in the ancillary data buffer(s).</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a14e00f2d15b60af74a7f0b1b276a62d9" title="Answers with the DIDs currently being excluded (filtered) by the SDI input&#39;s Anc extractor....">CNTV2Card::AncExtractGetFilterDIDs</a> to discover which packet DIDs are currently being excluded.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4" title="Replaces the DIDs to be excluded (filtered) by the given SDI input&#39;s Anc extractor....">CNTV2Card::AncExtractSetFilterDIDs</a> to change which packet DIDs will be excluded.</li>
<li>Use the <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#ac815846292eb113e60b58c91ffc67708" title="A set of distinct NTV2DID values.">NTV2DIDSet</a> returned from <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae76ca4fcb504c9270bef1fb64007efad">CNTV2Card::AncExtractGetDefaultDIDs</a> to restore the default packet exclusion list.</li>
</ul>
</li>
<li>The default maximum per-field ancillary data buffer capacity is 8K by default, or 16K per-frame, including overhead. Please <a href="https://sdksupport.aja.com/">submit a Ticket</a> if you need to change this.</li>
</ul>
</li>
<li><b>Use VANC frame geometry</b> <em>(for older AJA devices)</em><ul>
<li>4K/UHD or larger rasters (i.e. <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a8348e43b54cd91f6eb337019abde54af" title="Identifies a particular video frame geometry.">NTV2FrameGeometry</a> ≥ <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a8348e43b54cd91f6eb337019abde54afa6619f37ff724bdb25e1cca75c49b258f" title="3840x2160, for UHD, NTV2_VANCMODE_OFF">NTV2_FG_4x1920x1080</a>) aren’t supported, and likely never will be.</li>
<li>Only <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161ca13b435896fd9f2d750c79f557bd857cb" title="See 10-Bit YCbCr Format.">NTV2_FBF_10BIT_YCBCR</a> and <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161cac989c7bd68d50e0c9f70661fc05c787a" title="See 8-Bit YCbCr Format.">NTV2_FBF_8BIT_YCBCR</a> buffer formats are officially supported. Others may work, but are untested.</li>
<li>Signal paths involving CSCs/LUTs between the SDI input and the Frame Store may corrupt the VANC data.</li>
<li>HANC is (obviously) not available in the frame buffer.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abbb0a91d16cddb3fc10a5d867f92e582" title="Sets the VANC mode for the given FrameStore.">CNTV2Card::SetVANCMode</a> to enable the “tall” or “taller” frame geometry.</li>
<li>See <a class="el" href="../../d7/dcb/ancillarydata.html#vancframegeometries">VANC Frame Geometries</a> (below) for details on the locations of the SMPTE VANC lines in the frame buffer.</li>
<li>After the frame has been transferred to the host, to obtain the ancillary data:<ul>
<li>Parse the VANC lines in the host frame buffer manually, or…</li>
<li>Use <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#a8f2acdcaa396cb052012fb2354d44b5b" title="Returns all packets found in the VANC lines of the given NTV2 frame buffer.">AJAAncillaryList::SetFromVANCData</a> to obtain a list of <a class="el" href="../../dd/de8/class_a_j_a_ancillary_data.html" title="I am the principal class that stores a single SMPTE-291 SDI ancillary data packet OR the digitized co...">AJAAncillaryData</a> packets found in the frame buffer.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><b>TIP:</b> The <a class="el" href="../../db/d02/toolsandutilities.html#usingntv2watcher">“NTV2Watcher”</a> tool’s <a class="el" href="../../db/d02/toolsandutilities.html#inspectoranc">Ancillary Data Inspector</a> is useful for diagnosing issues with ancillary data capture.</p>
<h2><a class="anchor" id="anccapture-filter"></a>
Ancillary Packet Filtering</h2>
<p>For devices that support custom Anc capture, each SDI input has an “Anc Extractor” widget associated with it. Each of these widgets have a filter that can exclude unwanted packets based on a packet’s Data IDentifier (DID). Each filter is configured using five 32-bit registers, each register accommodating four DID byte values, resulting in the ability to filter (exclude) up to 20 different types of packets.</p><ul>
<li>A non-zero byte value in a filter register will cause the Extractor to skip packets whose DID matches that byte value.</li>
<li>A zero byte value is always ignored by the Extractor.</li>
<li>It is not an error to have the same DID in multiple byte positions in the filter registers.</li>
</ul>
<p>By default, the SDI input’s Anc extractor widget is configured when <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> (or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a97e28e638865fb8260cd81a251fc331b" title="Initializes the given SDI input&#39;s Anc extractor for custom Anc packet detection and de-embedding....">CNTV2Card::AncExtractInit</a>) are called, and will automatically exclude a default set of packet types. For example, VPID, VITC/ATC, audio control and audio packets are filtered by default, because existing device firmware automatically handles audio, timecode and VPID, making such data available by way of other high-level API calls.</p>
<p>But what if, for example, you need to parse the raw data that’s inside SMPTE 299M audio packets?</p>
<p><b>Disabling All Filtering</b></p>
<p>To disable all filtering of incoming ancillary data packets, pass an empty NTV2DIDSet to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4" title="Replaces the DIDs to be excluded (filtered) by the given SDI input&#39;s Anc extractor....">CNTV2Card::AncExtractSetFilterDIDs</a>. </p><div class="fragment"><div class="line"><a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a> device;</div>
<div class="line">. . .</div>
<div class="line">const <a class="code" href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a> sdiInput(<a class="code" href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a>(::<a class="code" href="../../d0/d81/ntv2utils_8h.html#a5e144bb8353e29ca6e9e24c5728e07df">GetIndexForNTV2InputSource</a>(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#ac5dbe58ce5dcc94682e0012abc6124f1a703adbb510b0143ec922f8d7c2f02b40">NTV2_INPUTSOURCE_SDI1</a>)));</div>
<div class="line">device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4">AncExtractSetFilterDIDs</a>(sdiInput, <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#ac815846292eb113e60b58c91ffc67708">NTV2DIDSet</a>());   <span class="comment">// Disable all filtering</span></div>
</div><!-- fragment --><p>For SDKs prior to version 13.0, pass zero to <a class="el" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40" title="Updates or replaces all or part of the 32-bit contents of a specific register (real or virtual) on th...">CNTV2Card::WriteRegister</a> for each filter register for the Anc extractor associated with the SDI input of interest:</p><ul>
<li>SDI In 1: registers 4108-4112 (inclusive)</li>
<li>SDI In 2: registers 4172-4176 (inclusive)</li>
<li>SDI In 3: registers 4236-4240 (inclusive)</li>
<li>SDI In 4: registers 4300-4304 (inclusive)</li>
<li>SDI In 5: registers 4364-4368 (inclusive)</li>
<li>SDI In 6: registers 4428-4432 (inclusive)</li>
<li>SDI In 7: registers 4492-4496 (inclusive)</li>
<li>SDI In 8: registers 4556-4560 (inclusive)</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Changing packet filtering takes effect at the next captured frame.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Disabling packet filtering can result in an extraordinary amount of captured ancillary data.</dd></dl>
<p><b>Filtering Specific Packet Types</b></p>
<p>To exclude packets having specific DIDs, build an NTV2DIDSet that contains the packet DIDs you wish to exclude, then pass the set to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4" title="Replaces the DIDs to be excluded (filtered) by the given SDI input&#39;s Anc extractor....">CNTV2Card::AncExtractSetFilterDIDs</a>. <small>For SDKs prior to version 13.0, pack up to four DIDs to be excluded into a 4-byte longword, and write the longword (using <a class="el" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40" title="Updates or replaces all or part of the 32-bit contents of a specific register (real or virtual) on th...">CNTV2Card::WriteRegister</a>) into one of the filter registers associated with the SDI input of interest (see above list).</small></p>
<p><b>Restoring Default Filtering</b></p>
<p>You can also reset the ANC filtering to the default filter set: </p><div class="fragment"><div class="line"><a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a> device;</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a> sdiInput(<a class="code" href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a>(::<a class="code" href="../../d0/d81/ntv2utils_8h.html#a5e144bb8353e29ca6e9e24c5728e07df">GetIndexForNTV2InputSource</a>(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#ac5dbe58ce5dcc94682e0012abc6124f1a703adbb510b0143ec922f8d7c2f02b40">NTV2_INPUTSOURCE_SDI1</a>)));</div>
<div class="line">. . .</div>
<div class="line">NTV2VideoFormat vfmt(device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#acf904ffdd4a560917801add2008528f3">GetInputVideoFormat</a>(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#ac5dbe58ce5dcc94682e0012abc6124f1a703adbb510b0143ec922f8d7c2f02b40">NTV2_INPUTSOURCE_SDI1</a>));</div>
<div class="line">device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4">AncExtractSetFilterDIDs</a>(sdiInput, AncExtractGetDefaultDIDs(!<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a94307368613c9c9415caae6a06a8caf6">NTV2_IS_SD_VIDEO_FORMAT</a>(vfmt)));   <span class="comment">// Reset anc filtering to default</span></div>
</div><!-- fragment --><p><small>For SDKs prior to version 13.0, you must copy the default filter register values at startup (using <a class="el" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266" title="Reads all or part of the 32-bit contents of a specific register (real or virtual) on the AJA device....">CNTV2Card::ReadRegister</a>) to local variables, then restore them afterward (using <a class="el" href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40" title="Updates or replaces all or part of the 32-bit contents of a specific register (real or virtual) on th...">CNTV2Card::WriteRegister</a>) later. Use the registers that are associated with the SDI input of interest.</small></p>
<p>It’s a good practice to save the existing filter settings, change them to what’s needed for whatever processing is necessary, and then restore them afterward: </p><div class="fragment"><div class="line"><a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a> device;</div>
<div class="line">. . .</div>
<div class="line">const <a class="code" href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a> sdiInput(<a class="code" href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a>(::<a class="code" href="../../d0/d81/ntv2utils_8h.html#a5e144bb8353e29ca6e9e24c5728e07df">GetIndexForNTV2InputSource</a>(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#ac5dbe58ce5dcc94682e0012abc6124f1a703adbb510b0143ec922f8d7c2f02b40">NTV2_INPUTSOURCE_SDI1</a>)));</div>
<div class="line"><a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#ac815846292eb113e60b58c91ffc67708">NTV2DIDSet</a>  savedDIDs;</div>
<div class="line">device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a14e00f2d15b60af74a7f0b1b276a62d9">AncExtractGetFilterDIDs</a>(sdiInput, savedDIDs);   <span class="comment">// Save current anc filter (so it can be restored later)</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Change the anc filter to include some audio packets...</span></div>
<div class="line">    <a class="code" href="../../d4/dd7/ntv2publicinterface_8h.html#ac815846292eb113e60b58c91ffc67708">NTV2DIDSet</a> dids;</div>
<div class="line">    dids.insert(0xA0);   <span class="comment">// 3G audio group 8 control</span></div>
<div class="line">    dids.insert(0xA1);   <span class="comment">// 3G audio group 7 control</span></div>
<div class="line">    dids.insert(0xA4);   <span class="comment">// 3G audio group 8 data</span></div>
<div class="line">    dids.insert(0xA5);   <span class="comment">// 3G audio group 7 data</span></div>
<div class="line">    device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4">AncExtractSetFilterDIDs</a>(sdiInput, dids);   <span class="comment">// Set new anc filtering</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">//  . . . do other processing . . .</span></div>
<div class="line">}</div>
<div class="line">device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4">AncExtractSetFilterDIDs</a>(sdiInput, savedDIDs);   <span class="comment">// Restore prior anc filtering</span></div>
</div><!-- fragment --><h2><a class="anchor" id="anccapture-dataspace"></a>
Ancillary Data Space Limitations</h2>
<p>Rarely does the ancillary data transmitted with a field of video exceed 5KB (or 10KB for a frame of interlaced video) … but it’s possible. If your application must accommodate more than 72KB of ancillary data, you’ll need to enlarge the driver’s ancillary data region.</p>
<p>The NTV2 driver uses two virtual registers (<a class="el" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daa74a89fcace7d6a8fb30c2e422a4a03d0" title="Anc Field1 byte offset from end of frame buffer (GUMP on all boards except RTP for SMPTE2022/IP)">kVRegAncField1Offset</a> and <a class="el" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daa8e80551da948f37f4a71a3cbdb6ac398" title="Anc Field2 byte offset from end of frame buffer (GUMP on all boards except RTP for SMPTE2022/IP)">kVRegAncField2Offset</a>) to control where the Anc Extractors start writing extracted packet data into (current) frame memory. When the driver starts up, it’s configured to use 0x12000 bytes (~72k) of space per field at the very bottom of each 8MB/16MB/… frame on the device (depending on video format and pixel format).</p>
<p>If you know the largest byte count you’ll encounter for each field, add some padding, then call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a4c10417d7698ca8921accace4c17d8ab" title="Sets the capacity of the SDI ANC or HDMI AUX buffers in device frame memory. (Call NTV2DeviceCanDoCus...">CNTV2Card::AncSetFrameBufferSize</a> with those values. <small>For SDKs prior to version 13.0, write the Field 2 maximum byte count to the <a class="el" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daa8e80551da948f37f4a71a3cbdb6ac398" title="Anc Field2 byte offset from end of frame buffer (GUMP on all boards except RTP for SMPTE2022/IP)">kVRegAncField2Offset</a> register, then set the <a class="el" href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daa74a89fcace7d6a8fb30c2e422a4a03d0" title="Anc Field1 byte offset from end of frame buffer (GUMP on all boards except RTP for SMPTE2022/IP)">kVRegAncField1Offset</a> register to the sum of both byte counts.</small></p>
<dl class="section warning"><dt>Warning</dt><dd>Itʼs possible to reserve a very large ancillary data space that actually runs into the video in the frame buffer.</dd></dl>
<p>To programmatically check if the Anc space intersects video in the frame buffer: </p><div class="fragment"><div class="line"><a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a> device;</div>
<div class="line">. . .</div>
<div class="line">ULWord byteOffset(0), byteCount(0);</div>
<div class="line"><a class="code" href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161c">NTV2PixelFormat</a> pixelFormat;</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a8f85ca8efb8928620e1fbb6282a5e686">NTV2VideoFormat</a> vidFormat(device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#acf904ffdd4a560917801add2008528f3">GetInputVideoFormat</a>(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#ac5dbe58ce5dcc94682e0012abc6124f1a703adbb510b0143ec922f8d7c2f02b40">NTV2_INPUTSOURCE_SDI1</a>));</div>
<div class="line">device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a197831a736299e2c68e3f7f0f860387f">GetFrameBufferFormat</a>(<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>, pixelFormat);</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="../../d3/d4e/class_n_t_v2_format_descriptor.html">NTV2FormatDescriptor</a> fd(vidFormat, pixelFormat);</div>
<div class="line">device.<a class="code" href="../../d7/dfb/class_c_n_t_v2_card.html#a0ed71a238a94d5d4ed394510a033685d">GetAncRegionOffsetAndSize</a>(byteOffset, byteCount, <a class="code" href="../../d6/d0c/ntv2enums_8h.html#a6eef35b2db2fa26fa13a3850c964fdeeadea059bd088f62d28087e81d9bb6be77">NTV2_AncRgn_All</a>);</div>
<div class="line"><span class="keywordflow">if</span> (fd.GetTotalBytes() &gt; byteOffset)</div>
<div class="line">    FAIL(<span class="stringliteral">&quot;Anc in video!&quot;</span>);</div>
</div><!-- fragment --><p><b>Maximizing Ancillary Data Capture Capacity</b></p>
<ol type="1">
<li>Determine the largest raster your application is expected to handle.</li>
<li>Determine the most “expensive” (in terms of memory) <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a80edd7ce906ff76d34d139d3b3dbf5f4" title="An alias for NTV2FrameBufferFormat.">NTV2PixelFormat</a> your application will need to use.</li>
<li>Determine the “intrinsic” device frame buffer size that will be used for the video format and frame buffer format (8MB/16MB/etc.).</li>
<li>Calculate the maximum available space for ancillary data in the device frame buffer. This is the distance, in bytes, from just past the last line of the raster to the bottom of the device frame buffer.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a4c10417d7698ca8921accace4c17d8ab" title="Sets the capacity of the SDI ANC or HDMI AUX buffers in device frame memory. (Call NTV2DeviceCanDoCus...">CNTV2Card::AncSetFrameBufferSize</a>, passing half the byte distance to each of the two parameters.</li>
</ol>
<p>For example, 1080i video with a 10-bit YCbCr frame buffer format (without a “tall” or “taller” VANC geometry) is easily handled by an 8MB device frame buffer. The 1920x1080 raster requires the top 5,529,600 bytes of the device frame buffer, which leaves 2,859,008 bytes of space for ancillary data. If a 16MB frame buffer is used (see <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a998851c3c5b48e295cd13ae285693b20" title="Sets the device&#39;s intrinsic frame buffer size.">CNTV2Card::SetFrameBufferSize</a>), the maximum possible anc space jumps to 11,247,616 bytes — a <em>LOT</em> of space!</p>
<p>The <a class="el" href="../../db/d02/toolsandutilities.html#inspectorframebuffer">Frame Buffer Inspector</a> of <a class="el" href="../../db/d02/toolsandutilities.html#usingntv2watcher">“NTV2Watcher”</a> readily illustrates how this works.</p><ol type="1">
<li>Set it to the <b>Raw</b> view mode.</li>
<li>Change the units used for the vertical ruler to <b>Bytes From Top</b>.</li>
<li>Change the units used for the horizontal ruler to <b>Bytes From Left Edge</b>.</li>
<li>Scroll down to the end of active video (EAV). This is where a noticeable boundary between illuminated and dimmed values indicate where changing pixel data ends. That offset – 0x00546000 – is the first safe (unchanging) byte of available ancillary buffer space. <div class="image">
<img src="../../watcher-inspector-fb-eav.png" alt=""/>
</div>
</li>
<li>Scroll down further until the data is displayed in a yellow color. That is the ancillary data region. <div class="image">
<img src="../../watcher-inspector-fb-ancrgn.png" alt=""/>
</div>
</li>
</ol>
<hr  size="50px" />
<h1><a class="anchor" id="ancplayout"></a>
SDI Anc Packet Playout</h1>
<p>There are two ways to play out custom Ancillary data packets:</p><ul>
<li><b>Use Anc Inserter firmware:</b> <em>(Preferred)</em><ul>
<li>Available on most devices — check <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#ad2b63b9f62be2e9793243832e62dabdd">NTV2DeviceCanDoCustomAnc</a>.</li>
<li>Ancillary data packets are automatically inserted into the outgoing video stream when they’ve been properly formatted and placed into a separate area of the device frame buffer.</li>
<li>Cannot output HANC (sorry).</li>
<li>With <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> :<ul>
<li>SDK &amp; driver version 12.3 or later required.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> with the <a class="el" href="../../d4/dd7/ntv2publicinterface_8h.html#a17762d5a20d6047800541682dfe2cb9b" title="Use this to AutoCirculate with ancillary data.">AUTOCIRCULATE_WITH_ANC</a> option.</li>
<li>Call <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad7480e96337587fd0035a42f6d43b17d" title="Sets my ancillary data buffers for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.">AUTOCIRCULATE_TRANSFER::SetAncBuffers</a> to specify the source host Anc buffer(s).</li>
<li>Before calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>, set the contents of the host Anc buffer(s)…<ul>
<li>Manually write the data — see <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> (below).</li>
<li>Or use the <a class="el" href="../../index.html#ajaanc">Ancillary Data Classes</a> — call <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#ade6529f821c169268c0a45ec28ac37f3" title="Encodes my AJAAncillaryData packets into the given buffers in the default SDI Anc Buffer Data Format ...">AJAAncillaryList::GetTransmitData</a>.</li>
<li>For SMPTE-2110 IP devices, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> will automatically convert the data from <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> into <a class="el" href="../../d7/dcb/ancillarydata.html#ancrtpformat">RTP Anc Buffer Data Format</a> (SDK version 15.2 or later required).</li>
</ul>
</li>
</ul>
</li>
<li>Without <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> :<ul>
<li>SDK 15.0 or later required.</li>
<li>See <a class="el" href="../../d9/d07/demoapps.html#ntv2llburn">NTV2LLBurn Demo</a> for example of how to use <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aaefa8ad8ba55f3e92ce30c8f988674dd" title="Initializes the given SDI output&#39;s Anc inserter for custom Anc packet insertion. (Call NTV2DeviceCanD...">CNTV2Card::AncInsertInit</a>, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ac1eb9ef11a358963e6c5fb5ba8ce3f5e" title="Enables or disables the given SDI output&#39;s Anc inserter frame buffer reads. (Call NTV2DeviceCanDoCust...">CNTV2Card::AncInsertSetEnable</a>, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ab48397d706cb0a57134eb0279e6a6bb4" title="Configures the Anc inserter for the next frame&#39;s F1 Anc data to embed/transmit. (Call NTV2DeviceCanDo...">CNTV2Card::AncInsertSetReadParams</a>, etc.</li>
<li>Before calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a3a2464a509352ee85f9a6f393dbd09b2" title="Transfers the contents of the ancillary data buffer(s) from the host to a given frame on the AJA devi...">CNTV2Card::DMAWriteAnc</a>, set the contents of the host Anc buffer(s)…<ul>
<li>Manually write the data — see <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> (below).</li>
<li>Or use the <a class="el" href="../../index.html#ajaanc">Ancillary Data Classes</a> to put together an <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a> of packets to send — then call <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#ade6529f821c169268c0a45ec28ac37f3" title="Encodes my AJAAncillaryData packets into the given buffers in the default SDI Anc Buffer Data Format ...">AJAAncillaryList::GetTransmitData</a>.</li>
<li>For SMPTE-2110 IP devices, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a3a2464a509352ee85f9a6f393dbd09b2" title="Transfers the contents of the ancillary data buffer(s) from the host to a given frame on the AJA devi...">CNTV2Card::DMAWriteAnc</a> will automatically convert the data from <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> into <a class="el" href="../../d7/dcb/ancillarydata.html#ancrtpformat">RTP Anc Buffer Data Format</a> (SDK version 15.2 or later required) immediately prior to the actual transfer.</li>
</ul>
</li>
</ul>
</li>
<li>On SDI devices and SMPTE 2022 firmware on IP devices, the parity bits for outgoing 10-bit UDWs are automatically recalculated by the Anc inserter, after reading the 8-bit UDWs out of the Anc Buffer, while embedding the packet data into the outgoing SDI data stream.</li>
<li>Default per-field ancillary data buffer capacity is 8K by default, or 16K per-frame, including overhead. Please <a href="https://sdksupport.aja.com/">submit a Ticket</a> if you need to change this.</li>
</ul>
</li>
<li><b>Use VANC frame geometry</b> <em>(for older AJA devices)</em><ul>
<li>4K/UHD or larger rasters (i.e. <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a8348e43b54cd91f6eb337019abde54af" title="Identifies a particular video frame geometry.">NTV2FrameGeometry</a> ≥ <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a8348e43b54cd91f6eb337019abde54afa6619f37ff724bdb25e1cca75c49b258f" title="3840x2160, for UHD, NTV2_VANCMODE_OFF">NTV2_FG_4x1920x1080</a>) aren’t supported, and likely never will be.</li>
<li>Only <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161ca13b435896fd9f2d750c79f557bd857cb" title="See 10-Bit YCbCr Format.">NTV2_FBF_10BIT_YCBCR</a> or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161cac989c7bd68d50e0c9f70661fc05c787a" title="See 8-Bit YCbCr Format.">NTV2_FBF_8BIT_YCBCR</a> buffer formats are officially supported. Others may work, but are untested.</li>
<li>Signal paths involving CSCs/LUTs between the Frame Store and the SDI output may corrupt the VANC data.</li>
<li>HANC obviously cannot be supported.</li>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abbb0a91d16cddb3fc10a5d867f92e582" title="Sets the VANC mode for the given FrameStore.">CNTV2Card::SetVANCMode</a> to enable the “tall” or “taller” frame geometry.</li>
<li>See <a class="el" href="../../d7/dcb/ancillarydata.html#vancframegeometries">VANC Frame Geometries</a> (below) for details on the locations of the SMPTE VANC lines in the frame buffer.</li>
<li>Before transferring the frame to the device, set the contents of the VANC line(s)…<ul>
<li>If desired, use the <a class="el" href="../../index.html#ajaanc">Ancillary Data Classes</a> — call <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#ac9c958fadc9c5a38ac4eca38e4095625" title="Writes my AJAAncillaryData objects into the given tall/taller frame buffer having the given raster/fo...">AJAAncillaryList::GetVANCTransmitData</a>.</li>
<li><b>CAUTION:</b> The device will transmit whatever Y/Cb/Cr values are in the VANC region of the buffer unfiltered, <em>including illegal values</em>, which can cause sync issues in downstream equipment. Be sure all values stored in the VANC lines are legal SMPTE.</li>
</ul>
</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Because the outgoing line number can be specified when using the <b>Anc Inserter</b>, it's possible to overrun a line. Be certain that the data packets to be inserted on a given line will fit for the output video standard.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>AJA strongly recommends NOT playing <b><em>verbatim</em></b> the same ancillary data packets captured by a firmware Anc Extractor through a firmware Anc Inserter. There are several reasons for this, and moreso if the output video format differs from the input format:<ul>
<li>Packets that are ordinarily embedded in output SDI automatically by the hardware (e.g. audio, ATC, VPID, EDH, etc.) should be filtered out. The <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#af617600be13b1cfe534894babfb3d7d1" title="Copies GUMP from inSrc to outDst buffers, but removes ATC, VPID, VITC, EDH &amp; raw/analog packets.">AJAAncillaryList::StripNativeInserterGUMPPackets</a> function can do this.</li>
<li>HANC packets should be excluded (removed), since the Anc Inserters on most AJA devices are not designed to insert them, and aren’t expecting them.</li>
<li>Some packet types may be irrelevant or not recommended for certain output video formats;<ul>
<li>e.g. packets that specifically are intended for Field 2 of interlaced video should be excluded from insertion into progressive video.</li>
</ul>
</li>
<li>Some packet types may require their payload data to change (e.g. if the output’s frame rate differs from the input’s).</li>
<li>Some packets may need to be inserted on a different line.</li>
</ul>
</dd></dl>
<p><b>TIP:</b> The <a class="el" href="../../db/d02/toolsandutilities.html#usingntv2watcher">“NTV2Watcher”</a> tool’s <a class="el" href="../../db/d02/toolsandutilities.html#inspectoranc">Ancillary Data Inspector</a> is useful for diagnosing issues with ancillary data playout.</p>
<hr  size="50px" />
<h1><a class="anchor" id="ancbufferformats"></a>
Anc Buffer Data Formats</h1>
<p>This section details the format of the data in the ancillary data buffers.</p>
<h2><a class="anchor" id="ancgumpformat"></a>
SDI Anc Buffer Data Format</h2>
<p>This is the default format in the host ancillary data buffers. The data bytes in the ancillary data buffer consist of one or more packets having the following format:</p>
<div class="image">
<img src="../../sdi_anc_pkt_fmt.png" alt=""/>
</div>
<dl class="section note"><dt>Note</dt><dd>While the first byte of each packet is set to <code>0xFF</code>, this is not a protected value, and can legally occur within packet data. Software parsers must use the packet Data Count (<b>DC</b>) value to determine the length of each packet.</dd></dl>
<p>For <b>Capture</b>:</p><ul>
<li>Clients can parse the data themselves, using the above specification.</li>
<li><a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#a7a2f425d823df9f88934bacf2130213b" title="Returns all ancillary data packets found in the given F1 and F2 ancillary data buffers.">AJAAncillaryList::SetFromDeviceAncBuffers</a> can be called to transform the buffer contents into an <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a> containing one <a class="el" href="../../dd/de8/class_a_j_a_ancillary_data.html" title="I am the principal class that stores a single SMPTE-291 SDI ancillary data packet OR the digitized co...">AJAAncillaryData</a> instance per packet.</li>
</ul>
<p>For <b>Playout</b>:</p><ul>
<li>Clients can write the data themselves per the above specification.</li>
<li><a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#ade6529f821c169268c0a45ec28ac37f3" title="Encodes my AJAAncillaryData packets into the given buffers in the default SDI Anc Buffer Data Format ...">AJAAncillaryList::GetTransmitData</a> can be called to fill your Anc playout buffers from an <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a>.<ul>
<li>If using <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> , these buffers can be transferred to the AJA device by first calling <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad7480e96337587fd0035a42f6d43b17d" title="Sets my ancillary data buffers for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.">AUTOCIRCULATE_TRANSFER::SetAncBuffers</a> , then calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>.</li>
<li>If not using AutoCirculate, the buffers can be transferred to the AJA device using <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a3a2464a509352ee85f9a6f393dbd09b2" title="Transfers the contents of the ancillary data buffer(s) from the host to a given frame on the AJA devi...">CNTV2Card::DMAWriteAnc</a>.</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>During <b>Playout</b>, the packet checksums in the device ancillary data buffer are ignored. The Anc inserter/embedder firmware automatically recalculates each packet’s checksum as it enters the outgoing SDI stream.</dd></dl>
<hr  size="50px" />
<h2><a class="anchor" id="ancrtpformat"></a>
RTP Anc Buffer Data Format</h2>
<p>The data in the ancillary data buffer, except where noted (below), matches the RTP specification documented in <a href="https://tools.ietf.org/html/draft-ietf-payload-rtp-ancillary-14" target="_blank">SMPTE ST 291-1</a>:</p>
<div class="image">
<img src="../../fbf-rtp.png" alt=""/>
</div>
<p>For <b>Capture</b>:</p><ul>
<li>Clients can parse the data themselves, using the above specification.</li>
<li><a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#a7a2f425d823df9f88934bacf2130213b" title="Returns all ancillary data packets found in the given F1 and F2 ancillary data buffers.">AJAAncillaryList::SetFromDeviceAncBuffers</a> can be called to transform the buffer contents into an <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a> containing one <a class="el" href="../../dd/de8/class_a_j_a_ancillary_data.html" title="I am the principal class that stores a single SMPTE-291 SDI ancillary data packet OR the digitized co...">AJAAncillaryData</a> instance per packet.</li>
</ul>
<p>For <b>Playout</b>:</p><ul>
<li>Clients can write the data themselves per the RTP specification.<ul>
<li>Clients that generate the Anc data buffer contents themselves must set the <b>Sequence Number</b> field in the first longword of the RTP packet header to the total RTP packet bytecount, since AJA IP devices running 2110 firmware (<a class="el" href="../../d0/d53/ntv2devices.html#konaip">KONA IP</a> and <a class="el" href="../../d0/d53/ntv2devices.html#ioip">Io IP</a>) expect it there.</li>
</ul>
</li>
<li><a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#ade6529f821c169268c0a45ec28ac37f3" title="Encodes my AJAAncillaryData packets into the given buffers in the default SDI Anc Buffer Data Format ...">AJAAncillaryList::GetTransmitData</a> can be called to fill the host Anc data buffers from an <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a>.<ul>
<li>If using <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a> , these buffers can be transferred to the AJA device by first calling <a class="el" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad7480e96337587fd0035a42f6d43b17d" title="Sets my ancillary data buffers for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.">AUTOCIRCULATE_TRANSFER::SetAncBuffers</a> , then calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>.</li>
<li>If not using AutoCirculate, the buffers can be transferred to the AJA device using <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a3a2464a509352ee85f9a6f393dbd09b2" title="Transfers the contents of the ancillary data buffer(s) from the host to a given frame on the AJA devi...">CNTV2Card::DMAWriteAnc</a>.</li>
<li>Either way, the <a class="el" href="../../d7/dcb/ancillarydata.html#ancgumpformat">SDI Anc Buffer Data Format</a> will be automatically converted to <a class="el" href="../../d7/dcb/ancillarydata.html#ancrtpformat">RTP Anc Buffer Data Format</a> expected by the device before the DMA transfer.</li>
</ul>
</li>
</ul>
<hr  size="50px" />
<h1><a class="anchor" id="vancframegeometries"></a>
VANC Frame Geometries</h1>
<p>The older way of extracting or inserting ancillary data (VANC only) employs alternate frame geometries that have additional lines at the top of the video frame buffer. To enable VANC capture/playout, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a2b2bacb1279e9057d723cc8922012210">CNTV2Card::SetEnableVANCData</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abbb0a91d16cddb3fc10a5d867f92e582" title="Sets the VANC mode for the given FrameStore.">CNTV2Card::SetVANCMode</a>.</p>
<p>For historical reasons, there are both "tall" and "taller" geometries. The taller ones grab some extra lines that used to be omitted, but which turned out to contain useful information after all.</p>
<p>Note that using a VANC-enabled frame geometry will increase the size, in bytes, of the requisite host frame buffer versus the equivalent non-VANC geometry. Use <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a2b2bd4f5a6b60b21e8b2ba87680eb27e" title="Answers with the frame size currently being used on the device.">CNTV2Card::GetFrameBufferSize</a> function to determine how large the host frame buffer should be.</p>
<p>There are some considerations on which frame buffer formats should be used for capture or playout with VANC:</p><ul>
<li><a class="el" href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161cac989c7bd68d50e0c9f70661fc05c787a" title="See 8-Bit YCbCr Format.">NTV2_FBF_8BIT_YCBCR</a> — This is the easiest format to use, but there’s a catch. Ordinarily, the least-significant 2 bits of 10-bit YCbCr pixel data are discarded when filling the 8-bit pixel data words in the frame buffer (in capture mode). This is fatal to ancillary data in the VANC lines, because per SMPTE ST-291, the <b><em>most</em></b>-significant 2 bits of the 10-bit data word can be dropped/ignored, <b><em>not</em></b> the least-significant 2 bits. Fortunately, the AJA device firmware can be told to store the LS 8 bits of each 10-bit word in the VANC area during capture (or left-shift by 2 bits during playout) by calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a7599cff630fc737368608cd795be2949" title="Enables or disables the &quot;VANC Shift Mode&quot; feature for the given channel.">CNTV2Card::SetVANCShiftMode</a>. Thus, when a frame is captured using <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a52ef2da10fd05237b9da320e75888ae8a14ab6514015e46fc5db9a54d751bb2be">NTV2_VANCDATA_8BITSHIFT_ENABLE</a> mode, VANC lines can be easily parsed into Ancillary packets. <dl class="section note"><dt>Note</dt><dd><a class="el" href="../../d6/d0c/ntv2enums_8h.html#a52ef2da10fd05237b9da320e75888ae8a14ab6514015e46fc5db9a54d751bb2be">NTV2_VANCDATA_8BITSHIFT_ENABLE</a> mode is not implemented for SD 525i/625i video formats. This is due to historical reasons, since back when HD was introduced, SD typically carried ancillary data in other ways (e.g. line 21 for captions).</dd></dl>
</li>
<li><a class="el" href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161ca13b435896fd9f2d750c79f557bd857cb" title="See 10-Bit YCbCr Format.">NTV2_FBF_10BIT_YCBCR</a> — With 10-bit YCbCr, ancillary data packets can be read/written from/to the VANC lines, but the scanning process is more difficult, due to the packing of 10-bit words in the frame buffer.</li>
<li>Dual-link RGB video to/from YCbCr frame buffers generally won't work because the VANC data gets corrupted by the color-space converters. However, dual-link RGB video to/from RGB frame buffers (directly from/to the SDI spigots) will work.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Mixer/Keyer widgets on newer devices (generally, those that support <a class="el" href="../../dd/d0f/ntv2devicefeatures_8hpp.html#ad2b63b9f62be2e9793243832e62dabdd">NTV2DeviceCanDoCustomAnc</a>) will pass VANC. Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a490f7d16c35dba3c96ca1b4ec229bc34" title="Answers whether or not the VANC source for the given mixer/keyer is currently the foreground video....">CNTV2Card::GetMixerVancOutputFromForeground</a> to determine if the Mixer is configured to pass foreground or background VANC. Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a4f22ea33559ed11d4bb9ae0a2a186792" title="Sets the VANC source for the given mixer/keyer to the foreground video (or not). See the SDI Ancillar...">CNTV2Card::SetMixerVancOutputFromForeground</a> to change the setting.</dd></dl>
<p>To <b>Capture</b> custom ancillary data packets using VANC lines in the frame buffer:</p><ul>
<li><a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#a8f2acdcaa396cb052012fb2354d44b5b" title="Returns all packets found in the VANC lines of the given NTV2 frame buffer.">AJAAncillaryList::SetFromVANCData</a> (SDKs 14.1 and later) can be called to obtain an <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a> containing one <a class="el" href="../../dd/de8/class_a_j_a_ancillary_data.html" title="I am the principal class that stores a single SMPTE-291 SDI ancillary data packet OR the digitized co...">AJAAncillaryData</a> instance per packet.</li>
<li>The <a class="el" href="../../db/dc3/class_c_n_t_v2_s_m_p_t_e_anc_data.html">CNTV2SMPTEAncData</a> class in the <a class="el" href="../../index.html#ajacc">“libajacc” Closed-Caption Library</a> has some functions (e.g., <a class="el" href="../../db/dc3/class_c_n_t_v2_s_m_p_t_e_anc_data.html#a1fb9d2efccf0f46fef7435c91add5d31" title="Searches for ancillary data in a given host frame buffer.">CNTV2SMPTEAncData::FindAnc</a>) to help with the parsing, though SD video formats aren’t supported (again, due to historical reasons).</li>
<li>Write your own functions to parse the frame buffer VANC lines.</li>
</ul>
<p>To <b>Playout</b> custom ancillary data packets using VANC lines in the frame buffer:</p><ul>
<li>Given an <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html" title="I am an ordered collection of AJAAncillaryData instances which represent one or more SMPTE 291 data p...">AJAAncillaryList</a> of packets, call <a class="el" href="../../d8/def/class_a_j_a_ancillary_list.html#ac9c958fadc9c5a38ac4eca38e4095625" title="Writes my AJAAncillaryData objects into the given tall/taller frame buffer having the given raster/fo...">AJAAncillaryList::GetVANCTransmitData</a> (SDKs 14.1 and later) to write the packets into a frame buffer’s VANC region.</li>
<li>The <a class="el" href="../../db/dc3/class_c_n_t_v2_s_m_p_t_e_anc_data.html">CNTV2SMPTEAncData</a> class in the <a class="el" href="../../index.html#ajacc">“libajacc” Closed-Caption Library</a> has some functions (e.g., <a class="el" href="../../db/dc3/class_c_n_t_v2_s_m_p_t_e_anc_data.html#ab6239e63708efbaa7aa49746c12f8b3e" title="Inserts ancillary data at a given line and channel offset into the given host frame buffer.">CNTV2SMPTEAncData::InsertAnc</a>) to help with this, though SD video formats aren’t supported (again, due to historical reasons).</li>
<li>Write your own functions to write the frame buffer VANC lines.</li>
</ul>
<p>The spreadsheets that follow show, in detail for each video format, which lines contain VANC, and which ones contain video data.</p>
<h2><a class="anchor" id="sd525i"></a>
SD 525i</h2>
<div class="image">
<img src="../../vvi-525i-75.png" alt=""/>
</div>
<h2><a class="anchor" id="sd625i"></a>
SD 625i</h2>
<div class="image">
<img src="../../vvi-625i-75.png" alt=""/>
</div>
<h2><a class="anchor" id="hd720p"></a>
HD 720p</h2>
<div class="image">
<img src="../../vvi-720p-75.png" alt=""/>
</div>
<h2><a class="anchor" id="hd1080p"></a>
HD 1080p</h2>
<div class="image">
<img src="../../vvi-1080p-75.png" alt=""/>
</div>
<h2><a class="anchor" id="hd1080i"></a>
HD 1080i/psF</h2>
<div class="image">
<img src="../../vvi-1080i-75.png" alt=""/>
</div>
<h2><a class="anchor" id="hd1080pdl"></a>
HD 1080p Dual-Link</h2>
<div class="image">
<img src="../../vvi-1080pduallink-75.png" alt=""/>
</div>
<h2><a class="anchor" id="hd2k1080p"></a>
2K: 1080p</h2>
<div class="image">
<img src="../../vvi-2k1080p-75.png" alt=""/>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="antv2devicefeatures_8hh_html_a2531be66d3eb0f62b1fa362b35182cac"><div class="ttname"><a href="../../d9/dfb/ntv2devicefeatures_8hh.html#a2531be66d3eb0f62b1fa362b35182cac">NTV2DeviceGetNumLTCInputs</a></div><div class="ttdeci">UWord NTV2DeviceGetNumLTCInputs(const NTV2DeviceID inDeviceID)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/ntv2devicefeatures_8hpp_source.html#l11863">ntv2devicefeatures.hpp:11863</a></div></div>
<div class="ttc" id="astruct_r_p188___s_t_r_u_c_t_html_ad3ac9a4fe535b4a0e5c0a820fa253591"><div class="ttname"><a href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html#ad3ac9a4fe535b4a0e5c0a820fa253591">RP188_STRUCT::High</a></div><div class="ttdeci">ULWord High</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l04213">ntv2publicinterface.h:4213</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a94307368613c9c9415caae6a06a8caf6"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a94307368613c9c9415caae6a06a8caf6">NTV2_IS_SD_VIDEO_FORMAT</a></div><div class="ttdeci">#define NTV2_IS_SD_VIDEO_FORMAT(__f__)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00738">ntv2enums.h:738</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_ac1cb0716a6edab2c96f71271a487118f"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#ac1cb0716a6edab2c96f71271a487118f">CNTV2Card::GetLTCInputPresent</a></div><div class="ttdeci">virtual bool GetLTCInputPresent(bool &amp;outIsPresent, const UWord inLTCInputNdx=0)</div><div class="ttdoc">Answers whether or not a valid analog LTC signal is being applied to the device's analog LTC input co...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l03731">ntv2register.cpp:3731</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefa2e83fa1b3e7b30cd9893843e2623465d"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa2e83fa1b3e7b30cd9893843e2623465d">kRegRP188InOut3DBB</a></div><div class="ttdeci">@ kRegRP188InOut3DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00409">ntv2publicinterface.h:409</a></div></div>
<div class="ttc" id="antv2devicefeatures_8hh_html_a43b972ed23192429f87c40bf7cee2b19"><div class="ttname"><a href="../../d9/dfb/ntv2devicefeatures_8hh.html#a43b972ed23192429f87c40bf7cee2b19">NTV2DeviceGetNumReferenceVideoInputs</a></div><div class="ttdeci">UWord NTV2DeviceGetNumReferenceVideoInputs(const NTV2DeviceID inDeviceID)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/ntv2devicefeatures_8hpp_source.html#l12415">ntv2devicefeatures.hpp:12415</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a000096cdf1eb36b50c8e55c406f24befac0652c7f833a7338699456bffaf23b1d"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a000096cdf1eb36b50c8e55c406f24befac0652c7f833a7338699456bffaf23b1d">NTV2_WgtSDIMonOut1</a></div><div class="ttdeci">@ NTV2_WgtSDIMonOut1</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l02960">ntv2enums.h:2960</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_aaba4ed33e51a3fc0769bc6dcca4f421a"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#aaba4ed33e51a3fc0769bc6dcca4f421a">CNTV2Card::SetRP188Mode</a></div><div class="ttdeci">virtual bool SetRP188Mode(const NTV2Channel inChannel, const NTV2_RP188Mode inMode)</div><div class="ttdoc">Sets the current RP188 mode – NTV2_RP188_INPUT or NTV2_RP188_OUTPUT – for the given channel.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l02554">ntv2register.cpp:2554</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_mac_driver_interface_html_a5bebfb895579a15841603f1191b37266"><div class="ttname"><a href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#a5bebfb895579a15841603f1191b37266">CNTV2MacDriverInterface::ReadRegister</a></div><div class="ttdeci">virtual bool ReadRegister(const ULWord inRegNum, ULWord &amp;outValue, const ULWord inMask=0xFFFFFFFF, const ULWord inShift=0)</div><div class="ttdoc">Reads all or part of the 32-bit contents of a specific register (real or virtual) on the AJA device....</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/ntv2macdriverinterface_8cpp_source.html#l00389">ntv2macdriverinterface.cpp:389</a></div></div>
<div class="ttc" id="aclass_n_t_v2_format_descriptor_html"><div class="ttname"><a href="../../d3/d4e/class_n_t_v2_format_descriptor.html">NTV2FormatDescriptor</a></div><div class="ttdoc">Describes a video frame for a given video standard or format and pixel format, including the total nu...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/ntv2formatdescriptor_8h_source.html#l00041">ntv2formatdescriptor.h:41</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a398465e390c93ee105f7ff1db1328c6c"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a398465e390c93ee105f7ff1db1328c6c">NTV2_VIDEO_FORMAT_HAS_PROGRESSIVE_PICTURE</a></div><div class="ttdeci">#define NTV2_VIDEO_FORMAT_HAS_PROGRESSIVE_PICTURE(__f__)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l01043">ntv2enums.h:1043</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a00aeeb1c32a817cf8a5b71396c8e8dce"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce">NTV2Channel</a></div><div class="ttdeci">NTV2Channel</div><div class="ttdoc">These enum values are mostly used to identify a specific widget_framestore. They're also commonly use...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l01346">ntv2enums.h:1346</a></div></div>
<div class="ttc" id="aajatypes_8h_html_acb8d6e569b9ec9f532e1bf203b02aa96"><div class="ttname"><a href="../../db/de2/ajatypes_8h.html#acb8d6e569b9ec9f532e1bf203b02aa96">NTV2_ASSERT</a></div><div class="ttdeci">#define NTV2_ASSERT(_expr_)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/ajatypes_8h_source.html#l00510">ajatypes.h:510</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a22343759cb28b6df7b8dbbe368ba3644"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a22343759cb28b6df7b8dbbe368ba3644">CNTV2Card::ReadAnalogLTCInput</a></div><div class="ttdeci">virtual bool ReadAnalogLTCInput(const UWord inLTCInput, RP188_STRUCT &amp;outRP188Data)</div><div class="ttdoc">Reads the current contents of the device's analog LTC input registers.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l03758">ntv2register.cpp:3758</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_ac2cd24508e310b59ed5ab3d0b0bfd999a26ea01dceabd44eb530ed22f9edf0cd8"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#ac2cd24508e310b59ed5ab3d0b0bfd999a26ea01dceabd44eb530ed22f9edf0cd8">kRegMaskRP188SourceSelect</a></div><div class="ttdeci">@ kRegMaskRP188SourceSelect</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l01431">ntv2publicinterface.h:1431</a></div></div>
<div class="ttc" id="antv2devicefeatures_8hh_html_aef5852308d0853201208edf44bad20ea"><div class="ttname"><a href="../../d9/dfb/ntv2devicefeatures_8hh.html#aef5852308d0853201208edf44bad20ea">NTV2DeviceCanDoMultiFormat</a></div><div class="ttdeci">bool NTV2DeviceCanDoMultiFormat(const NTV2DeviceID inDeviceID)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/ntv2devicefeatures_8hpp_source.html#l04293">ntv2devicefeatures.hpp:4293</a></div></div>
<div class="ttc" id="aclass_n_t_v2___r_p188_html_a94c46c58079d40bae85dac9b7ddb9cd5"><div class="ttname"><a href="../../d9/dba/class_n_t_v2___r_p188.html#a94c46c58079d40bae85dac9b7ddb9cd5">NTV2_RP188::Set</a></div><div class="ttdeci">void Set(const ULWord inDBB=0xFFFFFFFF, const ULWord inLow=0xFFFFFFFF, const ULWord inHigh=0xFFFFFFFF)</div><div class="ttdoc">Sets my fields from the given DBB, low and high ULWord components.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07061">ntv2publicinterface.h:7061</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_ac2cd24508e310b59ed5ab3d0b0bfd999ac304d7173d1d6a25c642db4409abcdb7"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#ac2cd24508e310b59ed5ab3d0b0bfd999ac304d7173d1d6a25c642db4409abcdb7">kRegMaskRP188DBB</a></div><div class="ttdeci">@ kRegMaskRP188DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l01432">ntv2publicinterface.h:1432</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aaa90748f5a92082fa4f79c89698d9463"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aaa90748f5a92082fa4f79c89698d9463">NTV2DeviceID</a></div><div class="ttdeci">NTV2DeviceID</div><div class="ttdoc">Identifies a specific AJA NTV2 device model number. The NTV2DeviceID is actually the PROM part number...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00020">ntv2enums.h:20</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefa07e6e4f750835051f69cca0526bd4167"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa07e6e4f750835051f69cca0526bd4167">kRegRP188InOut5DBB</a></div><div class="ttdeci">@ kRegRP188InOut5DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00497">ntv2publicinterface.h:497</a></div></div>
<div class="ttc" id="antv2enums_8h_html_ace03c7b6e4f21738519430d1fa42161c"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#ace03c7b6e4f21738519430d1fa42161c">NTV2FrameBufferFormat</a></div><div class="ttdeci">NTV2FrameBufferFormat</div><div class="ttdoc">Identifies a particular video frame buffer format. See Device Frame Buffer Formats for details.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00213">ntv2enums.h:213</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a316399fb81a9a19332997d467e2870f4"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a316399fb81a9a19332997d467e2870f4">CNTV2Card::AncExtractSetFilterDIDs</a></div><div class="ttdeci">virtual bool AncExtractSetFilterDIDs(const UWord inSDIInput, const NTV2DIDSet &amp;inDIDs)</div><div class="ttdoc">Replaces the DIDs to be excluded (filtered) by the given SDI input's Anc extractor....</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d40/ntv2anc_8cpp_source.html#l00949">ntv2anc.cpp:949</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a14e00f2d15b60af74a7f0b1b276a62d9"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a14e00f2d15b60af74a7f0b1b276a62d9">CNTV2Card::AncExtractGetFilterDIDs</a></div><div class="ttdeci">virtual bool AncExtractGetFilterDIDs(const UWord inSDIInput, NTV2DIDSet &amp;outDIDs)</div><div class="ttdoc">Answers with the DIDs currently being excluded (filtered) by the SDI input's Anc extractor....</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d40/ntv2anc_8cpp_source.html#l00924">ntv2anc.cpp:924</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a3a725a1899c9b85e93d03176e281c349"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a3a725a1899c9b85e93d03176e281c349">CNTV2Card::GetMultiFormatMode</a></div><div class="ttdeci">virtual bool GetMultiFormatMode(bool &amp;outIsEnabled)</div><div class="ttdoc">Answers if the device is operating in multiple-format per channel (independent channel) mode or not....</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l04436">ntv2register.cpp:4436</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a1ad23526580ea92c8985d86211d6e7faa7feb876a7b469fc8c7f849d2951fd061"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a1ad23526580ea92c8985d86211d6e7faa7feb876a7b469fc8c7f849d2951fd061">kRegShiftRP188DBB</a></div><div class="ttdeci">@ kRegShiftRP188DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l02524">ntv2publicinterface.h:2524</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a></div><div class="ttdeci">@ NTV2_CHANNEL1</div><div class="ttdoc">Specifies channel or FrameStore 1 (or the first item).</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l01348">ntv2enums.h:1348</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a197831a736299e2c68e3f7f0f860387f"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a197831a736299e2c68e3f7f0f860387f">CNTV2Card::GetFrameBufferFormat</a></div><div class="ttdeci">virtual bool GetFrameBufferFormat(NTV2Channel inChannel, NTV2FrameBufferFormat &amp;outValue)</div><div class="ttdoc">Returns the current frame buffer format for the given FrameStore on the AJA device.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l01919">ntv2register.cpp:1919</a></div></div>
<div class="ttc" id="antv2enums_8h_html_ae31d61e5f8328c58eb86af00d16e235daa8ad180541cbe234428f84b9f918cccc"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#ae31d61e5f8328c58eb86af00d16e235daa8ad180541cbe234428f84b9f918cccc">NTV2_FIELD0</a></div><div class="ttdeci">@ NTV2_FIELD0</div><div class="ttdoc">Identifies the first field in time for an interlaced video frame, or the first and only field in a pr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l01831">ntv2enums.h:1831</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a0ed71a238a94d5d4ed394510a033685d"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a0ed71a238a94d5d4ed394510a033685d">CNTV2Card::GetAncRegionOffsetAndSize</a></div><div class="ttdeci">virtual bool GetAncRegionOffsetAndSize(ULWord &amp;outByteOffset, ULWord &amp;outByteCount, const NTV2AncillaryDataRegion inAncRegion=NTV2_AncRgn_All)</div><div class="ttdoc">Answers with the offset and size of an ancillary data region within a device frame buffer.</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d53/ntv2dma_8cpp_source.html#l00516">ntv2dma.cpp:516</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a00aeeb1c32a817cf8a5b71396c8e8dcea8befde0a976532079f2a1e809eb4fa46"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dcea8befde0a976532079f2a1e809eb4fa46">NTV2_CHANNEL5</a></div><div class="ttdeci">@ NTV2_CHANNEL5</div><div class="ttdoc">Specifies channel or FrameStore 5 (or the 5th item).</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l01352">ntv2enums.h:1352</a></div></div>
<div class="ttc" id="antv2utils_8h_html_a5e144bb8353e29ca6e9e24c5728e07df"><div class="ttname"><a href="../../d0/d81/ntv2utils_8h.html#a5e144bb8353e29ca6e9e24c5728e07df">GetIndexForNTV2InputSource</a></div><div class="ttdeci">ULWord GetIndexForNTV2InputSource(const NTV2InputSource inValue)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9b/ntv2utils_8cpp_source.html#l05270">ntv2utils.cpp:5270</a></div></div>
<div class="ttc" id="antv2enums_8h_html_ac5dbe58ce5dcc94682e0012abc6124f1a703adbb510b0143ec922f8d7c2f02b40"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#ac5dbe58ce5dcc94682e0012abc6124f1a703adbb510b0143ec922f8d7c2f02b40">NTV2_INPUTSOURCE_SDI1</a></div><div class="ttdeci">@ NTV2_INPUTSOURCE_SDI1</div><div class="ttdoc">Identifies the 1st SDI video input.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l01263">ntv2enums.h:1263</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a1006274c5f87f4be41a527cd11dfe9fc"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a1006274c5f87f4be41a527cd11dfe9fc">CNTV2Card::GetRP188Data</a></div><div class="ttdeci">virtual bool GetRP188Data(const NTV2Channel inSDIInput, NTV2_RP188 &amp;outRP188Data)</div><div class="ttdoc">Reads the raw RP188 data from the DBB/Low/Hi registers for the given SDI input. On newer devices with...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l02573">ntv2register.cpp:2573</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefa09d681b293f9617e39355aff2439f347"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa09d681b293f9617e39355aff2439f347">kRegFS1ReferenceSelect</a></div><div class="ttdeci">@ kRegFS1ReferenceSelect</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00219">ntv2publicinterface.h:219</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_aa2fd595db82ca28dcedcdb77c3ac99ab"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#aa2fd595db82ca28dcedcdb77c3ac99ab">CNTV2Card::GetVideoFormat</a></div><div class="ttdeci">virtual bool GetVideoFormat(NTV2VideoFormat &amp;outValue, NTV2Channel inChannel=NTV2_CHANNEL1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l00335">ntv2register.cpp:335</a></div></div>
<div class="ttc" id="aajatypes_8h_html_ad3e6ac24329134f5b4c9993f13328db2"><div class="ttname"><a href="../../db/de2/ajatypes_8h.html#ad3e6ac24329134f5b4c9993f13328db2">ULWord</a></div><div class="ttdeci">uint32_t ULWord</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/ajatypes_8h_source.html#l00257">ajatypes.h:257</a></div></div>
<div class="ttc" id="antv2devicefeatures_8hh_html_a2ab42865b9e04750b25ae8e129c86cb7"><div class="ttname"><a href="../../d9/dfb/ntv2devicefeatures_8hh.html#a2ab42865b9e04750b25ae8e129c86cb7">NTV2DeviceCanDoWidget</a></div><div class="ttdeci">bool NTV2DeviceCanDoWidget(const NTV2DeviceID inDeviceID, const NTV2WidgetID inWidgetID)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/ntv2devicefeatures_8hpp_source.html#l32301">ntv2devicefeatures.hpp:32301</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefa3c3d2170b7dc08beb6a84f29d5cfcf72"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa3c3d2170b7dc08beb6a84f29d5cfcf72">kRegRP188InOut2DBB</a></div><div class="ttdeci">@ kRegRP188InOut2DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00185">ntv2publicinterface.h:185</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a14c0fcc0acf15b9f4a17b7af8a7f5f67"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a14c0fcc0acf15b9f4a17b7af8a7f5f67">CNTV2Card::SetAnalogLTCInClockChannel</a></div><div class="ttdeci">virtual bool SetAnalogLTCInClockChannel(const UWord inLTCInput, const NTV2Channel inChannel)</div><div class="ttdoc">Sets the (SDI) input channel that is to provide the clock reference to be used by the given analog LT...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l03794">ntv2register.cpp:3794</a></div></div>
<div class="ttc" id="antv2virtualregisters_8h_html_a5f698dc57a718a4252ef5d121d0863daa5246a0dbc917d2169c3f87665c7f3453"><div class="ttname"><a href="../../da/df0/ntv2virtualregisters_8h.html#a5f698dc57a718a4252ef5d121d0863daa5246a0dbc917d2169c3f87665c7f3453">kVRegUserDefinedDBB</a></div><div class="ttdeci">@ kVRegUserDefinedDBB</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df0/ntv2virtualregisters_8h_source.html#l00463">ntv2virtualregisters.h:463</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_a4dca4f7dbf9496f65e6e4154117aac2d"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#a4dca4f7dbf9496f65e6e4154117aac2d">CNTV2Card::SetLTCInputEnable</a></div><div class="ttdeci">virtual bool SetLTCInputEnable(const bool inEnable)</div><div class="ttdoc">Enables or disables the ability for the device to read analog LTC on the reference input connector.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l03714">ntv2register.cpp:3714</a></div></div>
<div class="ttc" id="aajatypes_8h_html_ae4440931f58d09da66ca92345018fb65"><div class="ttname"><a href="../../db/de2/ajatypes_8h.html#ae4440931f58d09da66ca92345018fb65">UWord</a></div><div class="ttdeci">uint16_t UWord</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/ajatypes_8h_source.html#l00255">ajatypes.h:255</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html">CNTV2Card</a></div><div class="ttdoc">I interrogate and control an AJA video/audio capture/playout device.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d4b/ntv2card_8h_source.html#l00028">ntv2card.h:28</a></div></div>
<div class="ttc" id="astruct_r_p188___s_t_r_u_c_t_html"><div class="ttname"><a href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html">RP188_STRUCT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l04210">ntv2publicinterface.h:4210</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_card_html_acf904ffdd4a560917801add2008528f3"><div class="ttname"><a href="../../d7/dfb/class_c_n_t_v2_card.html#acf904ffdd4a560917801add2008528f3">CNTV2Card::GetInputVideoFormat</a></div><div class="ttdeci">virtual NTV2VideoFormat GetInputVideoFormat(const NTV2InputSource inVideoSource=NTV2_INPUTSOURCE_SDI1, const bool inIsProgressive=(0))</div><div class="ttdoc">Returns the video format of the signal that is present on the given input source.</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da9/ntv2register_8cpp_source.html#l03428">ntv2register.cpp:3428</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefa5c1a2f6984cea2340cf32de98d721e81"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa5c1a2f6984cea2340cf32de98d721e81">kRegRP188InOut1DBB</a></div><div class="ttdeci">@ kRegRP188InOut1DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00150">ntv2publicinterface.h:150</a></div></div>
<div class="ttc" id="antv2enums_8h_html_ac6f9ee67bd7eda647024de39e44843c1a402aee60afaf52714e3a4010f6497d1c"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#ac6f9ee67bd7eda647024de39e44843c1a402aee60afaf52714e3a4010f6497d1c">NTV2_RP188_OUTPUT</a></div><div class="ttdeci">@ NTV2_RP188_OUTPUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l02087">ntv2enums.h:2087</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aed10f029a5332ade780fff81b5db8bdfaa8aef211eda693c83f1ea31a076842d6"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfaa8aef211eda693c83f1ea31a076842d6">NTV2_FORMAT_UNKNOWN</a></div><div class="ttdeci">@ NTV2_FORMAT_UNKNOWN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00528">ntv2enums.h:528</a></div></div>
<div class="ttc" id="astruct_r_p188___s_t_r_u_c_t_html_ad3fa2d972d93cfa6af22add78d9dde35"><div class="ttname"><a href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html#ad3fa2d972d93cfa6af22add78d9dde35">RP188_STRUCT::DBB</a></div><div class="ttdeci">ULWord DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l04211">ntv2publicinterface.h:4211</a></div></div>
<div class="ttc" id="astruct_r_p188___s_t_r_u_c_t_html_ade7f71ab1a679a6b1d68d97ff281ad76"><div class="ttname"><a href="../../d3/d95/struct_r_p188___s_t_r_u_c_t.html#ade7f71ab1a679a6b1d68d97ff281ad76">RP188_STRUCT::Low</a></div><div class="ttdeci">ULWord Low</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l04212">ntv2publicinterface.h:4212</a></div></div>
<div class="ttc" id="aclass_n_t_v2___r_p188_html_a875accf1e5b0c9b817256738eb454f8a"><div class="ttname"><a href="../../d9/dba/class_n_t_v2___r_p188.html#a875accf1e5b0c9b817256738eb454f8a">NTV2_RP188::IsValid</a></div><div class="ttdeci">bool IsValid(void) const</div><div class="ttdoc">Answers true if I'm valid, or false if I'm not valid.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07040">ntv2publicinterface.h:7040</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefaf441c9108958ceabf9c3b4856f3a692e"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefaf441c9108958ceabf9c3b4856f3a692e">kRegRP188InOut4DBB</a></div><div class="ttdeci">@ kRegRP188InOut4DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00414">ntv2publicinterface.h:414</a></div></div>
<div class="ttc" id="aclass_n_t_v2___r_p188_html"><div class="ttname"><a href="../../d9/dba/class_n_t_v2___r_p188.html">NTV2_RP188</a></div><div class="ttdoc">This struct replaces the old RP188_STRUCT.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l06998">ntv2publicinterface.h:6998</a></div></div>
<div class="ttc" id="antv2devicefeatures_8hh_html_ad4ca87b50cb52c351c69ce2a95c8b804"><div class="ttname"><a href="../../d9/dfb/ntv2devicefeatures_8hh.html#ad4ca87b50cb52c351c69ce2a95c8b804">NTV2DeviceCanDoLTCInOnRefPort</a></div><div class="ttdeci">bool NTV2DeviceCanDoLTCInOnRefPort(const NTV2DeviceID inDeviceID)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/ntv2devicefeatures_8hpp_source.html#l04107">ntv2devicefeatures.hpp:4107</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a8f85ca8efb8928620e1fbb6282a5e686"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a8f85ca8efb8928620e1fbb6282a5e686">NTV2VideoFormat</a></div><div class="ttdeci">enum _NTV2VideoFormat NTV2VideoFormat</div><div class="ttdoc">Identifies a particular video format.</div></div>
<div class="ttc" id="aclass_c_n_t_v2_driver_interface_html_a7e4ebdaf05f325d13582eac32084ee5a"><div class="ttname"><a href="../../d0/dbc/class_c_n_t_v2_driver_interface.html#a7e4ebdaf05f325d13582eac32084ee5a">CNTV2DriverInterface::GetDeviceID</a></div><div class="ttdeci">virtual NTV2DeviceID GetDeviceID(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d85/ntv2driverinterface_8cpp_source.html#l00418">ntv2driverinterface.cpp:418</a></div></div>
<div class="ttc" id="antv2devicefeatures_8hh_html_a1c7b90df5e62610074a95589224057af"><div class="ttname"><a href="../../d9/dfb/ntv2devicefeatures_8hh.html#a1c7b90df5e62610074a95589224057af">NTV2DeviceGetNumVideoOutputs</a></div><div class="ttdeci">UWord NTV2DeviceGetNumVideoOutputs(const NTV2DeviceID inDeviceID)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/ntv2devicefeatures_8hpp_source.html#l12875">ntv2devicefeatures.hpp:12875</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefaea6b6ba8ed6c92966050c8a843a77769"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefaea6b6ba8ed6c92966050c8a843a77769">kRegRP188InOut7DBB</a></div><div class="ttdeci">@ kRegRP188InOut7DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00603">ntv2publicinterface.h:603</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_ac815846292eb113e60b58c91ffc67708"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#ac815846292eb113e60b58c91ffc67708">NTV2DIDSet</a></div><div class="ttdeci">std::set&lt; UByte &gt; NTV2DIDSet</div><div class="ttdoc">A set of distinct NTV2DID values.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00076">ntv2publicinterface.h:76</a></div></div>
<div class="ttc" id="aajatypes_8h_html_af6393ce6aad54fdb018b44c2b29ea31f"><div class="ttname"><a href="../../db/de2/ajatypes_8h.html#af6393ce6aad54fdb018b44c2b29ea31f">BIT</a></div><div class="ttdeci">#define BIT(_x_)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/ajatypes_8h_source.html#l00566">ajatypes.h:566</a></div></div>
<div class="ttc" id="aclass_c_n_t_v2_mac_driver_interface_html_aa996046aa48e6c684fd77d7b1d99bd40"><div class="ttname"><a href="../../dc/dfc/class_c_n_t_v2_mac_driver_interface.html#aa996046aa48e6c684fd77d7b1d99bd40">CNTV2MacDriverInterface::WriteRegister</a></div><div class="ttdeci">virtual bool WriteRegister(const ULWord inRegNum, const ULWord inValue, const ULWord inMask=0xFFFFFFFF, const ULWord inShift=0)</div><div class="ttdoc">Updates or replaces all or part of the 32-bit contents of a specific register (real or virtual) on th...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dbf/ntv2macdriverinterface_8cpp_source.html#l00438">ntv2macdriverinterface.cpp:438</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aaa90748f5a92082fa4f79c89698d9463a74c6015ed8aef5741ab17feb43f565cc"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aaa90748f5a92082fa4f79c89698d9463a74c6015ed8aef5741ab17feb43f565cc">DEVICE_ID_KONALHI</a></div><div class="ttdeci">@ DEVICE_ID_KONALHI</div><div class="ttdoc">See KONA LHi.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00076">ntv2enums.h:76</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a6eef35b2db2fa26fa13a3850c964fdeeadea059bd088f62d28087e81d9bb6be77"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a6eef35b2db2fa26fa13a3850c964fdeeadea059bd088f62d28087e81d9bb6be77">NTV2_AncRgn_All</a></div><div class="ttdeci">@ NTV2_AncRgn_All</div><div class="ttdoc">Identifies &quot;all&quot; ancillary data regions.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l04215">ntv2enums.h:4215</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a1ad23526580ea92c8985d86211d6e7faa4f6a912aa766051997160dab24c32664"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a1ad23526580ea92c8985d86211d6e7faa4f6a912aa766051997160dab24c32664">kRegShiftRP188Source</a></div><div class="ttdeci">@ kRegShiftRP188Source</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l02523">ntv2publicinterface.h:2523</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefa23e12bd97cdb2db6afd758521e7b4bf1"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefa23e12bd97cdb2db6afd758521e7b4bf1">kRegRP188InOut6DBB</a></div><div class="ttdeci">@ kRegRP188InOut6DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00593">ntv2publicinterface.h:593</a></div></div>
<div class="ttc" id="antv2devicefeatures_8hh_html_a60122423551bfc4f9a6272cbc91d8cd7"><div class="ttname"><a href="../../d9/dfb/ntv2devicefeatures_8hh.html#a60122423551bfc4f9a6272cbc91d8cd7">NTV2DeviceCanDoVITC2</a></div><div class="ttdeci">bool NTV2DeviceCanDoVITC2(const NTV2DeviceID inDeviceID)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/ntv2devicefeatures_8hpp_source.html#l06017">ntv2devicefeatures.hpp:6017</a></div></div>
<div class="ttc" id="antv2publicinterface_8h_html_a44465b2926268ea111cf5d357016baefaafe8c65c4e33397ab90012c86ce8a2f0"><div class="ttname"><a href="../../d4/dd7/ntv2publicinterface_8h.html#a44465b2926268ea111cf5d357016baefaafe8c65c4e33397ab90012c86ce8a2f0">kRegRP188InOut8DBB</a></div><div class="ttdeci">@ kRegRP188InOut8DBB</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l00613">ntv2publicinterface.h:613</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">The NTV2 SDK</a></li>
    <li class="footer">Generated on Mon Sep 29 2025 16:26:57 for AJA NTV2 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
