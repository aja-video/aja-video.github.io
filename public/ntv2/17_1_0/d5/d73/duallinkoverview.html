<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AJA NTV2 SDK: Dual-Link and 3G Overview</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../ajastyles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../AJALogoMini.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AJA NTV2 SDK
   &#160;<span id="projectnumber">17.1.1.1245</span>
   </div>
   <div id="projectbrief">NTV2 SDK 17.1.1.1245</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d5/d73/duallinkoverview.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Dual-Link and 3G Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="duallinkhistory"></a>
History</h1>
<p>Initially, a standard HD-SDI signal had a data rate of 1.5Gb/s. Due to the data rate limitation, this meant signals had to be at a frame rate of 24, 25 or 30 frames per second and a bit depth of 4:2:2.</p>
<p>There was a need for higher frame rates and also higher bit-depth, but since the standard HD-SDI signal was maxed out, a new solution was needed. This led to the creation of the Dual-Link specification, which gangs two standard HD-SDI signals together, essentially doubling the bandwidth. Each cable carries a separate 1.5Gb/s 4:2:2 signal.</p>
<p>This can be used several ways. First, higher frame rates can be achieved by sending alternating video frames down each HD-SDI cable. This works similarly to interlacing within a video image. The alternating frames are chained together on the receiving end into a 50 or 60 fps signal.</p>
<p>Alternately, the two HD-SDI signals can carry higher bit depth information. By splitting the data between the two cables, more information per frame can be carried. This is usually referred to as Dual-Link 4:4:4 and can be either YUV or RGB. The advantage of YUV 4:4:4 is that the primary channel is carrying a standard YUV 4:2:2 signal, which can be plugged into a standard Single Link device. (Note that the signal on the second cable is formatted as a complete 4:2:2 signal, but only the second and third channels carry information useful to the final image.)</p>
<p>Soon after, the ability to handle up to 3Gb/s on a single cable (called 3G) was introduced. This made the need for two cables obsolete, since the higher frame rate and bit depth signals could now be carried on a single cable. When used to carry higher frame rates such as 1080p 50/60, the signal is referred to as Level A. When used to carry higher bit depth signals, it is referred to as Level B.</p>
<h1><a class="anchor" id="dualstream3g"></a>
Dual Stream 3G</h1>
<p>In addition, since 3G could carry twice the information, it’s also possible to combine two separate 1.5Gbps 4:2:2 image streams into a single 3G stream, which is referred to as <b>Dual Stream 3G</b>. <b>Dual Stream 3G</b> is particularly useful in stereoscopic production where separate left and right eye information is being captured.</p>
<p>It’s important to note that <b>Dual Stream 3G</b> when used for stereoscopic is not the same as a “muxed” stereoscopic image. Stereoscopic muxing squeezes the left and right eye images into a single, standard video frame, potentially sacrificing the quality of the images. <b>Dual Stream 3G</b> has the bandwidth to embed two complete 1.5 Gb image streams into a single 3G signal, which can then be extracted and used without compromise.</p>
<h1><a class="anchor" id="ajalevelb"></a>
Newer AJA Devices Handle Level B Differently</h1>
<p>On the wire, the speed of Level A and Level B are the same (148 MHz). For Level A, the lines of the image are received at the AJA device’s SDI input one at a time. The speed of the SDI input crosspoint is changed to 148 MHz so that the frame store can write the data into memory at the same rate it comes in. For Level B, lines are received as an even/odd pair at a 74 MHz rate. In this case it would be necessary to store one line temporarily while the other is being written into the frame store. Older AJA devices (e.g., <a class="el" href="../../d0/d53/ntv2devices.html#kona3gufc">KONA 3G (UFC Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#kona3gquad">KONA 3G (Quad Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#corvid24">Corvid 24</a>, etc.), lack a FIFO to do this, so instead, two frame stores are used to write both lines into memory simultaneously at a 74 MHz rate. (This was how AJA engineers were able to graft the “new” Level B signals onto their existing designs.) This is why you must use two frame stores for Level B signals on the <a class="el" href="../../d0/d53/ntv2devices.html#kona3gufc">KONA 3G (UFC Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#kona3gquad">KONA 3G (Quad Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#corvid24">Corvid 24</a>, and other devices of that era &ndash; and must also call the <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a62f77a32f8042d370e01a425d36a8d53" title="Enables or disables the device&#39;s SMPTE-372 (dual-link) mode (used for older 3G-levelB-capable devices...">CNTV2Card::SetSmpte372</a> function to “gang” the frame stores.</p>
<p>Level B is handled much easier with newer AJA devices (e.g., <a class="el" href="../../d0/d53/ntv2devices.html#io4kquad">Io4K (Quad Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#io4kufc">Io4K (UFC Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#io4kquad">Io4K (Quad Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#io4kufc">Io4K (UFC Mode)</a>, <a class="el" href="../../d0/d53/ntv2devices.html#corvid44">Corvid 44</a>, <a class="el" href="../../d0/d53/ntv2devices.html#corvid88">Corvid 88</a>, etc.). Simply route the SDI input directly to a single frame store, then configure the SDI input to <b>3G Level B</b>.</p>
<dl class="section note"><dt>Note</dt><dd><b>IMPORTANT:</b><br  />
When writing software to handle Level A and Level B formats, there’s a difference between <b>NTV2_FORMAT_1080p_6000</b> (which is synonymous with <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa9488048d09abc7fd597c052ca21fe922">NTV2_FORMAT_1080p_6000_B</a>), and <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa237e8bc89e01867d585a59f488bdaa6a">NTV2_FORMAT_1080p_6000_A</a>. The former was a way for AJA’s older devices with slower FPGAs to process high frame rate progressive formats, which was done by using two Frame Stores, each running at 30 Hz, to handle a 60 Hz signal.<br  />
 <br  />
 AJA’s newer devices, including the <a class="el" href="../../d0/d53/ntv2devices.html#kona4quad">KONA 4 (Quad Mode)</a>, have faster FPGAs. The recommended method is to use a video format of <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa237e8bc89e01867d585a59f488bdaa6a">NTV2_FORMAT_1080p_6000_A</a>. The device then runs at a true 60 Hz frame rate, and only one Frame Store is required.<br  />
 <br  />
 To maintain consistent signal routing when working with 3G formats, 3G LevelB-to-LevelA SDI input converters were introduced for ingesting from Level B sources, as well as 3G LevelA-to-LevelB SDI output converters for valid 3G Level B signal transport playout, all while using 3G Level A video formats. <b>AJA strongly recommends using 3G Level A video formats exclusively, and deprecate the use of 3G Level B video formats.</b></dd></dl>
<h1><a class="anchor" id="aja1080p5060"></a>
How to Capture 1080p50/60 Video</h1>
<p>There are 3 ways to capture 1080p50/60 video on a modern AJA device (e.g., <a class="el" href="../../d0/d53/ntv2devices.html#corvid44">Corvid 44</a>):</p><ul>
<li>SMPTE 372 dual-link 1.5G;</li>
<li>SMPTE 425 single-link 3G level A;</li>
<li>SMPTE 425 single-link 3G level B.</li>
</ul>
<p>Dual-link mode requires two SDI connectors, where each looks like a 1080i signal. These signals are partitioned in the source and merged in the destination as 1080p video.</p>
<p>The single-link 3Gb signal is the same idea, except instead of two wires, the two streams are multiplexed into a single 3Gbps signal. The 3Ga signal is a single 3Gbps 1080p stream.</p>
<p>Unfortunately, because the NTV2 hardware and SDK evolved on the “bleeding edge” prior to ratification of the SMPTE standards, it has made configuring these three different modes in the SDK somewhat confusing.</p>
<p><b>Dual-Link 1.5Gbps SMPTE 372 Input</b></p>
<ul>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a9f0915bc38e35ce74dad187427d03e16" title="Configures the AJA device to handle a specific video format.">CNTV2Card::SetVideoFormat</a> with the appropriate “_B” format (e.g. <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfaffc870bb1b8c73a43bfe0614e62d303f">NTV2_FORMAT_1080p_5000_B</a> or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa9488048d09abc7fd597c052ca21fe922">NTV2_FORMAT_1080p_6000_B</a> …) to configure the device for dual-link 1.5G input.</li>
<li>Use separate Frame Stores for each 1.5Gbps signal.</li>
<li>Route signals from the two SDI inputs into the two Frame Stores separately.</li>
</ul>
<p><b>Single-Link 3G Level A Input</b></p>
<ul>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a9f0915bc38e35ce74dad187427d03e16" title="Configures the AJA device to handle a specific video format.">CNTV2Card::SetVideoFormat</a> with the appropriate “_A” format (e.g., <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa3c82d3ef6196da2b1173559741d0e8e3">NTV2_FORMAT_1080p_5000_A</a> or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa237e8bc89e01867d585a59f488bdaa6a">NTV2_FORMAT_1080p_6000_A</a> …).</li>
<li>Use a single Frame Store, and route its input from the output crosspoint of the one SDI input.</li>
</ul>
<p><b>Single-Link 3G Level B Input</b></p>
<ul>
<li>Call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a9f0915bc38e35ce74dad187427d03e16" title="Configures the AJA device to handle a specific video format.">CNTV2Card::SetVideoFormat</a> with the appropriate “_A” format (e.g., <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa3c82d3ef6196da2b1173559741d0e8e3">NTV2_FORMAT_1080p_5000_A</a> or <a class="el" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa237e8bc89e01867d585a59f488bdaa6a">NTV2_FORMAT_1080p_6000_A</a> …).</li>
<li>Use a single Frame Store, and route its input from the output crosspoint of the one SDI input.</li>
<li>Enable the 3Gb-to-3Ga converter in the SDI input using <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a4f649da2bf579d80082200e368781271" title="Enables or disables 3G level B to 3G level A conversion at the SDI input(s).">CNTV2Card::SetSDIInLevelBtoLevelAConversion</a>.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Don’t be surprised if, after configuring for 3Gb, this gets reported as a 1080i signal, since it really does get transmitted as 2 × 1080i streams. In 3Ga mode it should be reported as a 1080p stream.</dd></dl>
<p><b>Code Example</b></p>
<div class="fragment"><div class="line"><span class="comment">//  This will work with devices that answer \c true for ::NTV2DeviceCanDo3GLevelConversion</span></div>
<div class="line"><span class="keywordtype">bool</span>    is3Gb(<span class="keyword">false</span>);</div>
<div class="line">mVideoFormat = mDevice.GetSDIInputVideoFormat (mInputChannel, <span class="keyword">false</span>);</div>
<div class="line">mDevice.GetSDIInput3GbPresent (is3Gb, mInputChannel);</div>
<div class="line"><span class="keywordflow">if</span> (is3Gb)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (mVideoFormat)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa70bccda2ef4b06c4ffa0c7431a9a8c82">NTV2_FORMAT_1080i_5000</a>:</div>
<div class="line">            mDevice.SetSDIInLevelBtoLevelAConversion (mInputChannel, <span class="keyword">true</span>);</div>
<div class="line">            mVideoFormat = <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa3c82d3ef6196da2b1173559741d0e8e3">NTV2_FORMAT_1080p_5000_A</a>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa8c7f7ad429946587d642011444ec601c">NTV2_FORMAT_1080i_5994</a>:</div>
<div class="line">            mDevice.SetSDIInLevelBtoLevelAConversion (mInputChannel, <span class="keyword">true</span>);</div>
<div class="line">            mVideoFormat = <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfaf50613d99979788533b5dfa5f477bbdc">NTV2_FORMAT_1080p_5994_A</a>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa6eeef2fd74bdc3744cde9074aebd3bc0">NTV2_FORMAT_1080i_6000</a>:</div>
<div class="line">            mDevice.SetSDIInLevelBtoLevelAConversion (mInputChannel, <span class="keyword">true</span>);</div>
<div class="line">            mVideoFormat = <a class="code" href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa237e8bc89e01867d585a59f488bdaa6a">NTV2_FORMAT_1080p_6000_A</a>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            mDevice.SetSDIInLevelBtoLevelAConversion (mInputChannel, <span class="keyword">false</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    mDevice.SetSDIInLevelBtoLevelAConversion (mInputChannel, <span class="keyword">false</span>);</div>
</div><!-- fragment --><h1><a class="anchor" id="aja6g12g"></a>
6G and 12G</h1>
<p>Some newer AJA devices have SDI connectors that support 6G and 12G, which allows a single cable to carry 4K/UHD, even at high-frame-rates or bit depths. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="antv2enums_8h_html_aed10f029a5332ade780fff81b5db8bdfa8c7f7ad429946587d642011444ec601c"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa8c7f7ad429946587d642011444ec601c">NTV2_FORMAT_1080i_5994</a></div><div class="ttdeci">@ NTV2_FORMAT_1080i_5994</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00512">ntv2enums.h:512</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aed10f029a5332ade780fff81b5db8bdfa237e8bc89e01867d585a59f488bdaa6a"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa237e8bc89e01867d585a59f488bdaa6a">NTV2_FORMAT_1080p_6000_A</a></div><div class="ttdeci">@ NTV2_FORMAT_1080p_6000_A</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00535">ntv2enums.h:535</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aed10f029a5332ade780fff81b5db8bdfa3c82d3ef6196da2b1173559741d0e8e3"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa3c82d3ef6196da2b1173559741d0e8e3">NTV2_FORMAT_1080p_5000_A</a></div><div class="ttdeci">@ NTV2_FORMAT_1080p_5000_A</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00533">ntv2enums.h:533</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aed10f029a5332ade780fff81b5db8bdfa70bccda2ef4b06c4ffa0c7431a9a8c82"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa70bccda2ef4b06c4ffa0c7431a9a8c82">NTV2_FORMAT_1080i_5000</a></div><div class="ttdeci">@ NTV2_FORMAT_1080i_5000</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00511">ntv2enums.h:511</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aed10f029a5332ade780fff81b5db8bdfaf50613d99979788533b5dfa5f477bbdc"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfaf50613d99979788533b5dfa5f477bbdc">NTV2_FORMAT_1080p_5994_A</a></div><div class="ttdeci">@ NTV2_FORMAT_1080p_5994_A</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00534">ntv2enums.h:534</a></div></div>
<div class="ttc" id="antv2enums_8h_html_aed10f029a5332ade780fff81b5db8bdfa6eeef2fd74bdc3744cde9074aebd3bc0"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#aed10f029a5332ade780fff81b5db8bdfa6eeef2fd74bdc3744cde9074aebd3bc0">NTV2_FORMAT_1080i_6000</a></div><div class="ttdeci">@ NTV2_FORMAT_1080i_6000</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l00513">ntv2enums.h:513</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">The NTV2 SDK</a></li>
    <li class="footer">Generated on Tue Oct 1 2024 16:21:01 for AJA NTV2 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
