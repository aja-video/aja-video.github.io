<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AJA NTV2 SDK: Capture and Playout Techniques</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../ajastyles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../AJALogoMini.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AJA NTV2 SDK
   &#160;<span id="projectnumber">17.0.1.1246</span>
   </div>
   <div id="projectbrief">NTV2 SDK 17.0.1.1246</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/d9a/recordplaytechniques.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Capture and Playout Techniques </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes the basics of capturing and playing real-time video, then describes the two most popular methods:</p><ul>
<li><a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutpingpong">Ping-Pong</a></li>
<li><a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutautocirculate">AutoCirculate</a><ul>
<li><a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculatecapture">AutoCirculate Capture</a><ul>
<li><a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirctimebudget">Per-Frame “Time Budget”</a></li>
</ul>
</li>
<li><a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculateplayout">AutoCirculate Playout</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="playoutbasics"></a>
Playout Basics</h1>
<p><em>Coming soon.</em></p>
<p><b>Playout Demos:</b></p><ul>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2outputtestpattern">NTV2OutputTestPattern Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2player">NTV2Player Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2player4k">NTV2Player4K Demo</a></li>
</ul>
<h1><a class="anchor" id="capturebasics"></a>
Capture Basics</h1>
<p><em>Coming soon.</em></p>
<h2><a class="anchor" id="playoutinputdetect"></a>
Input Detection</h2>
<p><em>Coming soon.</em></p>
<p><b>Capture Demos:</b></p><ul>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2capture">NTV2Capture Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2capture4k">NTV2Capture4K Demo</a></li>
</ul>
<h1><a class="anchor" id="aboutpingpong"></a>
Ping-Pong</h1>
<p>The “ping-pong” method is a good choice when lower latency is required. The illustration shows a scenario that captures incoming video frames, alters the captured frame in some way (e.g., “burn” an image onto it), and then plays the altered frames. One thread would, at every input VBI, flip the Input Frame between 0 and 1, and transfer the just-captured frame to the host. The other thread would, at every output VBI, flip the Output Frame between 2 and 3, and transfer a finished frame from the host to the off-screen buffer on the device. This should result in a three frame latency.</p>
<div class="image">
<img src="../../pingpong.png" alt=""/>
</div>
<p>By getting “closer to the metal” with this technique, the application designer must manage every detail … making DMA transfers at the right time, keeping the audio synchronized with the video, getting/setting timecode, etc.</p>
<p>Any unexpected delays or slow-downs in frame processing or DMA transfers will cause visual distortion.</p>
<p>The low-latency model can support either field or frame mode processing. In this model, a time-critical user-mode thread is used to manage capture and/or playback in real-time.</p>
<p>For capture, full frames or separate fields can be transferred immediately after the VBI is received. Audio can be transferred based on the actual number of audio samples that have been written into the device audio buffer.</p>
<p>For playback, frames written to the device frame buffer can be set to go on-air any time before the VBI. Field-mode processing here is a little tricky, as once the first field is on-air, the second field will go on-air ready-or-not, so the application must make some real-time decisions if it needs to drop a field. Low-latency client software can be written with a delay parameter that would allow for some variation in the application’s video processing time while maintaining a fixed delay, but it may not provide the reliability of the kernel queuing model.</p>
<p>Some relevant API calls:</p><ul>
<li>Use <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a56552aedb9631efa04e1ff8ea96be02b" title="Efficiently sleeps the calling thread/process until the next one or more field (interlaced video) or ...">CNTV2Card::WaitForInputVerticalInterrupt</a> (capture) or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a0599dc483977c64978cae92fb8837252" title="Efficiently sleeps the calling thread/process until the next one or more field (interlaced video) or ...">CNTV2Card::WaitForOutputVerticalInterrupt</a> (playout) to wait for the field VBI of interlaced video, or the frame VBI of progressive video.</li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a1828395a3ecab209ad8a7a4ab5d9f5cf" title="Efficiently sleeps the calling thread/process until the next input VBI for the given field and input ...">CNTV2Card::WaitForInputFieldID</a> can be used to wait for the frame VBI of interlaced video.</li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a431e77d0e1cb52855a80fbbeab954e04" title="Transfers a single frame from the AJA device to the host.">CNTV2Card::DMAReadFrame</a> (capture) or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a321815c3e8bed38b2370baa1fb1b5fd0" title="Transfers a single frame from the host to the AJA device.">CNTV2Card::DMAWriteFrame</a> (playout) will transfer frame data.</li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a4f54022e65a655516fa18b4ee5232372" title="Performs a segmented data transfer from the AJA device to the host.">CNTV2Card::DMAReadSegments</a> (capture) or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a1d99d938463f5229367b6e47a632b2d4" title="Performs a segmented data transfer from the host to the AJA device.">CNTV2Card::DMAWriteSegments</a> (playout) can transfer one field’s lines to/from a half-height buffer on the host.</li>
</ul>
<p>Ping-Pong Capture/Playout Demos:</p><ul>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2llburn">NTV2LLBurn Demo</a></li>
</ul>
<h1><a class="anchor" id="aboutautocirculate"></a>
AutoCirculate</h1>
<p>AutoCirculate is an API in the <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html" title="I interrogate and control an AJA video/audio capture/playout device.">CNTV2Card</a> class which allows real-time video streaming on a non-real-time host operating system. Video frames are buffered between the application software and the AJA device driver, and the driver is responsible for playing out (or capturing) those frames at the correct time.</p>
<div class="image">
<img src="../../ac-overview.png" alt=""/>
</div>
<p>AutoCirculate makes it easy to stream audio &amp; video data into and out of your application.</p>
<p>AutoCirculate keeps <a class="el" href="../../d7/dcb/ancillarydata.html">Ancillary Data</a> such as <a class="el" href="../../d7/dcb/ancillarydata.html#ancembeddedaudio">Embedded Audio</a> and <a class="el" href="../../d7/dcb/ancillarydata.html#anctimecode">Timecode (RP-188, SMPTE-12M)</a> synchronized with the AutoCirculating video frames.</p>
<p>The AJA device driver performs the bulk of the work involved in streaming audio and video to/from the AJA hardware. It helps to synchronize the audio with the video, detect dropped frames while streaming, time-stamps the frame data, reads or writes embedded timecode, and manages many other details.</p>
<p>The AutoCirculate API coordinates the transfer of video and audio data between the AJA driver and the host application as the driver circulates through its designated frame set (which is a contiguous block of frames in device SDRAM). For recording, the driver cycles through its associated input frames, and on playback, the driver cycles through its associated output frames. For example, an AutoCirculate capture using 7 frames would record each incoming frame one at a time into device SDRAM in frames 0…6, 0…6, 0…6 <em>ad infínitum</em>, continually and repeatedly reusing those frame “slots” in its memory. The key is for the host application to continually transfer the captured frames from device memory into host memory fast enough to keep up with the incoming video being recorded on the device.</p>
<dl class="section note"><dt>Note</dt><dd>AutoCirculate is intended for use in applications that require high reliability and that don’t require low latency. For low latency ingest or playout applications, the application must get “closer to the metal” and use another method, such as the <a class="el" href="../../d9/d9a/recordplaytechniques.html#aboutpingpong">Ping-Pong</a> method.</dd></dl>
<h2><a class="anchor" id="autocirculatecapture"></a>
AutoCirculate Capture</h2>
<p>Here’s an example of how AutoCirculate works in capture mode using 10 frame buffers:</p>
<div class="image">
<img src="../../ac-capture.png" alt=""/>
</div>
<p>In this illustration, AutoCirculate is capturing, using 10 frame buffers. Here, captured frames 6, 7, 8, 9, 0 and 1 have already been transferred into host memory (in that order), while frame 2 is currently being transferred to the host, while frame 5 on the AJA device is currently being overwritten by the incoming frame.</p>
<p>As each <b>Incoming Frame</b> streams into the AJA device, its image data (plus audio and other <a class="el" href="../../d7/dcb/ancillarydata.html">Ancillary Data</a>) is recorded into the <b>Active Frame</b> of the device’s frame memory.</p>
<p>When AutoCirculate is running, frames get transferred using Direct Memory Access (DMA) from the device frame memory to host memory.</p>
<p>The <b>Transfer Frame</b> — the frame being transferred to the host at the host’s request — “chases” the <b>Active Frame</b>, with the gap between them called the <b>Buffer Level</b>.</p>
<p>To prevent “torn” or malformed images, the host application must ensure that the <b>Transfer Frame</b> never coincides with the <b>Active Frame</b> being recorded.</p>
<p>Assuming a 29.97 fps full-frame rate, the AJA driver will bump the <b>Active Frame</b> to the next frame slot every 33 milliseconds. As long as the host application that’s transferring frames takes less than 33 milliseconds (including the DMA transfer time) to consume each frame, all will be well. If the host takes longer than 33 milliseconds to consume a frame, the <b>Transfer Frame</b> will start to fall behind, and the <b>Buffer Level</b> will increase. If this is allowed to continue, the <b>Active Frame</b> will overtake the <b>Transfer Frame</b>, which will result in “dropped” frames that never get transferred to the host. The dropped frame count is available from the <a class="el" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#a8e2d300d044695ffa41eab9f39f2c473">AUTOCIRCULATE_STATUS::GetDroppedFrameCount</a> function. (See <a class="el" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html" title="This is returned from the CNTV2Card::AutoCirculateGetStatus function.">AUTOCIRCULATE_STATUS</a> and <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a611031170a5dd26e456ed55e05dec9c2" title="Returns the current AutoCirculate status for the given channel.">CNTV2Card::AutoCirculateGetStatus</a> for more information.)</p>
<p>If the AutoCirculate channel was configured to capture audio, it will continuously monitor the incoming Audio/Video sync. If it detects a difference of more than about 10 milliseconds, it will attempt to resync the audio to the video. This resynchronization requires restarting the audio engine, which often results in a click or pop in the captured audio.</p>
<p>(See <a class="el" href="../../d7/dcb/ancillarydata.html#anctimecode">Timecode (RP-188, SMPTE-12M)</a> for more information about timecode capture and AutoCirculate.)</p>
<h3><a class="anchor" id="autocirctimebudget"></a>
Per-Frame “Time Budget”</h3>
<p>To prevent dropping frames, the application must stay within its per-frame “time budget”.</p>
<ul>
<li>The video frame rate determines the per-frame “time budget”.</li>
<li>If the budget is exceeded long enough, the application <b><em>will</em></b> drop frames.</li>
<li>The “time budget” is spent doing three things:<ul>
<li><b>DMA Transfer</b>: The elapsed time spent in the <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> function.</li>
<li><b>Processing</b>: The elapsed time from the moment <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> returns and the next time it’s about to be called (minus any <b>Waiting</b> time …&#160;see next item).</li>
<li><b>Waiting</b>: The time spent waiting for a new frame to become ready to transfer from the device.<ul>
<li>If the application has fallen behind (i.e. the <b>Buffer Level</b> exceeds 1), this wait time should be zero.<ul>
<li>i.e. if AUTOCIRCULATE_STATUS::HasAvailableInputFrames returns <code>true</code>, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> right away.</li>
</ul>
</li>
<li>If the application has caught up, this wait time will be non-zero.<ul>
<li>i.e. if AUTOCIRCULATE_STATUS::HasAvailableInputFrames returns <code>false</code>, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a56552aedb9631efa04e1ff8ea96be02b" title="Efficiently sleeps the calling thread/process until the next one or more field (interlaced video) or ...">CNTV2Card::WaitForInputVerticalInterrupt</a> to wait for a frame to become available.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>It’s a good practice to add code that always measures the above elapsed times.</li>
<li>The sum of the <b>Processing</b> and <b>DMA Transfer</b> times must remain within the per-frame “time budget” (i.e. below frame time).</li>
<li>The proper action to take if the per-frame “time budget” is exceeded is application-dependent, and could include:<ul>
<li>log a message to the application or host logging facility;</li>
<li>trigger an event;</li>
<li>set an alarm;</li>
<li>etc.</li>
</ul>
</li>
<li>Occasionally exceeding the “time budget” for one or more frames can be tolerated…<ul>
<li>…if the application can catch up by sustained sub-frame-time DMA and frame processing, and…</li>
<li>…the number of AutoCirculate device frame buffers is large enough to give the application time to catch up.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autocircfrmcnt"></a>
Frame Count Considerations (Capture)</h3>
<p>The more device frames dedicated to an AutoCirculate channel (specified by <em>inFrameCount</em> or <em>inStartFrameNumber</em>/<em>inEndFrameNumber</em> in <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a>), the more time the client application can be held off from transferring the next frame from the device. This increases latency, but also decreases the likelihood of frame drops.</p>
<p>The capture processing loop should be coded to transfer a frame whenever a frame is ready to be transferred, and should wait a frame if not. The capture <a class="el" href="../../d9/d07/demoapps.html">Demonstration Applications</a> provide good examples of how to do this, for example (generally):</p>
<div class="fragment"><div class="line"><a class="code" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html">AUTOCIRCULATE_TRANSFER</a>  inputXfer;  <span class="comment">//  AutoCirculate input transfer info</span></div>
<div class="line">mDevice.AutoCirculateInitForInput (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>,  <span class="comment">/* numFrames */</span> 10,  <a class="code" href="../../d6/d0c/ntv2enums_8h.html#abe5e1274885a1ba60e04e66bb0b41516aa7306a07c062c3733dcc53b3b5e898d0">NTV2_AUDIOSYSTEM_1</a>);</div>
<div class="line">mDevice.AutoCirculateStart (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">//  Ingest frames til Quit signaled...</span></div>
<div class="line"><span class="keywordflow">while</span> (!mGlobalQuit)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html">AUTOCIRCULATE_STATUS</a> acStatus;</div>
<div class="line">    mDevice.AutoCirculateGetStatus (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>, acStatus);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (acStatus.<a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#aa54a6d69f91237afc322306c70457149">IsRunning</a>()  &amp;&amp;  acStatus.<a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#ae9609c2beafbdfcdacc74a6018d19943">HasAvailableInputFrame</a>())</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//  At this point, there&#39;s at least one fully-formed frame available in the device&#39;s</span></div>
<div class="line">        <span class="comment">//  frame buffer to transfer to the host. Reserve an NTV2FrameData to &quot;produce&quot;, and</span></div>
<div class="line">        <span class="comment">//  use it in the next transfer from the device...</span></div>
<div class="line">        <a class="code" href="../../d0/df1/class_n_t_v2_frame_data.html">NTV2FrameData</a> * pFrameData (mAVCircularBuffer.StartProduceNextBuffer());</div>
<div class="line">        <a class="code" href="../../d0/df1/class_n_t_v2_frame_data.html">NTV2FrameData</a> &amp; frameData (*pFrameData);</div>
<div class="line">        inputXfer.<a class="code" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#a3a9747f249bfde1af62f3ebbfe153c97">SetVideoBuffer</a> (frameData.VideoBuffer(), frameData.VideoBufferSize());</div>
<div class="line">        inputXfer.<a class="code" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#adc7e3eb26eb326ffe273b5f3308dcdb6">SetAudioBuffer</a> (frameData.AudioBuffer(), frameData.AudioBufferSize());</div>
<div class="line">        inputXfer.<a class="code" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad7480e96337587fd0035a42f6d43b17d">SetAncBuffers</a> (frameData.AncBuffer(), frameData.AncBufferSize(),</div>
<div class="line">                                 frameData.AncBuffer2(), frameData.AncBuffer2Size());</div>
<div class="line"> </div>
<div class="line">        <span class="comment">//  Transfer video/audio/anc from the device into our host buffers...</span></div>
<div class="line">        mDevice.AutoCirculateTransfer (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>, inputXfer);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">//  Remember the actual amount of audio captured...</span></div>
<div class="line">        <span class="keywordflow">if</span> (acStatus.<a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#a78f49465d49bf7af6e2abaf3c640932e">WithAudio</a>())</div>
<div class="line">            frameData.fNumAudioBytes = inputXfer.<a class="code" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad5b65a78cb290a12684696c031d72f75">GetCapturedAudioByteCount</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (acStatus.<a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#a0a8d15d916b56f635a961a46349cd323">WithCustomAnc</a>()  &amp;&amp;  frameData.AncBuffer())</div>
<div class="line">            frameData.fNumAncBytes = inputXfer.<a class="code" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#aeb0590309d1c5d552b83ed20f3bc1a64">GetCapturedAncByteCount</a>(<span class="comment">/*isF2*/</span><span class="keyword">false</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (acStatus.<a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#a0a8d15d916b56f635a961a46349cd323">WithCustomAnc</a>()  &amp;&amp;  frameData.AncBuffer2())</div>
<div class="line">            frameData.fNumAnc2Bytes = inputXfer.<a class="code" href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#aeb0590309d1c5d552b83ed20f3bc1a64">GetCapturedAncByteCount</a>(<span class="comment">/*isF2*/</span><span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">//  Signal that we&#39;re done &quot;producing&quot; the frame, making it available for future &quot;consumption&quot;...</span></div>
<div class="line">        mAVCircularBuffer.EndProduceNextBuffer();</div>
<div class="line">    }   <span class="comment">//  if A/C running and frame(s) are available for transfer</span></div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        mDevice.WaitForInputVerticalInterrupt (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>);  <span class="comment">//  Wait for a frame to become available</span></div>
<div class="line">}   <span class="comment">//  loop til quit signaled</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//  Stop AutoCirculate...</span></div>
<div class="line">mDevice.AutoCirculateStop (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>);</div>
</div><!-- fragment --><p>The number of buffers waiting to be transferred from the board is available from <a class="el" href="../../d9/daa/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r___s_t_a_t_u_s.html#a9ac3cb0ba02ac4382310e3b8e48bf4f5" title="The number of frames ready to record/play after the transfer.">AUTOCIRCULATE_TRANSFER_STATUS::acBufferLevel</a>.</p>
<p>If the application is held off for longer than the number of frames allocated, one or more captured frames will be lost (dropped).</p>
<p>AutoCirculate capture demos:</p><ul>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2capture">NTV2Capture Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2ccgrabber">NTV2CCGrabber Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2qtpreview">NTV2QtPreview Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2qtmultiinput">NTV2QtMultiInput Demo</a></li>
</ul>
<h2><a class="anchor" id="autocirculateplayout"></a>
AutoCirculate Playout</h2>
<div class="image">
<img src="../../ac-playout.png" alt=""/>
</div>
<p>Here, AutoCirculate is in playout mode, using 10 frame buffers. Frames 6, 7, 8, 9 and 0 already played through the output jack (in that order), while frame 1 is currently being played, while frame 5 is being transferred from host memory to the AJA device.</p>
<p>In playout, the AJA device firmware continually streams the video content of the <b>Active Frame</b> buffer to the output jack.</p>
<p>When AutoCirculate is running, frames get transferred (DMA’d) from host memory to the <b>Transfer Frame</b> of the AJA device’s frame memory.</p>
<p>The <b>Active Frame</b> “chases” the <b>Transfer Frame</b>, with the frame gap between them called the <b>Buffer Level</b>.</p>
<p>To prevent repeated images, the host application must ensure that the <b>Transfer Frame</b> never collides with the <b>Active Frame</b> being played.</p>
<p>Assuming a 29.97 fps full-frame rate, the AJA driver will bump the <b>Active Frame</b> to the next frame slot every 33 milliseconds. As long as the host application that’s transferring frames takes less than 33 milliseconds (including the DMA transfer time) to produce each frame, all will be well. If the host takes longer than 33 milliseconds to produce a frame, the <b>Transfer Frame</b> will start to fall behind, and the <b>Buffer Level</b> will decrease. If this is allowed to continue, the <b>Active Frame</b> will overtake the <b>Transfer Frame</b>, which will result in “dropped” frames that will end up being played more than once.</p>
<p>The <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirctimebudget">Per-Frame “Time Budget”</a> discussed in the <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculatecapture">AutoCirculate Capture</a> section applies equally for playout.</p>
<p>AutoCirculate assumes that the video and audio being transferred via <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> should be played together in-sync. It continuously monitors the sync, and if it detects a difference of more than about 10 milliseconds, it will resync the audio to the video. This resync involves restarting the audio engine, so a click or pop may be heard when it happens. The resync usually only happens when frames are dropped, during which the audio will be disabled until newly-transferred data arrives. (See <a class="el" href="../../d1/dc5/ntv2devops.html#audioplayout">Audio Playout</a> for more information.)</p>
<p>During a very long playback (occurring over many hours), if too many or too few samples are transferred, the sync may drift, which may require a correction. A classic example of this would be playing a sequence of MP4 videos that have no notion of, say, the NTSC 5-frame cadence sequence. It can also easily happen when loop-playing a very short clip. One way to handle this is to track the number of video frames and audio samples delivered to AutoCirculate over the long term, then add or drop samples in the breaks between clips. Remember to reset the tracked frame and sample counts whenever the <a class="el" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#a8e2d300d044695ffa41eab9f39f2c473">AUTOCIRCULATE_STATUS::GetDroppedFrameCount</a> or <a class="el" href="../../d9/daa/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r___s_t_a_t_u_s.html#afb4d3c8fe74d22f17bd1ceb382f433bc" title="Total number of frames dropped since AutoCirculateStart.">AUTOCIRCULATE_TRANSFER_STATUS::acFramesDropped</a> value changes (increases). See <a class="el" href="../../d1/dc5/ntv2devops.html#audiosamplecount">Correlating Audio Samples to Video Frames</a> for more information.</p>
<p>(See <a class="el" href="../../d7/dcb/ancillarydata.html#anctimecode">Timecode (RP-188, SMPTE-12M)</a> for more information about timecode playout and AutoCirculate.)</p>
<p>AutoCirculate playout demos:</p><ul>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2player">NTV2Player Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2player4k">NTV2Player4K Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2ccplayer">NTV2CCPlayer Demo</a></li>
</ul>
<h2><a class="anchor" id="autocirculateinandout"></a>
AutoCirculate Capture and Playout</h2>
<div class="image">
<img src="../../ac-captureplayout.png" alt=""/>
</div>
<p>Here, AutoCirculate is simultaneously capturing from a device input and playing through a device output, while still using 10 frame buffers in all.</p>
<p>For this to work, two independent “channels” must be used, each with its own reserved range of frame buffers on the device, each having its own <b>Active Frame</b>, <b>Transfer Frame</b> and <b>Buffer Level</b> measuring the gap, if any, between them.</p>
<p>The client application would typically use two execution threads for performing the DMA transfers — one for capture, the other for playout.</p>
<dl class="section note"><dt>Note</dt><dd>It’s possible to have other Frame Stores writing into (or reading from) device frame buffer memory being used by an AutoCirculate channel, its corresponding Frame Store, and the frame buffers being used. This can wreak havoc with the quality of the video being streamed. See the <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fbconflict">When FrameStores Access the Same Frame Buffer Memory</a> discussion for more details.</dd>
<dd>
It’s also possible to miscalculate the device frame buffer range being used for AutoCirculate such that the last frame or two encroach on the audio buffers. On capture, this can result in sporadically bad video frames and/or noise in the captured audio. On playout, this can cause sporadically bad video frames to be transmitted, and/or noise in the transmitted audio. See <a class="el" href="../../d1/dc5/ntv2devops.html#audioclobber">Audio Buffer Corruption</a> for more information.</dd></dl>
<p>AutoCirculate Capture/Playout Demos:</p><ul>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2burn">NTV2Burn Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2burn4kquadrant">NTV2Burn4KQuadrant Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2ccgrabber">NTV2CCGrabber Demo</a></li>
<li><a class="el" href="../../d9/d07/demoapps.html#ntv2fieldburn">NTV2FieldBurn Demo</a></li>
</ul>
<h2><a class="anchor" id="autocirculateapi"></a>
AutoCirculate API Functions</h2>
<p>There are five principal member functions that comprise the AutoCirculate API in the <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html" title="I interrogate and control an AJA video/audio capture/playout device.">CNTV2Card</a> class:</p><ul>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae617507f1b0562f866201a58c26e10e7" title="Starts AutoCirculating the specified channel that was previously initialized by CNTV2Card::AutoCircul...">CNTV2Card::AutoCirculateStart</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abeb2323b3a87e9bd63fb5ced90536a7e" title="Stops AutoCirculate for the given channel, and releases the on-device frame buffers that were allocat...">CNTV2Card::AutoCirculateStop</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a611031170a5dd26e456ed55e05dec9c2" title="Returns the current AutoCirculate status for the given channel.">CNTV2Card::AutoCirculateGetStatus</a></li>
</ul>
<p>In addition, there are several special-purpose methods that are available for more specialized applications, including:</p><ul>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a771fe110709ae2019de20d09a7c4fb20" title="Returns precise timing information for the given frame and channel that&#39;s currently AutoCirculating.">CNTV2Card::AutoCirculateGetFrameStamp</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ac72c740b4978e6be464d4075cc7c11b5" title="Pauses AutoCirculate for the given channel. Once paused, AutoCirculate can be resumed later by callin...">CNTV2Card::AutoCirculatePause</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aa1fffa43ec2592a46b4b494d3f9a8f26" title="Resumes AutoCirculate for the given channel, picking up at the next frame without loss of audio synch...">CNTV2Card::AutoCirculateResume</a></li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ad3cfb2cb482a25d8c2835a33fa22d49b" title="Flushes AutoCirculate for the given channel.">CNTV2Card::AutoCirculateFlush</a></li>
</ul>
<h2><a class="anchor" id="autocirculateflow"></a>
Recommended Program Flow</h2>
<div class="image">
<img src="../../ac-captureflowchart.png" alt=""/>
</div>
<p>This illustrates the recommended program flow for using AutoCirculate to capture video and audio. For a GUI application, the “Main” flow of execution on the left would handle the user interface implementation. The “Wait for Quit Request” step would respond to user inputs and display capture/playout status. For a command-line utility, the “Wait for Quit Request” box would implement a loop that sleeps, waiting for a global “quit” flag to become logically “true” (and perhaps periodically emit some status information to the standard output stream).</p>
<p>Once the device has been acquired and configured, the main thread then creates and starts the capture thread.</p>
<p>The program flow surrounded by the dashed line is the capture thread. When it starts, <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> is called to set up the AutoCirculate parameters for a specific NTV2Channel, which allocates a contiguous block of frame buffers on the card to be used by the AutoCirculate mechanism. At this point, it is started by calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae617507f1b0562f866201a58c26e10e7" title="Starts AutoCirculating the specified channel that was previously initialized by CNTV2Card::AutoCircul...">CNTV2Card::AutoCirculateStart</a>. Once started, it remains in a loop, calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a611031170a5dd26e456ed55e05dec9c2" title="Returns the current AutoCirculate status for the given channel.">CNTV2Card::AutoCirculateGetStatus</a> to determine if AutoCirculate is in the “running” state and if at least one frame is ready to transfer. If so, AutoCirculateTransfer is called to transfer the captured frame to host memory; otherwise the thread sleeps in <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a56552aedb9631efa04e1ff8ea96be02b" title="Efficiently sleeps the calling thread/process until the next one or more field (interlaced video) or ...">CNTV2Card::WaitForInputVerticalInterrupt</a> until the next VBI occurs. This process continues until a global quit flag is set, at which point the thread calls <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abeb2323b3a87e9bd63fb5ced90536a7e" title="Stops AutoCirculate for the given channel, and releases the on-device frame buffers that were allocat...">CNTV2Card::AutoCirculateStop</a> and exits.</p>
<p>After <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae617507f1b0562f866201a58c26e10e7" title="Starts AutoCirculating the specified channel that was previously initialized by CNTV2Card::AutoCircul...">CNTV2Card::AutoCirculateStart</a> is called, the AJA device’s <b>Active Frame</b> will automatically change at every VBI to cycle continuously from the starting frame to the ending frame and back again until <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abeb2323b3a87e9bd63fb5ced90536a7e" title="Stops AutoCirculate for the given channel, and releases the on-device frame buffers that were allocat...">CNTV2Card::AutoCirculateStop</a> is called. <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> is called repeatedly to transfer a buffered video frame (plus any associated audio, timecode, <a class="el" href="../../d7/dcb/ancillarydata.html">Ancillary Data</a>, etc.) between the driver and the application. The <b>Active Frame</b>, buffer level, etc. are advanced automatically by the AJA device driver.</p>
<p><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a611031170a5dd26e456ed55e05dec9c2" title="Returns the current AutoCirculate status for the given channel.">CNTV2Card::AutoCirculateGetStatus</a> is used to determine whether a given channel is currently AutoCirculating, and if so, to report its current buffer level. It also supplies other data, such as its frame range (starting and ending frames) and its <b>Active Frame</b>.</p>
<p>Because AutoCirculate is wholly implemented in the driver, and is completely independent of any <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html" title="I interrogate and control an AJA video/audio capture/playout device.">CNTV2Card</a> instance that started it or that could be monitoring or controlling it, there is no provision to automatically stop AutoCirculating when any/all <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html" title="I interrogate and control an AJA video/audio capture/playout device.">CNTV2Card</a> instances have been destroyed. The driver will continue to AutoCirculate, blissfully unaware that nobody is monitoring the activity. OEMs are encouraged to be good citizens and call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abeb2323b3a87e9bd63fb5ced90536a7e" title="Stops AutoCirculate for the given channel, and releases the on-device frame buffers that were allocat...">CNTV2Card::AutoCirculateStop</a> at exit to reduce unnecessary driver activity.</p>
<h2><a class="anchor" id="autocirculatechannels"></a>
AutoCirculate Channel</h2>
<p>The <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> passed to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> (or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a>) identifies the device <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fs">FrameStore Operation</a> that is to be configured and operated by AutoCirculate in the device driver (i.e. <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6" title="Specifies channel or Frame Store 1 (or the first item).">NTV2_CHANNEL1</a> <code>==</code> 0 <code>==</code> FrameStore 1 <code>==</code> <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a000096cdf1eb36b50c8e55c406f24befabb382aaf4f9b3223906b8ca2a7b6b4b4">NTV2_WgtFrameBuffer1</a>, <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dcea771f9f386b8b1bdffd3b2171e723ff40" title="Specifies channel or Frame Store 2 (or the 2nd item).">NTV2_CHANNEL2</a> <code>==</code> 1 <code>==</code> FrameStore 2 <code>==</code> <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a000096cdf1eb36b50c8e55c406f24befa7e257ed7f78448ed24c2b6b794498fd9">NTV2_WgtFrameBuffer2</a>, etc.).</p>
<div class="image">
<img src="../../ac-whichinterrupt.png" alt=""/>
</div>
<p>AutoCirculate is driven by vertical blanking interrupts (VBIs) received by the channel’s <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fs">FrameStore Operation</a>. If these interrupts aren’t received by the hardware, the driver’s ISR won’t get called, and AutoCirculate (for that channel) will be stuck.</p><ul>
<li><b>Playout</b> mode:<ul>
<li>The <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fs">FrameStore Operation</a> need not be connected to anything. The device hardware has one clock that always runs, and delivers an output VBI to every enabled <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fs">FrameStore Operation</a> that’s set to Playout mode.</li>
<li><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a0599dc483977c64978cae92fb8837252" title="Efficiently sleeps the calling thread/process until the next one or more field (interlaced video) or ...">CNTV2Card::WaitForOutputVerticalInterrupt</a> should theoretically never return False (time-out failure).</li>
</ul>
</li>
<li><b>Capture</b> mode:<ul>
<li>The <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fs">FrameStore Operation</a> <em>MUST</em> be connected to an input widget (e.g., “SDI In”, “HDMI In”, “Analog In” widget) either…<ul>
<li>directly, or…</li>
<li>indirectly through another widget (e.g., Dual-Link converter, CSC, etc.).</li>
</ul>
</li>
</ul>
</li>
<li>If AutoCirculate is stuck in the <b>Starting</b> phase, then interrupts weren’t being received by the <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fs">FrameStore Operation</a> when the application called <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae617507f1b0562f866201a58c26e10e7" title="Starts AutoCirculating the specified channel that was previously initialized by CNTV2Card::AutoCircul...">CNTV2Card::AutoCirculateStart</a>.</li>
<li>If AutoCirculate is stuck in the <b>Running</b> or <b>Paused</b> state, then interrupts stopped being delivered to the <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fs">FrameStore Operation</a> sometime after the application successfully called <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a>.</li>
</ul>
<p>To obtain the size of your host-based video buffer, in bytes (to accommodate a single frame), try…</p><ul>
<li><a class="el" href="../../d6/d9b/ntv2utils_8cpp.html#a912d95b5446b6a840c0c51ac68a541c6">GetVideoActiveSize</a> — returns the minimum number of bytes (including VANC lines for “tall” geometries);</li>
<li><a class="el" href="../../d6/d9b/ntv2utils_8cpp.html#a352b6173ffed78fb20389863531169aa" title="Identical to the GetVideoActiveSize function, except rounds the result up to the nearest 4K page size...">GetVideoWriteSize</a> — this calls <a class="el" href="../../d6/d9b/ntv2utils_8cpp.html#a912d95b5446b6a840c0c51ac68a541c6">GetVideoActiveSize</a>, but pads up to the nearest 4K page size multiple;</li>
<li><a class="el" href="../../d3/d4e/class_n_t_v2_format_descriptor.html#ac4e30d47844b5384804860fb5a7e4b01">NTV2FormatDescriptor::GetTotalRasterBytes</a> — gives the exact number (per-plane for planar formats).</li>
</ul>
<p>To determine the maximum number of frame buffers a given device can accommodate for a given frame geometry and buffer format, call <a class="el" href="../../dd/d86/ntv2devicefeatures_8cpp.html#af7a7b4d52ebf6c02ee032f0fb5dae6cb">NTV2DeviceGetNumberFrameBuffers</a>.</p>
<h2><a class="anchor" id="autocirculatepreload"></a>
Pre-Loading Frames For Playback</h2>
<p>When AutoCirculate starts in playout mode (without yet transferring frames), the device firmware immediately starts playing the contents of the <b>Active Frame</b> to the output jack, displaying whatever YCbCr/RGB data was in the device’s frame buffer memory.</p>
<p>If <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> has not been called, the <b>Active Frame</b> and <b>Transfer Frame</b> remain stuck at frame zero, the <b>Buffer Level</b> remains at zero, and the Frames Dropped tally increments at the current frame rate.</p>
<p>To prevent displaying unpredictable frame(s) at playout startup (and to prevent frame drops caused by this initial frame starvation), it’s best to “preload” one or more frames before calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae617507f1b0562f866201a58c26e10e7" title="Starts AutoCirculating the specified channel that was previously initialized by CNTV2Card::AutoCircul...">CNTV2Card::AutoCirculateStart</a>.</p>
<p>To do this, call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> for each frame you wish to preload into the device frame buffer. After each such call, the <b>Transfer Frame</b> will “bump” to the next frame slot, and the <b>Buffer Level</b> will increment. After preloading, you can safely call <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae617507f1b0562f866201a58c26e10e7" title="Starts AutoCirculating the specified channel that was previously initialized by CNTV2Card::AutoCircul...">CNTV2Card::AutoCirculateStart</a>, and continue to transfer additional frames to the device, with the goal of keeping the <b>Transfer Frame</b> ahead of the <b>Active Frame</b> being played by the hardware.</p>
<h2><a class="anchor" id="autocirculateinterlace"></a>
Interlaced Versus Progressive Video</h2>
<p>In capture mode, with a progressive video signal, immediately after the input VBI, the last-written video frame in the device’s frame buffer is guaranteed to be fully-composed. With interlaced video, this is only true after every other VBI. The following code snippet allows this phenomenon to be visualized: </p><div class="fragment"><div class="line">. . .</div>
<div class="line">AUTOCIRCULATE_TRANSFER  xferInfo;</div>
<div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html">AUTOCIRCULATE_STATUS</a>    status;</div>
<div class="line">    mDevice.AutoCirculateGetStatus (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>, status);</div>
<div class="line">    <span class="keywordflow">if</span> (status.<a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#aa54a6d69f91237afc322306c70457149">IsRunning</a>())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (status.<a class="code" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#ae9609c2beafbdfcdacc74a6018d19943">HasAvailableInputFrame</a>())</div>
<div class="line">        {</div>
<div class="line">            cout &lt;&lt; <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line">            mDevice.AutoCirculateTransfer (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>, xferInfo);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            cout &lt;&lt; <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line">    }   <span class="comment">//  if A/C running</span></div>
<div class="line">    mDevice.WaitForInputVerticalInterrupt (<a class="code" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a>);</div>
<div class="line">}   <span class="comment">//  loop</span></div>
<div class="line">. . .</div>
</div><!-- fragment --><p>With interlaced video, the standard output stream will contain a <code></code>...010101010101... pattern, whereas progressive video results in a <code></code>...111111111111... pattern.</p>
<p>When AutoCirculating interlaced video, the driver will not “bump” the <b>Active Frame</b> until it has been completely composed (i.e., until immediately after the “Field 1” VBI occurs).</p>
<p>It is possible (and sometimes even desireable) to transfer each field of interlaced video separately, which can be done by calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a487c000317d3bacdef53b1b088d83c4d" title="Transfers all or part of a frame as specified in the given AUTOCIRCULATE_TRANSFER object to/from the ...">CNTV2Card::AutoCirculateTransfer</a> every time through the loop (without checking the <b>Buffer Level</b>). See the <a class="el" href="../../d4/d91/class_n_t_v2_field_burn.html" title="I capture individual fields from an interlaced video signal provided to an SDI input....">NTV2FieldBurn</a> demonstration application for more details.</p>
<h2><a class="anchor" id="autocirculatefieldmode"></a>
Field-Based Operation</h2>
<p>Historically, AutoCirculate was always frame-based, but many customers requested the ability to operate in <b>Field Mode</b>. <b>Field Mode</b> was added in <a href="https://sdksupport.aja.com/index.php?/Knowledgebase/Article/View/ntv2sdk152official">SDK 15.2</a>.</p><ul>
<li>In <b>Field Mode</b>, all the <em>frame</em> counters in the <a class="el" href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html" title="This is returned from the CNTV2Card::AutoCirculateGetStatus function.">AUTOCIRCULATE_STATUS</a> object are interpreted as <em>fields</em>.</li>
<li>Use the <code>AUTOCIRCULATE_WITH_FIELDS</code> option when calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or NTV2Card::AutoCirculateInitForOutput.</li>
<li>Also in <a href="https://sdksupport.aja.com/index.php?/Knowledgebase/Article/View/ntv2sdk152official">SDK 15.2</a>, the <a class="el" href="../../d9/d07/demoapps.html#ntv2fieldburn">NTV2FieldBurn Demo</a> was changed to use <b>Field Mode</b>.</li>
</ul>
<h2><a class="anchor" id="autocirculatelowlatency"></a>
Latency Considerations</h2>
<p>AutoCirculate’s kernel queuing model doesn’t support low-latency very well. It’s very good at reliably capturing and playing frames without dropping, as long as the frame queue is large enough to absorb user-mode latency. The kernel queue is managed once per frame just after the video VBI. This gives the client software an entire frame-time to program the hardware for the next frame.</p>
<p>For capture, the frame written to the device frame buffer during the previous frame time is available for transfer after the vertical interrupt is received. However, audio can’t be transferred immediately, since audio is captured continuously, and all audio for the previous frame may not have been flushed to the device frame buffer yet. For this reason, AJA usually recommends transferring video and audio when there’s at least two frames in the queue — which may be unacceptable for low latency applications.</p>
<p>For playback, when the frame interrupt is received, the frame to display after the next VBI must be set in the hardware. Since this is a whole frame early, you essentially end up with two frames in the queue for playback as well. This is why we wrote the <a class="el" href="../../d9/d07/demoapps.html#ntv2llburn">NTV2LLBurn Demo</a>, a low-latency demo that works without AutoCirculate.</p>
<p><b>How many frames to circulate?</b> This choice can depend on a number of factors that each affect how many frames are available for buffering on the device:</p><ul>
<li>The application’s frame-dropping tolerance;</li>
<li>The application’s latency requirement (always at odds with frame-dropping tolerance);</li>
<li>The hardware devices it may need to run on (some devices have smaller amounts of SDRAM);</li>
<li>The largest video raster expected;</li>
<li>The frame buffer (pixel) format to be used. See <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fbindexing">Frame Buffer Indexing</a> for more information.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Modern NTV2 devices have a large enough SDRAM complement such that it’s possible to buffer several seconds of video frames on the device, which can readily exceed the maximum 1.37 seconds of audio that’s typically buffered on the device. When <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> are called, and the requested number of video frames to buffer exceeds the maximum frames buffered for audio, a warning message will be logged in <a class="el" href="../../db/d02/toolsandutilities.html#usingajalogger">“AJA Logger”</a> or the <a class="el" href="../../db/d02/toolsandutilities.html#usinglogreader">‘logreader’ Command-Line Utility</a> (assuming the <code>AutoCirculate_39</code> message group is enabled). For example:<br  />
 <code>AutoCirculate channel 3: 85 frames (10 thru 94) exceeds 40-frame max audio buffer capacity</code></dd></dl>
<h2><a class="anchor" id="autocirculatemon"></a>
Monitoring AutoCirculate Activity with NTV2Watcher Tool</h2>
<p><a class="el" href="../../db/d02/toolsandutilities.html#usingntv2watcher">“NTV2Watcher”</a> has an <a class="el" href="../../db/d02/toolsandutilities.html#inspectorac">AutoCirculate Inspector</a> that shows AutoCirculate activity in near-real-time for all possible channels on any AJA device attached to the host.</p>
<div class="image">
<img src="../../watcher-inspector-ac.png" alt=""/>
</div>
<p>You can right-click in the AutoCirculate Channel column to pop up a menu to control AutoCirculate activity on that channel. This is handy for manually pausing, resuming, stopping or restarting AutoCirculate while your application runs.</p>
<p>While AutoCirculate is paused, you can inspect, in great detail…</p><ul>
<li>the captured (or queued) per-frame timecodes (in the <a class="el" href="../../db/d02/toolsandutilities.html#inspectorac">AutoCirculate Inspector</a>).</li>
<li>the captured (or queued) video frames (using the <a class="el" href="../../db/d02/toolsandutilities.html#inspectorframebuffer">Frame Buffer Inspector</a>).</li>
<li>the captured (or queued) audio samples (using the <a class="el" href="../../db/d02/toolsandutilities.html#inspectoraudio">Audio Inspector</a>).</li>
<li>the captured (or queued) <a class="el" href="../../d7/dcb/ancillarydata.html">Ancillary Data</a> (using the <a class="el" href="../../db/d02/toolsandutilities.html#inspectoranc">Ancillary Data Inspector</a>).</li>
</ul>
<h2><a class="anchor" id="autocirculatemsgs"></a>
AutoCirculate Diagnostic Messages</h2>
<p>While developing and debugging with AutoCirculate, it can be helpful to monitor its diagnostic messages, particularly when the channel is initialized via <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a>. These messages can be seen in <a class="el" href="../../db/d02/toolsandutilities.html#usingajalogger">“AJA Logger”</a> or <a class="el" href="../../db/d02/toolsandutilities.html#usinglogreader">‘logreader’ Command-Line Utility</a> when the <code>AutoCirculate_39</code> message group is enabled, and the client application has opened the <a class="el" href="../../db/d56/class_a_j_a_debug.html">AJADebug</a> facility by calling <a class="el" href="../../db/d56/class_a_j_a_debug.html#a00ff3e1d68cf7d7b49a6545774c22bb2">AJADebug::Open</a> (usually in <code><a class="el" href="../../d6/dbf/ntv2burn_2main_8cpp.html#a217dbf8b442f20279ea00b898af96f52">main()</a></code>).</p>
<ul>
<li><b>Information Messages</b><br  />
 These messages are informational, and do not indicate problems of any kind.<br  />
 &#160;<ul>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code> initialized using frames </code></b><em>{range}</em><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code></b>).<br  />
 <em>range</em>: Indicates the AutoCirculate frame range (two unsigned decimal integers separated by a hyphen).</li>
<li><b>Example: </b><code>Input Ch3 initialized using frames 0-6</code></li>
<li><b>Meaning: </b>AutoCirculate streaming in the given direction has been initialized for the given <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> and is ready to be started with a subsequent call to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#ae617507f1b0562f866201a58c26e10e7" title="Starts AutoCirculating the specified channel that was previously initialized by CNTV2Card::AutoCircul...">CNTV2Card::AutoCirculateStart</a>.<br  />
 &#160; <br  />
</li>
</ul>
</li>
</ul>
</li>
<li><b>Warning Messages</b><br  />
 These messages are warnings. AutoCirculate will operate, but there may be problems.<br  />
 &#160;<ul>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: FrameCount </code></b><em>{count}</em><b><code> ignored &ndash; using start/end </code></b><em>{range}</em><b><code> frame numbers</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code></b>).<br  />
 <em>count</em>: Indicates the <em>FrameCount</em> parameter (an unsigned decimal integer value).<br  />
 <em>range</em>: Indicates the AutoCirculate frame range (two unsigned decimal integers separated by a forward-slash ‘/’).</li>
<li><b>Example: </b><code>Output Ch2: FrameCount 20 ignored &ndash; using start/end 12/45 frame numbers</code></li>
<li><b>Problem: </b><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> was called with both a non-zero <em>FrameCount</em> parameter and valid <em>StartFrame</em> &amp; <em>EndFrame</em> values.<br  />
</li>
<li><b>Solution: </b>Set the <em>FrameCount</em> parameter to zero when specifying valid <em>StartFrame</em> &amp; <em>EndFrame</em> values; or specify zero for both <em>StartFrame</em> &amp; <em>EndFrame</em> with a non-zero <em>FrameCount</em> value.<br  />
 &#160; <br  />
</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: MultiLink Audio requested, but device doesn't support it</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code>)</b>.</li>
<li><b>Example: </b><code>Input Ch1: MultiLink Audio requested, but device doesn't support it</code></li>
<li><b>Problem: </b>One of the <code>AUTOCIRCULATE_WITH_MULTILINK_AUDIO</code>… options was used, but the AJA device doesn’t support <a class="el" href="../../d1/dc5/ntv2devops.html#audiomultilink">Multi-Link Audio (32, 48, 64 Audio Channels)</a>.</li>
<li><b>Solution: </b>Check if the device supports <a class="el" href="../../d1/dc5/ntv2devops.html#audiomultilink">Multi-Link Audio (32, 48, 64 Audio Channels)</a> before specifying the <code>AUTOCIRCULATE_WITH_MULTILINK_AUDIO</code> option.<br  />
 &#160; <br  />
</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: memory overlap/interference: Frms </code></b><em>{range}</em><b><code>: </code></b><em>{activities}</em><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code></b>).<br  />
 <em>activities</em>: One or more activities that touch device memory, each indicating the <b><em>firmware entity</em></b> and <b><em>mode</em></b>:<ul>
<li><b><em>firmware entity</em>:</b><ul>
<li><b><code>AC</code></b> indicates an active AutoCirculate Channel</li>
<li><b><code>Ch</code></b> indicates an enabled FrameStore</li>
<li><b><code>Aud</code></b> indicates a running <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abe5e1274885a1ba60e04e66bb0b41516" title="Used to identify an Audio System on an NTV2 device. See Audio System Operation for more information.">NTV2AudioSystem</a></li>
</ul>
</li>
<li><b><em>mode</em>:</b><ul>
<li><b><code>Read</code></b> indicates the memory is being read;</li>
<li><b><code>Write</code></b> indicates the memory is being written.</li>
</ul>
</li>
</ul>
</li>
<li><b>Example: </b><code>Input Ch3: memory overlap/interference: Frms 5-6: AC3 Write, AC2 Read</code></li>
<li><b>Problem: </b>One or more of the frames being used for the <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculatechannels">AutoCirculate Channel</a> are also being used for other purposes.</li>
<li><b>Solution: </b>Be sure to choose a frame range that won’t interfere with other activity on the device. See <a class="el" href="../../d1/dc5/ntv2devops.html#vidop-fbconflict">When FrameStores Access the Same Frame Buffer Memory</a> and <a class="el" href="../../d1/dc5/ntv2devops.html#audioclobber">Audio Buffer Corruption</a> for more information.<br  />
 &#160; <br  />
</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: </code></b><em>{count}</em><b><code> frames (</code></b><em>{range}</em><b><code>) exceeds </code></b> <em>{maxCount}</em><b><code>-frame max buffer capacity of </code></b><em>audioSystem</em><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code></b>).<br  />
 <em>count</em>: Indicates the <em>FrameCount</em> parameter (an unsigned decimal integer value).<br  />
 <em>range</em>: Indicates the AutoCirculate frame range (two unsigned decimal integers separated by a forward-slash ‘/’).<br  />
 <em>maxCount</em>: Indicates the maximum number of frames the audio system can buffer.<br  />
 <em>audioSystem</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abe5e1274885a1ba60e04e66bb0b41516" title="Used to identify an Audio System on an NTV2 device. See Audio System Operation for more information.">NTV2AudioSystem</a> being used – <b><code>AudSys1</code></b> … <b><code>AudSys8</code></b>.</li>
<li><b>Example: </b><code>Input Ch3: 51 frames (0-50) exceeds 41-frame max audio buffer capacity</code></li>
<li><b>Problem: </b>A valid <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abe5e1274885a1ba60e04e66bb0b41516" title="Used to identify an Audio System on an NTV2 device. See Audio System Operation for more information.">NTV2AudioSystem</a> was specified, and based on the number of audio channels the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abe5e1274885a1ba60e04e66bb0b41516" title="Used to identify an Audio System on an NTV2 device. See Audio System Operation for more information.">NTV2AudioSystem</a> is currently configured for, and given the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#ad5d23b1875f7b840e92723d7841995fd" title="Identifies a particular video frame rate.">NTV2FrameRate</a> for the Channel/FrameStore, the number of video frames reserved for AutoCirculate exceeds the maximum number of frames of audio that the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abe5e1274885a1ba60e04e66bb0b41516" title="Used to identify an Audio System on an NTV2 device. See Audio System Operation for more information.">NTV2AudioSystem</a> can buffer. This will likely cause corrupted and/or missing audio.</li>
<li><b>Solution: </b>Reduce the number of frames being used for this <a class="el" href="../../d9/d9a/recordplaytechniques.html#autocirculatechannels">AutoCirculate Channel</a>.<br  />
 &#160; <br  />
</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code> has AUTOCIRCULATE_WITH_ANC set, but also has NTV2_VANCMODE_TALL set &ndash; this may cause anc insertion problems</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code>)</b>.</li>
<li><b>Example: </b><code>Output Ch4 has AUTOCIRCULATE_WITH_ANC set, but also has NTV2_VANCMODE_TALL set &ndash; this may cause anc insertion problems</code></li>
<li><b>Problem: </b><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> was called with the AUTOCIRCULATE_WITH_ANC option, but the FrameStore’s <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abcba86c92aeadc025b854b7157baddc7" title="These enum values identify the available VANC modes.">NTV2VANCMode</a> was not <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abcba86c92aeadc025b854b7157baddc7a11d1cfa22ee15b28b8bfddcfd6c2806f" title="This identifies the mode in which there are no VANC lines in the frame buffer.">NTV2_VANCMODE_OFF</a> (disabled).<br  />
</li>
<li><b>Solution: </b>Either disable VANC (by calling <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#abbb0a91d16cddb3fc10a5d867f92e582" title="Sets the VANC mode for the given FrameStore.">CNTV2Card::SetVANCMode</a> with <a class="el" href="../../d6/d0c/ntv2enums_8h.html#abcba86c92aeadc025b854b7157baddc7a11d1cfa22ee15b28b8bfddcfd6c2806f" title="This identifies the mode in which there are no VANC lines in the frame buffer.">NTV2_VANCMODE_OFF</a> ), or don’t use the <code>AUTOCIRCULATE_WITH_ANC</code> option.<br  />
 &#160; <br  />
</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: AUTOCIRCULATE_WITH_RP188 requested without AUTOCIRCULATE_WITH_ANC &ndash; enabled AUTOCIRCULATE_WITH_ANC anyway</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code>)</b>.</li>
<li><b>Example: </b><code>Output Ch2: AUTOCIRCULATE_WITH_RP188 requested without AUTOCIRCULATE_WITH_ANC &ndash; enabled AUTOCIRCULATE_WITH_ANC anyway</code></li>
<li><b>Problem: </b><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> was called for a <a class="el" href="../../d0/d53/ntv2devices.html#konaip">KONA IP</a> or <a class="el" href="../../d0/d53/ntv2devices.html#ioip">Io IP</a> device with SMPTE ST-2110 firmware with the <code>AUTOCIRCULATE_WITH_RP188</code> option, but without the <code>AUTOCIRCULATE_WITH_ANC</code> option. Without the SMPTE ST-2110 ancillary data stream, RP188 timecode won’t be transmitted.</li>
<li><b>Solution: </b>To include RP188 timecode in the outgoing SMPTE ST-2110 ancillary data stream, be sure to specify both <code>AUTOCIRCULATE_WITH_ANC</code> and <code>AUTOCIRCULATE_WITH_RP188</code>.<br  />
 &#160; <br  />
</li>
</ul>
</li>
</ul>
</li>
<li><b>Error Messages</b><br  />
 These messages indicate failure. AutoCirculate could not be initialized.<br  />
 &#160;<ul>
<li><em>{channel}</em><b><code> is illegal channel value</code></b><ul>
<li>…where…<br  />
 <em>channel</em>: Indicates the offending <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> value. Note that the actual zero-based index number of the channel will be one less than the indicated “Ch” decimal value.</li>
<li><b>Example: </b><code>Ch9 is illegal channel value</code></li>
<li><b>Problem: </b>An invalid <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> value was used.</li>
<li><b>Solution: </b>Specify a valid <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> value (<a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6" title="Specifies channel or Frame Store 1 (or the first item).">NTV2_CHANNEL1</a> thru <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dcea5c180a036fa3236304bad999688bcb2f" title="Specifies channel or Frame Store 8 (or the 8th item).">NTV2_CHANNEL8</a>).<br  />
 &#160;</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: illegal 'inNumChannels' value '</code></b><em>{count}</em><b><code>' &ndash; must be 1-8</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code></b>).<br  />
 <em>count</em>: Indicates the offending <em>inNumChannels</em> parameter – an unsigned decimal integer value.</li>
<li><b>Example: </b><code>Output Ch2: illegal 'inNumChannels' value '9' &ndash; must be 1-8</code></li>
<li><b>Problem: </b>The number of ganged channels must be at least 1, and no more than 8.</li>
<li><b>Solution: </b>Specify a channel count value in the range 1 thru 8.<br  />
 &#160;</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: FBAllocLock mutex not ready</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code>)</b>.</li>
<li><b>Example: </b><code>Output Ch2: FBAllocLock mutex not ready</code></li>
<li><b>Problem: </b>Somehow <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> were called before static initialization completed (i.e. before <code><a class="el" href="../../d6/dbf/ntv2burn_2main_8cpp.html#a217dbf8b442f20279ea00b898af96f52">main()</a></code> was called).</li>
<li><b>Solution: </b>Determine how this happened, then make the necessary corrections.<br  />
 &#160;</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: Zero frames requested</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code>)</b>.</li>
<li><b>Example: </b><code>Output Ch2: Zero frames requested</code></li>
<li><b>Problem: </b>Both the specified FrameCount and Start/End Frame parameter values passed to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> resulted in a zero-length frame range.</li>
<li><b>Solution: </b>Specify a valid, non-empty frame range.<br  />
 &#160;</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: EndFrame (</code></b><em>{endFrame}</em><b><code>) precedes StartFrame (</code></b><em>{startFrame}</em><b><code>)</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code>)</b>.</li>
<li><b>Example: </b><code>Input Ch3: EndFrame(0) precedes StartFrame(6)</code></li>
<li><b>Problem: </b>A Start/End Frame range was specified in the call to <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a>, but the Start frame number’s magnitude exceeded the End frame number’s magnitude.</li>
<li><b>Solution: </b>When specifying Start/End frame values, be sure the Start frame value ordinally precedes the End frame value.<br  />
 &#160;</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code>: Frames </code></b><em>{range}</em><b><code> &lt; 2 frames</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code></b>).<br  />
 <em>range</em>: Indicates the AutoCirculate frame range (two unsigned decimal integers separated by a hyphen ‘-’).</li>
<li><b>Example: </b><code>Input Ch3: Frames 1-1 &lt; 2 frames</code></li>
<li><b>Problem: </b>A Start/End Frame range was specified, each with the same value, making a single-frame AutoCirculate range.</li>
<li><b>Solution: </b>When specifying Start/End frame values, be sure the range encompasses 2 or more frames in length.<br  />
 &#160;</li>
</ul>
</li>
<li><em>{mode}</em><b><code> </code></b><em>{channel}</em><b><code> initialization failed</code></b><ul>
<li>…where…<br  />
 <em>mode</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a0e7716728e9df7086c72609f806dd4a5" title="Used to identify the mode of a Frame Store, or the direction of an AutoCirculate stream: either Captu...">NTV2Mode</a> (<b><code>Input</code></b> or <b><code>Output</code></b>).<br  />
 <em>channel</em>: Indicates the <a class="el" href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dce" title="These enum values are mostly used to identify a specific Frame Store. They&#39;re also commonly used to i...">NTV2Channel</a> (<b><code>Ch1</code></b> … <b><code>Ch8</code>)</b>.</li>
<li><b>Example: </b><code>Input Ch3 initialization failed</code></li>
<li><b>Problem: </b><a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#aacca5b4dbd0ba69c049087aa2caf6fcb" title="Prepares for subsequent AutoCirculate ingest, designating a contiguous block of frame buffers on the ...">CNTV2Card::AutoCirculateInitForInput</a> or <a class="el" href="../../d7/dfb/class_c_n_t_v2_card.html#a669e0e26f156eacbba892e1520489f5c" title="Prepares for subsequent AutoCirculate playout, designating a contiguous block of frame buffers on the...">CNTV2Card::AutoCirculateInitForOutput</a> failed for another reason.</li>
<li><b>Solution: </b>Check the host computer’s kernel log for any failure messages originating in the AJA NTV2 kernel driver.<br  />
 &#160; </li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r_html_ad5b65a78cb290a12684696c031d72f75"><div class="ttname"><a href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad5b65a78cb290a12684696c031d72f75">AUTOCIRCULATE_TRANSFER::GetCapturedAudioByteCount</a></div><div class="ttdeci">ULWord GetCapturedAudioByteCount(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l08270">ntv2publicinterface.h:8270</a></div></div>
<div class="ttc" id="aclass_n_t_v2_frame_data_html"><div class="ttname"><a href="../../d0/df1/class_n_t_v2_frame_data.html">NTV2FrameData</a></div><div class="ttdoc">I encapsulate the video, audio and anc host buffers used in the AutoCirculate demos....</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/ntv2democommon_8h_source.html#l00079">ntv2democommon.h:79</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r_html_adc7e3eb26eb326ffe273b5f3308dcdb6"><div class="ttname"><a href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#adc7e3eb26eb326ffe273b5f3308dcdb6">AUTOCIRCULATE_TRANSFER::SetAudioBuffer</a></div><div class="ttdeci">bool SetAudioBuffer(ULWord *pInAudioBuffer, const ULWord inAudioByteCount)</div><div class="ttdoc">Sets my audio buffer for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4c/ntv2publicinterface_8cpp_source.html#l02614">ntv2publicinterface.cpp:2614</a></div></div>
<div class="ttc" id="antv2enums_8h_html_abe5e1274885a1ba60e04e66bb0b41516aa7306a07c062c3733dcc53b3b5e898d0"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#abe5e1274885a1ba60e04e66bb0b41516aa7306a07c062c3733dcc53b3b5e898d0">NTV2_AUDIOSYSTEM_1</a></div><div class="ttdeci">@ NTV2_AUDIOSYSTEM_1</div><div class="ttdoc">This identifies the first Audio System.</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l03811">ntv2enums.h:3811</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r_html_ad7480e96337587fd0035a42f6d43b17d"><div class="ttname"><a href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#ad7480e96337587fd0035a42f6d43b17d">AUTOCIRCULATE_TRANSFER::SetAncBuffers</a></div><div class="ttdeci">bool SetAncBuffers(ULWord *pInANCBuffer, const ULWord inANCByteCount, ULWord *pInANCF2Buffer=NULL, const ULWord inANCF2ByteCount=0)</div><div class="ttdoc">Sets my ancillary data buffers for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4c/ntv2publicinterface_8cpp_source.html#l02622">ntv2publicinterface.cpp:2622</a></div></div>
<div class="ttc" id="antv2enums_8h_html_a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6"><div class="ttname"><a href="../../d6/d0c/ntv2enums_8h.html#a00aeeb1c32a817cf8a5b71396c8e8dceac8b886b1339c52f100305aefff5298c6">NTV2_CHANNEL1</a></div><div class="ttdeci">@ NTV2_CHANNEL1</div><div class="ttdoc">Specifies channel or Frame Store 1 (or the first item).</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ntv2enums_8h_source.html#l01307">ntv2enums.h:1307</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s_html_a78f49465d49bf7af6e2abaf3c640932e"><div class="ttname"><a href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#a78f49465d49bf7af6e2abaf3c640932e">AUTOCIRCULATE_STATUS::WithAudio</a></div><div class="ttdeci">bool WithAudio(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07236">ntv2publicinterface.h:7236</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s_html"><div class="ttname"><a href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html">AUTOCIRCULATE_STATUS</a></div><div class="ttdoc">This is returned from the CNTV2Card::AutoCirculateGetStatus function.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07105">ntv2publicinterface.h:7105</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r_html_aeb0590309d1c5d552b83ed20f3bc1a64"><div class="ttname"><a href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#aeb0590309d1c5d552b83ed20f3bc1a64">AUTOCIRCULATE_TRANSFER::GetCapturedAncByteCount</a></div><div class="ttdeci">ULWord GetCapturedAncByteCount(const bool inField2=false) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l08280">ntv2publicinterface.h:8280</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r_html"><div class="ttname"><a href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html">AUTOCIRCULATE_TRANSFER</a></div><div class="ttdoc">This object specifies the information that will be transferred to or from the AJA device in the CNTV2...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07904">ntv2publicinterface.h:7904</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r_html_a3a9747f249bfde1af62f3ebbfe153c97"><div class="ttname"><a href="../../db/dd9/class_a_u_t_o_c_i_r_c_u_l_a_t_e___t_r_a_n_s_f_e_r.html#a3a9747f249bfde1af62f3ebbfe153c97">AUTOCIRCULATE_TRANSFER::SetVideoBuffer</a></div><div class="ttdeci">bool SetVideoBuffer(ULWord *pInVideoBuffer, const ULWord inVideoByteCount)</div><div class="ttdoc">Sets my video buffer for use in a subsequent call to CNTV2Card::AutoCirculateTransfer.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d4c/ntv2publicinterface_8cpp_source.html#l02606">ntv2publicinterface.cpp:2606</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s_html_aa54a6d69f91237afc322306c70457149"><div class="ttname"><a href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#aa54a6d69f91237afc322306c70457149">AUTOCIRCULATE_STATUS::IsRunning</a></div><div class="ttdeci">bool IsRunning(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07211">ntv2publicinterface.h:7211</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s_html_ae9609c2beafbdfcdacc74a6018d19943"><div class="ttname"><a href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#ae9609c2beafbdfcdacc74a6018d19943">AUTOCIRCULATE_STATUS::HasAvailableInputFrame</a></div><div class="ttdeci">bool HasAvailableInputFrame(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07181">ntv2publicinterface.h:7181</a></div></div>
<div class="ttc" id="aclass_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s_html_a0a8d15d916b56f635a961a46349cd323"><div class="ttname"><a href="../../da/d18/class_a_u_t_o_c_i_r_c_u_l_a_t_e___s_t_a_t_u_s.html#a0a8d15d916b56f635a961a46349cd323">AUTOCIRCULATE_STATUS::WithCustomAnc</a></div><div class="ttdeci">bool WithCustomAnc(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd7/ntv2publicinterface_8h_source.html#l07246">ntv2publicinterface.h:7246</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">The NTV2 SDK</a></li>
    <li class="footer">Generated on Tue Oct 1 2024 16:33:58 for AJA NTV2 SDK by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
